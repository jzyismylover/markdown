<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Mr.Jiang-æŠ€æœ¯åšå®¢</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="">
    <script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?2675818a983a3131404cee835018f016";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
      </script>
    <meta name="description" content="å­¦ä¹ &amp;å·¥ä½œ-æŠ€æœ¯ç§¯ç´¯">
    
    <link rel="preload" href="/markdown/assets/css/0.styles.5474aed4.css" as="style"><link rel="preload" href="/markdown/assets/js/app.085aa012.js" as="script"><link rel="preload" href="/markdown/assets/js/2.773263cd.js" as="script"><link rel="preload" href="/markdown/assets/js/33.5a2693b9.js" as="script"><link rel="prefetch" href="/markdown/assets/js/1.50bc9635.js"><link rel="prefetch" href="/markdown/assets/js/10.121e7e8f.js"><link rel="prefetch" href="/markdown/assets/js/11.5205ffab.js"><link rel="prefetch" href="/markdown/assets/js/12.fef29d74.js"><link rel="prefetch" href="/markdown/assets/js/13.b581db50.js"><link rel="prefetch" href="/markdown/assets/js/14.07202c28.js"><link rel="prefetch" href="/markdown/assets/js/15.9aedb95a.js"><link rel="prefetch" href="/markdown/assets/js/16.dd97e264.js"><link rel="prefetch" href="/markdown/assets/js/17.8eb943fb.js"><link rel="prefetch" href="/markdown/assets/js/18.942cde78.js"><link rel="prefetch" href="/markdown/assets/js/19.44710683.js"><link rel="prefetch" href="/markdown/assets/js/20.22d46747.js"><link rel="prefetch" href="/markdown/assets/js/21.aa8b4011.js"><link rel="prefetch" href="/markdown/assets/js/22.b40024cc.js"><link rel="prefetch" href="/markdown/assets/js/23.ace5d346.js"><link rel="prefetch" href="/markdown/assets/js/24.2405d60a.js"><link rel="prefetch" href="/markdown/assets/js/25.c08a85e2.js"><link rel="prefetch" href="/markdown/assets/js/26.c4c5f267.js"><link rel="prefetch" href="/markdown/assets/js/27.b91e5849.js"><link rel="prefetch" href="/markdown/assets/js/28.b80c3633.js"><link rel="prefetch" href="/markdown/assets/js/29.594ec447.js"><link rel="prefetch" href="/markdown/assets/js/3.9d4223ad.js"><link rel="prefetch" href="/markdown/assets/js/30.324e278d.js"><link rel="prefetch" href="/markdown/assets/js/31.43dc2191.js"><link rel="prefetch" href="/markdown/assets/js/32.3fb01abd.js"><link rel="prefetch" href="/markdown/assets/js/34.637d4661.js"><link rel="prefetch" href="/markdown/assets/js/35.eccfebaa.js"><link rel="prefetch" href="/markdown/assets/js/36.c13df5f5.js"><link rel="prefetch" href="/markdown/assets/js/37.9890e89c.js"><link rel="prefetch" href="/markdown/assets/js/38.b33827f2.js"><link rel="prefetch" href="/markdown/assets/js/39.3a1ace37.js"><link rel="prefetch" href="/markdown/assets/js/4.27d6f5b1.js"><link rel="prefetch" href="/markdown/assets/js/40.4396d4c2.js"><link rel="prefetch" href="/markdown/assets/js/41.afe775e0.js"><link rel="prefetch" href="/markdown/assets/js/42.19b2951c.js"><link rel="prefetch" href="/markdown/assets/js/43.7c3256ea.js"><link rel="prefetch" href="/markdown/assets/js/44.7da308e4.js"><link rel="prefetch" href="/markdown/assets/js/45.89b2fd21.js"><link rel="prefetch" href="/markdown/assets/js/46.e817e45d.js"><link rel="prefetch" href="/markdown/assets/js/47.c56ee626.js"><link rel="prefetch" href="/markdown/assets/js/48.59541039.js"><link rel="prefetch" href="/markdown/assets/js/49.bc7ad96a.js"><link rel="prefetch" href="/markdown/assets/js/5.2637f2cc.js"><link rel="prefetch" href="/markdown/assets/js/50.9d0dc446.js"><link rel="prefetch" href="/markdown/assets/js/51.4d949834.js"><link rel="prefetch" href="/markdown/assets/js/52.90aa4f80.js"><link rel="prefetch" href="/markdown/assets/js/53.67b77129.js"><link rel="prefetch" href="/markdown/assets/js/54.3535db37.js"><link rel="prefetch" href="/markdown/assets/js/55.9efbe9e5.js"><link rel="prefetch" href="/markdown/assets/js/56.e8aa37ba.js"><link rel="prefetch" href="/markdown/assets/js/57.af66ff8f.js"><link rel="prefetch" href="/markdown/assets/js/58.0415674f.js"><link rel="prefetch" href="/markdown/assets/js/59.b09373ca.js"><link rel="prefetch" href="/markdown/assets/js/6.61bacfb8.js"><link rel="prefetch" href="/markdown/assets/js/60.d07cb515.js"><link rel="prefetch" href="/markdown/assets/js/61.ec2b2da7.js"><link rel="prefetch" href="/markdown/assets/js/62.44a5a0b8.js"><link rel="prefetch" href="/markdown/assets/js/63.09e39adc.js"><link rel="prefetch" href="/markdown/assets/js/64.b9ee085d.js"><link rel="prefetch" href="/markdown/assets/js/65.026450b0.js"><link rel="prefetch" href="/markdown/assets/js/66.a3571972.js"><link rel="prefetch" href="/markdown/assets/js/67.5a8616c4.js"><link rel="prefetch" href="/markdown/assets/js/68.6fdda787.js"><link rel="prefetch" href="/markdown/assets/js/69.691ff5d7.js"><link rel="prefetch" href="/markdown/assets/js/7.32a4bd87.js"><link rel="prefetch" href="/markdown/assets/js/70.b401009e.js"><link rel="prefetch" href="/markdown/assets/js/71.6b3bcefe.js"><link rel="prefetch" href="/markdown/assets/js/72.dcd8145e.js"><link rel="prefetch" href="/markdown/assets/js/73.cc81c046.js"><link rel="prefetch" href="/markdown/assets/js/74.856f40f0.js"><link rel="prefetch" href="/markdown/assets/js/75.746590de.js"><link rel="prefetch" href="/markdown/assets/js/76.8ddba5b5.js"><link rel="prefetch" href="/markdown/assets/js/77.16644476.js"><link rel="prefetch" href="/markdown/assets/js/78.e89fc885.js"><link rel="prefetch" href="/markdown/assets/js/79.1193b665.js"><link rel="prefetch" href="/markdown/assets/js/80.9475cd89.js"><link rel="prefetch" href="/markdown/assets/js/81.8d99d275.js"><link rel="prefetch" href="/markdown/assets/js/82.80eb3e2f.js"><link rel="prefetch" href="/markdown/assets/js/83.fe14141e.js"><link rel="prefetch" href="/markdown/assets/js/84.9647a2db.js"><link rel="prefetch" href="/markdown/assets/js/85.c7258f01.js"><link rel="prefetch" href="/markdown/assets/js/86.1a5782f4.js"><link rel="prefetch" href="/markdown/assets/js/87.e7354607.js"><link rel="prefetch" href="/markdown/assets/js/vendors~docsearch.54f2532f.js">
    <link rel="stylesheet" href="/markdown/assets/css/0.styles.5474aed4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/markdown/" class="home-link router-link-active"><img src="/markdown/logo.png" alt="Mr.Jiang-æŠ€æœ¯åšå®¢" class="logo"> <span class="site-name can-hide">Mr.Jiang-æŠ€æœ¯åšå®¢</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/jzyismylover/ubuntu-markdown" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/jzyismylover/ubuntu-markdown" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/markdown/vben/#ğŸ”-vue3" class="sidebar-link">ğŸ” vue3</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/markdown/vben/#api" class="sidebar-link">api</a></li><li class="sidebar-sub-header"><a href="/markdown/vben/#injectionkey" class="sidebar-link" style="padding-left:3rem;">InjectionKey</a></li><li class="sidebar-sub-header"><a href="/markdown/vben/#unwrapref" class="sidebar-link" style="padding-left:3rem;">UnwrapRef</a></li><li class="sidebar-sub-header"><a href="/markdown/vben/#unref" class="sidebar-link" style="padding-left:3rem;">unref</a></li><li class="sidebar-sub-header"><a href="/markdown/vben/#torefs" class="sidebar-link" style="padding-left:3rem;">toRefs</a></li><li class="sidebar-sub-header"><a href="/markdown/vben/#hooks" class="sidebar-link">hooks</a></li><li class="sidebar-sub-header"><a href="/markdown/vben/#usemessage" class="sidebar-link" style="padding-left:3rem;">useMessage</a></li><li class="sidebar-sub-header"><a href="/markdown/vben/#useeventlistener" class="sidebar-link" style="padding-left:3rem;">useEventListener</a></li><li class="sidebar-sub-header"><a href="/markdown/vben/#useformitem" class="sidebar-link" style="padding-left:3rem;">useFormItem</a></li><li class="sidebar-sub-header"><a href="/markdown/vben/#usecountdown" class="sidebar-link" style="padding-left:3rem;">useCountDown</a></li><li class="sidebar-sub-header"><a href="/markdown/vben/#vue-router" class="sidebar-link">vue-router</a></li><li class="sidebar-sub-header"><a href="/markdown/vben/#vue-i18n" class="sidebar-link">vue-i18n</a></li><li class="sidebar-sub-header"><a href="/markdown/vben/#pinia" class="sidebar-link">pinia</a></li></ul></li><li><a href="/markdown/vben/#ğŸ”-components" class="sidebar-link">ğŸ” components</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/markdown/vben/#dropdown" class="sidebar-link">dropDown</a></li><li class="sidebar-sub-header"><a href="/markdown/vben/#countdown" class="sidebar-link">countdown</a></li></ul></li><li><a href="/markdown/vben/#ğŸ”-vite" class="sidebar-link">ğŸ” vite</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/markdown/vben/#plugin" class="sidebar-link">plugin</a></li><li class="sidebar-sub-header"><a href="/markdown/vben/#glob" class="sidebar-link">glob</a></li></ul></li><li><a href="/markdown/vben/#ğŸ”-lint" class="sidebar-link">ğŸ” lint</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/markdown/vben/#eslint" class="sidebar-link">eslint</a></li><li class="sidebar-sub-header"><a href="/markdown/vben/#husky" class="sidebar-link">husky</a></li><li class="sidebar-sub-header"><a href="/markdown/vben/#lint-staged" class="sidebar-link">lint-staged</a></li><li class="sidebar-sub-header"><a href="/markdown/vben/#commitlint" class="sidebar-link">commitlint</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="content"><div class="content-wrapper" style="width:100%"><div class="theme-default-content custom-content content__default"><blockquote><p>vben-admin å¼€æºé¡¹ç›®å­¦ä¹ ï¼Œä»¥ä¸‹ä¸»è¦è®°å½•é‡Œé¢æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹</p></blockquote> <h2 id="ğŸ”-vue3"><a href="#ğŸ”-vue3" class="header-anchor">#</a> ğŸ” vue3</h2> <h3 id="api"><a href="#api" class="header-anchor">#</a> api</h3> <blockquote><p>vue3 é‡Œé¢æš´éœ²å‡ºå»çš„ api</p></blockquote> <h4 id="injectionkey"><a href="#injectionkey" class="header-anchor">#</a> InjectionKey</h4> <p>ä¸º <code>provide / inject</code> æ ‡æ³¨ç±»å‹ã€‚ Vue æä¾›äº†ä¸€ä¸ª <code>InjectionKey</code> æ¥å£ï¼Œå®ƒæ˜¯ä¸€ä¸ªç»§æ‰¿è‡ª <code>Symbol</code> çš„æ³›å‹ç±»å‹ï¼Œå¯ä»¥ç”¨æ¥åœ¨æä¾›è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´åŒæ­¥æ³¨å…¥å€¼çš„ç±»å‹ <a href="https://cn.vuejs.org/guide/typescript/composition-api.html#typing-provide-inject" target="_blank" rel="noopener noreferrer">å‚è€ƒ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> provide<span class="token punctuation">,</span> inject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> InjectionKey <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> InjectionKey<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token function">provide</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è‹¥æä¾›çš„æ˜¯éå­—ç¬¦ä¸²å€¼ä¼šå¯¼è‡´é”™è¯¯</span>

<span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// foo çš„ç±»å‹ï¼šstring | undefined</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="unwrapref"><a href="#unwrapref" class="header-anchor">#</a> UnwrapRef</h4> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">UnwrapRef<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">Ref<span class="token operator">&lt;</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token operator">&gt;</span></span> <span class="token operator">?</span> <span class="token constant">R</span> <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>

UnwrapRef<span class="token operator">&lt;</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">;</span> <span class="token comment">// number</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="unref"><a href="#unref" class="header-anchor">#</a> unref</h4> <p>å¦‚æœå‚æ•°æ˜¯ <code>ref</code>ï¼Œåˆ™è¿”å›å†…éƒ¨å€¼ï¼›å¦åˆ™è¿”å›å‚æ•°æœ¬èº«ï¼Œç­‰ä»·äºä»¥ä¸‹åˆ¤æ–­</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>val <span class="token operator">=</span> <span class="token function">isRef</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token operator">?</span> val<span class="token punctuation">.</span>value <span class="token operator">:</span> val<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="torefs"><a href="#torefs" class="header-anchor">#</a> toRefs</h4> <p>å°†å“åº”å¼å¯¹è±¡ï¼ˆ<code>reactive</code>ï¼‰è½¬æ¢ä¸ºæ™®é€šå¯¹è±¡ï¼Œæ™®é€šå¯¹è±¡çš„æ¯ä¸ªå±æ€§éƒ½æ˜¯å€¼å‘åŸå¯¹è±¡çš„ <code>ref</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;jzy&quot;</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> age <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// name.value === obj.name</span>
<span class="token comment">// age.value === obj.age</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="hooks"><a href="#hooks" class="header-anchor">#</a> hooks</h3> <blockquote><p>é‡Œé¢æ¯”è¾ƒæœ‰æ„æ€ hooks å‡½æ•°</p></blockquote> <h4 id="usemessage"><a href="#usemessage" class="header-anchor">#</a> useMessage</h4> <p><code>useMessage</code> ä¸»è¦æ˜¯é…ç½®å°è£…<code>antd</code> æ¶ˆæ¯ç»„ä»¶ä»¥ä¾¿åœ¨å…¨å±€å¼•å…¥ä½¿ç”¨</p> <ul><li><code>notifycation</code></li></ul> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  NotificationArgsProps<span class="token punctuation">,</span>
  ConfigProps<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;ant-design-vue/lib/notification&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// Notifycation ç»„ä»¶æä¾›çš„æ–¹æ³•åˆ—è¡¨</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">NotifyApi</span> <span class="token punctuation">{</span>
  <span class="token function">info</span><span class="token punctuation">(</span>config<span class="token operator">:</span> NotificationArgsProps<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function">success</span><span class="token punctuation">(</span>config<span class="token operator">:</span> NotificationArgsProps<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function">error</span><span class="token punctuation">(</span>config<span class="token operator">:</span> NotificationArgsProps<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function">warn</span><span class="token punctuation">(</span>config<span class="token operator">:</span> NotificationArgsProps<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function">warning</span><span class="token punctuation">(</span>config<span class="token operator">:</span> NotificationArgsProps<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function">open</span><span class="token punctuation">(</span>args<span class="token operator">:</span> NotificationArgsProps<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function">close</span><span class="token punctuation">(</span>key<span class="token operator">:</span> String<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function">config</span><span class="token punctuation">(</span>options<span class="token operator">:</span> ConfigProps<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// å…¨å±€é…ç½® notifycation é€‰é¡¹</span>
notification<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  placement<span class="token operator">:</span> <span class="token string">&quot;topRight&quot;</span><span class="token punctuation">,</span> <span class="token comment">// å‡ºç°ä½ç½®</span>
  duration<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token comment">// æŒç»­æ—¶é—´</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><ul><li><p><code>model</code> ï¼šé…ç½®è¾ƒå¤šï¼Œä¸»è¦éœ€è¦åŒºåˆ† <code>å›¾æ ‡</code>ã€<code>å¼¹å‡ºç±»å‹</code></p> <ul><li><p>å®šä¹‰ <code>model</code> è°ƒç”¨æ–¹æ³•ä¼ å…¥çš„å‚æ•°ç±»å‹</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ModalOptionsEx</span> <span class="token keyword">extends</span> <span class="token class-name">Omit<span class="token operator">&lt;</span>ModalFuncProps<span class="token punctuation">,</span> <span class="token string">&quot;iconType&quot;</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  iconType<span class="token operator">:</span> <span class="token string">&quot;warning&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;success&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;error&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;info&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">ModalOptionsPartial</span> <span class="token operator">=</span> Partial<span class="token operator">&lt;</span>ModalOptionsEx<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>å®šä¹‰ <code>model</code> ç»„ä»¶ <code>icon</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  InfoCircleFilled<span class="token punctuation">,</span>
  CheckCircleFilled<span class="token punctuation">,</span>
  CloseCircleFilled<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@ant-design/icons-vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">getIcon</span><span class="token punctuation">(</span>iconType<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>iconType <span class="token operator">===</span> <span class="token string">&quot;warning&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>InfoCircleFilled <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;modal-icon-warning&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>iconType <span class="token operator">===</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>CheckCircleFilled <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;modal-icon-success&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>iconType <span class="token operator">===</span> <span class="token string">&quot;info&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>InfoCircleFilled <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;modal-icon-info&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>CloseCircleFilled <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;modal-icon-error&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></li> <li><p>å®šä¹‰ <code>model</code> å†…å®¹æ¸²æŸ“å‡½æ•°ï¼ˆéœ€è¦åŒºåˆ†æ˜¯ <code>ç»„ä»¶ç±»å‹</code> è¿˜æ˜¯<code>æ™®é€šæ–‡æœ¬</code> ï¼‰</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">renderContent</span><span class="token punctuation">(</span><span class="token punctuation">{</span> content <span class="token punctuation">}</span><span class="token operator">:</span> Pick<span class="token operator">&lt;</span>ModalOptionsEx<span class="token punctuation">,</span> <span class="token string">&quot;content&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isString</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div innerHTML<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>content <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> content<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li><p>å®šä¹‰ <code>model</code> åŸºç¡€é…ç½®ï¼Œå¦‚ <code>ç¡®è®¤æŒ‰é’®æ–‡å­—</code> ã€<code>æ˜¯å¦å‚ç›´å±…ä¸­</code>ï¼ŒåŒæ—¶æä¾›ä¸€ä¸ª <code>options</code> åˆ›å»ºå‡½æ•°ï¼Œåˆå¹¶ <code>baseOptions</code> ä»¥åŠå¤–éƒ¨ä¼ å…¥çš„å‚æ•°</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">const</span> <span class="token function-variable function">getBaseOptions</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> t <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useI18n</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    okText<span class="token operator">:</span> <span class="token function">t</span><span class="token punctuation">(</span><span class="token string">&quot;common.okText&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// ç¡®è®¤æŒ‰é’®æ–‡å­—</span>
    centered<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// å‚ç›´å‰§ä¸­å±•ç¤º Modal</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// åˆå§‹åŒ–é…ç½®</span>
<span class="token keyword">function</span> <span class="token function">createModalOptions</span><span class="token punctuation">(</span>
  options<span class="token operator">:</span> ModalOptionsPartial<span class="token punctuation">,</span>
  icon<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">)</span><span class="token operator">:</span> ModalOptionsPartial <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">getBaseOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>options<span class="token punctuation">,</span>
    content<span class="token operator">:</span> <span class="token function">renderContent</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">,</span>
    icon<span class="token operator">:</span> <span class="token function">getIcon</span><span class="token punctuation">(</span>icon<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div></li> <li><p>æœ‰äº†é…ç½®ä¿¡æ¯ï¼Œå°±æ˜¯å»åˆ›å»ºå¯¹åº”çš„å®ä¾‹æ–¹æ³•ä»¥ä¾¿ç›´æ¥å¯¼å‡ºä½¿ç”¨</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">createConfirm</span><span class="token punctuation">(</span>options<span class="token operator">:</span> ModalOptionsEx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> iconType <span class="token operator">=</span> options<span class="token punctuation">.</span>iconType <span class="token operator">||</span> <span class="token string">&quot;warning&quot;</span><span class="token punctuation">;</span>
  Reflect<span class="token punctuation">.</span><span class="token function">deleteProperty</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> <span class="token string">&quot;iconType&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> opt<span class="token operator">:</span> ModalFuncProps <span class="token operator">=</span> <span class="token punctuation">{</span>
    centered<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    icon<span class="token operator">:</span> <span class="token function">getIcon</span><span class="token punctuation">(</span>iconType<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>options<span class="token punctuation">,</span>
    content<span class="token operator">:</span> <span class="token function">renderContent</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> Modal<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span>opt<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">createSuccessModal</span><span class="token punctuation">(</span>options<span class="token operator">:</span> ModalOptionsPartial<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Modal<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token function">createModalOptions</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">createErrorModal</span><span class="token punctuation">(</span>options<span class="token operator">:</span> ModalOptionsPartial<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Modal<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token function">createModalOptions</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> <span class="token string">&quot;close&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">createInfoModal</span><span class="token punctuation">(</span>options<span class="token operator">:</span> ModalOptionsPartial<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Modal<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token function">createModalOptions</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> <span class="token string">&quot;info&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">createWarningModal</span><span class="token punctuation">(</span>options<span class="token operator">:</span> ModalOptionsPartial<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Modal<span class="token punctuation">.</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token function">createModalOptions</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> <span class="token string">&quot;warning&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div></li></ul></li></ul> <h4 id="useeventlistener"><a href="#useeventlistener" class="header-anchor">#</a> useEventListener</h4> <blockquote><p>addEventListenerã€removeEventListener åº”ç”¨</p></blockquote> <p>å¸¸ç”¨çš„å°±æ˜¯åœ¨ <code>window</code> çª—å£å‘ç”Ÿå˜åŒ–çš„æ—¶å€™æ›´æ–° <code>info</code>ä»è€Œåœ¨é¡µé¢æ ¹æ®è¿™äº›ä¿¡æ¯è¿›è¡Œè‡ªé€‚åº”</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">UseEventParams</span> <span class="token punctuation">{</span>
  el<span class="token operator">:</span> Element <span class="token operator">|</span> Window <span class="token operator">|</span> <span class="token builtin">any</span><span class="token punctuation">;</span> <span class="token comment">// éœ€è¦ç›‘å¬äº‹ä»¶è§¦å‘çš„DOMå¯¹è±¡</span>
  listener<span class="token operator">:</span> EventListener<span class="token punctuation">;</span> <span class="token comment">// äº‹ä»¶è§¦å‘å›è°ƒå‡½æ•°</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// ç›‘å¬äº‹ä»¶å</span>
  isDebounce<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span> <span class="token comment">// æ˜¯å¦å¯åŠ¨é˜²æŠ–,</span>
  wait<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// é˜²æŠ–æ—¶é—´</span>
  autoRemove<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span> <span class="token comment">// æ˜¯å¦åœ¨DOMå˜åŒ–åè‡ªåŠ¨æ¸…é™¤ä¸Šä¸€ä¸ªå‘¨æœŸç»‘å®šçš„äº‹ä»¶ç›‘å¬å‡½æ•°</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ä¼ªä»£ç </p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">useEventListener</span><span class="token punctuation">(</span>options<span class="token operator">:</span> UseEventParmas<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token function-variable function">removeFn</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// removeå‡½æ•°åˆå§‹åŒ–</span>
    <span class="token function-variable function">remove</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    flag <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token comment">// flag æ ‡è¯†elæ˜¯å¦å·²ç»å¯¹nameè¿›è¡Œç›‘å¬</span>
    <span class="token keyword">if</span> el<span class="token operator">:</span>
        <span class="token comment">// äº‹ä»¶é˜²æŠ–</span>
        isDebounce <span class="token operator">?</span> <span class="token function">useDebounce</span><span class="token punctuation">(</span>listener<span class="token punctuation">,</span> wait<span class="token punctuation">)</span> <span class="token operator">?</span> listener
    	<span class="token comment">// ç»‘å®šäº‹ä»¶ç›‘å¬</span>
    	<span class="token function">watch</span><span class="token punctuation">(</span>ref<span class="token punctuation">,</span> <span class="token punctuation">(</span>v<span class="token punctuation">,</span> _ov<span class="token punctuation">,</span> cleanup<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// watch ç«‹å³æ‰§è¡Œ</span>
          å­˜åœ¨ v<span class="token operator">:</span>
           flag <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token operator">&amp;&amp;</span> addEventListener
          <span class="token function">cleanup</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              removeEventListener
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="useformitem"><a href="#useformitem" class="header-anchor">#</a> useFormItem</h4> <blockquote><p>è¡¨å•æ•°æ®ç»‘å®š</p></blockquote> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token comment">&lt;!-- çˆ¶ç»„ä»¶ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FormItem</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sms<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>enter-x<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CountdownInput</span>
          <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>large<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fix-auto-fill<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name"><span class="token namespace">v-model:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>formData.sms<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">:placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>t('sys.login.smsCode')<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>FormItem</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- è‡ªç»„ä»¶ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-input</span> <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$attrs<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prefixCls<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>size<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>state<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>ä»¥ä¸Šåœºæ™¯éå¸¸å¸¸è§ï¼Œå³åœ¨ <code>FormItem</code> å†…åµŒå¥—ä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶ï¼Œé€šè¿‡ <code>v-model</code>è¿›è¡Œæ•°æ®ç»‘å®šã€‚</p> <p>å¸¸è§çš„è¯­æ³•ä¹Ÿæ˜¯é€šè¿‡ <code>props</code> &amp; <code>emits</code> ç»‘å®š <code>value</code> å’Œ <code>update:value</code> æ¥å®ç°ã€‚</p> <p>è€Œé¡¹ç›®ä¸­ç»™äº†ä¸€ç§æ¯”è¾ƒ <strong>æ–°å¥‡</strong> çš„æ–¹å¼ï¼š</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">useRuleFormItem</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> Recordable<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  props<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span>
  key<span class="token operator">:</span> <span class="token keyword">keyof</span> <span class="token constant">T</span> <span class="token operator">=</span> <span class="token string">&quot;value&quot;</span><span class="token punctuation">,</span>
  changeEvent <span class="token operator">=</span> <span class="token string">&quot;change&quot;</span><span class="token punctuation">,</span>
  emitData<span class="token operator">?</span><span class="token operator">:</span> Ref<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token function">getCurrentInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> emit <span class="token operator">=</span> instance<span class="token operator">?.</span>emit<span class="token punctuation">;</span>

  <span class="token keyword">const</span> innerState <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    value<span class="token operator">:</span> props<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    innerState<span class="token punctuation">.</span>value <span class="token operator">=</span> props<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> state<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> innerState<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">set</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isEqual</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> defaultState<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

      innerState<span class="token punctuation">.</span>value <span class="token operator">=</span> value <span class="token keyword">as</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// ä¿è¯ ant design è¡¨å•çš„ change äº‹ä»¶èƒ½å¤Ÿè§¦å‘ç”¨äºè§„åˆ™æ ¡éªŒ</span>
        emit<span class="token operator">?.</span><span class="token punctuation">(</span>changeEvent<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">(</span><span class="token function">toRaw</span><span class="token punctuation">(</span><span class="token function">unref</span><span class="token punctuation">(</span>emitData<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">[</span>state<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p>å‡¡æ˜¯é€šè¿‡ <code>v-model:value</code> ç»‘å®šçš„å€¼ï¼Œåœ¨è‡ªç»„ä»¶ä¸­ä½¿ç”¨å¦‚ä¸‹ä»£ç å‡å¯å®ŒæˆåŒå‘ç»‘å®š</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-input</span> <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$attrs<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>state<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-input</span><span class="token punctuation">&gt;</span></span>

const [state] = useRuleFormItem(props)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ğŸ” ç†è§£è¿™ä¸ªè¿‡ç¨‹</p> <img src="/markdown/assets/img/image-20230718172452126.874816e0.png" style="display:block;margin:auto;"> <p>å¯ä»¥åœ¨è‡ªç»„ä»¶å†…éƒ¨æ‰“å°ä¸‹ <code>attrs</code>ï¼Œå‡ºç°ä»¥ä¸Šç»“æœï¼›ä½†å®é™…ä¸Šå±æ€§æ˜æ˜¾ä»çˆ¶ç»„ä»¶ç»§æ‰¿ä¸‹å»åªæœ‰ <code>placeholder</code> å’Œ <code>class</code>ï¼Œé‚£å¤šä½™çš„åƒ <code>onBlur</code>ã€<code>onChange</code>ã€<code>onUpdate:value</code> çš„å‡ºç°å°±å¾—æ·±ç©¶ã€‚</p> <ul><li><code>onBlur</code>ã€<code>onChange</code>ã€<code>id</code> éƒ½æ˜¯<code>FormItem</code>é™„åŠ åœ¨ <code>firstChild</code> ä¸Šçš„ï¼Œè¡¨å•æ ¡éªŒæ—¶éœ€åœ¨å­é¡¹å˜åŒ–åæ‰§è¡Œæ ¡éªŒå‡½æ•°ï¼Œå› æ­¤éœ€è¦æ‹“å±•å­é¡¹ <code>onChange</code> æ–¹æ³•æ¥æ‰§è¡Œ <code>onFieldsChange</code></li></ul> <img src="/markdown/assets/img/image-20230718173137215.e0d91714.png" alt="image-20230718173137215" style="zoom:80%;"> <ul><li><code>onUpdate:value</code> æ–¹æ³•åˆ™æ˜¯ <code>v-model</code> ç¼–è¯‘åçš„ä½™é¡¹ã€‚å› æ­¤è¦å®ç°åŒå‘ç»‘å®šï¼Œå°±è¦è§¦å‘ <code>onUpdate:value</code> æ¥æ›´æ–°æ•°æ®</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">onUpdate</span><span class="token operator">:</span> <span class="token function-variable function">value</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>formData<span class="token punctuation">.</span>sms <span class="token operator">=</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ä¸Šé¢ä»£ç çš„æ€è·¯å…¶å®å°±æ˜¯è·³è¿‡è¿™ä¸ªè¿‡ç¨‹ã€‚<strong><code>props</code> æœ¬èº«åœ¨å­ç»„ä»¶æ˜¯ <code>readOnly</code>ï¼Œä½†å®é™…ä¸Šä¹Ÿæ˜¯åœ¨æ›´æ–°çš„</strong>ï¼Œ<code>innerState</code>æ˜¯å¯¹äº <code>props</code> çš„å¼•ç”¨ è€Œç°åœ¨å°† <code>state</code> å®šä¹‰ä¸º æ˜¯ <code>innerState</code> çš„ <code>computed</code> å±æ€§ï¼Œ <code>formData.sms = state</code> === <code>formData.sms = innerState.value</code>ï¼Œ<code>innerState</code> çš„æ›´æ–°å¯¼è‡´äº†ç»„ä»¶çš„é‡æ¸²æŸ“ï¼Œ<strong>é‡æ–°è¯»å–æ¨¡æ¿æ•°æ®</strong>è§¦å‘ <code>state</code> çš„ <code>get</code>æ–¹æ³•ã€‚</p> <h4 id="usecountdown"><a href="#usecountdown" class="header-anchor">#</a> useCountDown</h4> <p>ä¸€ä¸ªç”¨äºå€’è®¡æ—¶çš„ <code>hooks</code></p> <ul><li><code>currentCount</code>ï¼šä¿ç•™ç»™å¤–éƒ¨çš„å€’è®¡æ—¶å½“å‰å€¼</li> <li><code>methods</code>ï¼š<code>start</code>ã€<code>reset</code>ã€<code>stop</code>ã€<code>clear</code> å¯¹äºå€’è®¡æ—¶æœ¬èº«çš„æ“ä½œæ–¹æ³•</li></ul> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useCountdown</span><span class="token punctuation">(</span>count<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> currentCount <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> isStart <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> timerId<span class="token operator">:</span> ReturnType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> setInterval<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    timerId <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span><span class="token function">clearInterval</span><span class="token punctuation">(</span>timerId<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    isStart<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    timerId <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">unref</span><span class="token punctuation">(</span>isStart<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">!</span><span class="token operator">!</span>timerId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    isStart<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    timerId <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// æ¿’ä¸´ç»“æŸ</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">unref</span><span class="token punctuation">(</span>currentCount<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        currentCount<span class="token punctuation">.</span>value <span class="token operator">=</span> count<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        currentCount<span class="token punctuation">.</span>value <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    currentCount<span class="token punctuation">.</span>value <span class="token operator">=</span> count<span class="token punctuation">;</span>
    <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">restart</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// vueuse-core</span>
  <span class="token function">tryOnUnmounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span> start<span class="token punctuation">,</span> reset<span class="token punctuation">,</span> restart<span class="token punctuation">,</span> clear<span class="token punctuation">,</span> stop<span class="token punctuation">,</span> currentCount<span class="token punctuation">,</span> isStart <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><h3 id="vue-router"><a href="#vue-router" class="header-anchor">#</a> vue-router</h3> <blockquote><p>åˆå§‹åŒ–å®ä¾‹</p></blockquote> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  history<span class="token operator">:</span> <span class="token function">createWebHashHistory</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  routes<span class="token operator">:</span> basicRoutes<span class="token punctuation">,</span>
  strict<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// ç¦ç”¨å°¾éƒ¨ /</span>
  <span class="token function-variable function">scrollBehavior</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> left<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> top<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><p><code>history</code> ï¼šé‡‡ç”¨ <code>hash</code> è¿˜æ˜¯ <code>history</code></p></li> <li><p><code>strict</code>ï¼šé€šå¸¸æ¥è¯´ï¼Œ<code>/user</code> å¯ä»¥åŒ¹é…æµè§ˆå™¨è¾“å…¥ <code>/user</code>ã€<code>/user/</code>ï¼Œ<code>strict</code> é…ç½®ä¸º <code>true</code> åˆ™åªå…è®¸ç¬¬ä¸€ç§æƒ…å†µå³æ²¡æœ‰å°¾éƒ¨ <code>/</code> çš„æƒ…å†µåŒ¹é…æˆåŠŸ</p></li> <li><p><code>scrollBehavior</code>ï¼šè·¯ç”±åˆ‡æ¢å®Œæˆæ»šåŠ¨æ¡çš„ä½ç½®</p></li></ul> <h3 id="vue-i18n"><a href="#vue-i18n" class="header-anchor">#</a> vue-i18n</h3> <blockquote><p>å®ç°ç½‘ç«™å›½é™…åŒ– â€”â€” å¤šè¯­ç§åˆ‡æ¢</p></blockquote> <p>ğŸ”‘ æ•´ä½“æ–‡ä»¶ç›®å½•</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>locales
â”œâ”€helper.ts # utilsï¼ˆåŒ…æ‹¬ setHtmlPageLang ã€setLocalePoolã€genMessageï¼‰
â”œâ”€setupI18n.ts # åˆå§‹åŒ–å®ä¾‹
â”œâ”€useLocale.ts # æä¾›è·å–/æ›´æ–°å½“å‰è¯­è¨€ç¯å¢ƒçš„å‡½æ•°
â”œâ”€lang # èµ„æºåŒ…
|  â”œâ”€en.ts
|  â”œâ”€zh_CN.ts
|  â”œâ”€zh-CN
|  |   â”œâ”€common.ts
|  |   â”œâ”€component.ts
|  |   â”œâ”€layout.ts
|  |   â”œâ”€sys.ts
|  |   â”œâ”€routes
|  |   |   â”œâ”€basic.ts
|  |   |   â”œâ”€dashboard.ts
|  |   |   â””demo.ts
|  â”œâ”€en
|  | â”œâ”€common.ts
|  | â”œâ”€component.ts
|  | â”œâ”€layout.ts
|  | â”œâ”€sys.ts
|  | â”œâ”€routes
|  | |   â”œâ”€basic.ts
|  | |   â”œâ”€dashboard.ts
|  | |   â””demo.ts
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>å¯¹äº <code>i18n</code> æ•´ä¸ªæµç¨‹ï¼Œå…¶å®å¯ä»¥åˆ†ä¸ºï¼š</p> <ul><li>è‡ªå®šä¹‰è¯­ç§èµ„æºåŒ…</li> <li>å°†èµ„æºåŒ…æ•´åˆä¸ºä¸€ä¸ª <code>object</code></li> <li><code>i18n</code> å®ä¾‹åˆ›å»ºï¼ŒåŒ…æ‹¬èµ„æºå’Œé…ç½®åˆå§‹åŒ–</li> <li>æä¾›è·å–å’Œæ›´æ–° <code>locale</code> çš„ hooks <code>useLocale</code></li> <li>æä¾›åœ¨ <code>æ¨¡æ¿</code> å’Œ <code>ts</code> æ–‡ä»¶ä¸­ä½¿ç”¨çš„ <code>tå‡½æ•°</code> hooks <code>useI18n</code></li></ul> <ol><li>å®‰è£…ä¾èµ–</li></ol> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ pmpm <span class="token function">install</span> vue-i18n
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>å®šä¹‰è·å–èµ„æºåŒ…ä»£ç  â€”â€” è¯¥æ­¥éª¤ä¸»è¦æ ¹æ®èµ„æºæ•´åˆç”Ÿæˆè¯­ç§<code>èµ„æºæ˜ å°„</code>ã€‚å…·ä½“åœ¨ <code>zh_CN.ts</code> å†…éƒ¨ï¼ŒåŸºäº <code>vite</code> æä¾›çš„æ¨¡å—å¯¼å…¥æœºåˆ¶ï¼Œé€šè¿‡ <code>genMessage</code> å°†å„ä¸ªæ¨¡å—æ•´åˆæˆå¯¹è±¡ï¼Œæ•´ä¸ª <code>export default</code> å‡ºå»çš„å°±æ˜¯è¯­è¨€ç¯å¢ƒä¸ºä¸­æ–‡çš„æƒ…å†µä¸‹çš„èµ„æºä¿¡æ¯</li></ol> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> genMessage <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../helper&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> antdLocale <span class="token keyword">from</span> <span class="token string">&quot;ant-design-vue/es/locale/zh_CN&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> momentLocale <span class="token keyword">from</span> <span class="token string">&quot;moment/dist/locale/zh-cn&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> modules<span class="token operator">:</span> Recordable <span class="token operator">=</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span><span class="token function">glob</span><span class="token punctuation">(</span><span class="token string">&quot;./zh-CN/**/*.ts&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  eager<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  message<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">genMessage</span><span class="token punctuation">(</span>modules<span class="token punctuation">,</span> <span class="token string">&quot;zh-CN&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    antdLocale<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  momentLocale<span class="token punctuation">,</span>
  momentLocaleName<span class="token operator">:</span> <span class="token string">&quot;zh-cn&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li><code>utils</code> â€”â€” å°†èµ„æºåç§°ä»¥åŠå¯¹åº”çš„å€¼æ•´åˆæˆä¸€ä¸ªå¯¹è±¡
<ul><li>æå–æ–‡ä»¶åä½œä¸º <code>object key</code></li> <li>åŒºåˆ†ä¸€çº§ç›®å½•å’ŒäºŒçº§ç›®å½• <code>routes/sys</code> &amp; <code>common</code></li></ul></li></ul> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">/**
 * @param langs { './zh-CN/common.ts': { default: {} }}
 * @param prefix language name
 * @return { setting: {
 *  login: { loginButton: 'ç™»é™†' }
 * }, header: {} }
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">genMessage</span><span class="token punctuation">(</span>
  langs<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">,</span>
  prefix <span class="token operator">=</span> <span class="token string">&quot;lang&quot;</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> obj<span class="token operator">:</span> Recordable <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>langs<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> langFileModule <span class="token operator">=</span> langs<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token operator">?.</span>default<span class="token punctuation">;</span>
    <span class="token keyword">let</span> filename <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>prefix<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\.\/</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> lastIndex <span class="token operator">=</span> filename<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    filename <span class="token operator">=</span> filename<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> lastIndex<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å»é™¤æ–‡ä»¶åç¼€</span>
    <span class="token keyword">const</span> keyLists <span class="token operator">=</span> filename<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åŸºäºæ–‡ä»¶ç›®å½•æ˜¯ routes/xxx</span>
    <span class="token keyword">const</span> moduleName <span class="token operator">=</span> keyLists<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>moduleName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>keyLists<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> moduleName<span class="token punctuation">,</span> obj<span class="token punctuation">[</span>moduleName<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>moduleName<span class="token punctuation">]</span><span class="token punctuation">,</span> keyLists<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> langFileModule<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> moduleName<span class="token punctuation">,</span> langFileModule <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><ol start="3"><li>æä¾› <code>i18n</code> åˆå§‹åŒ–å‡½æ•°
<ol><li>æ‰§è¡Œèµ„æºåŠ è½½ <code>zh_CN.ts</code></li> <li>è‡ªå®šä¹‰ <code>i18n</code> é€‰é¡¹</li> <li>æš´éœ² <code>setupI18n</code> ç»™ <code>main.ts</code></li></ol></li></ol> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">createI18nOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>I18nOptions<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> localeStore <span class="token operator">=</span> <span class="token function">useLocaleStoreWithout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¯­è¨€ç¯å¢ƒ store</span>
  <span class="token keyword">const</span> locale <span class="token operator">=</span> localeStore<span class="token punctuation">.</span>getLocale<span class="token punctuation">;</span> <span class="token comment">// è·å¾—å½“å‰è¯­è¨€ç¯å¢ƒ</span>
  <span class="token keyword">const</span> defaultLocale <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./lang/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>locale<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.ts</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è·å¾—åŠ è½½èµ„æºåŒ…å‡½æ•°</span>
  <span class="token keyword">const</span> message <span class="token operator">=</span> defaultLocale<span class="token punctuation">.</span>default<span class="token operator">?.</span>message <span class="token operator">??</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">setHtmlPageLang</span><span class="token punctuation">(</span>locale<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// æ ‡è¯†èµ„æºåŒ…å·²ç»è¢«åŠ è½½äº†</span>
  <span class="token function">setLocalePool</span><span class="token punctuation">(</span><span class="token punctuation">(</span>loadLocalePool<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    loadLocalePool<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>locale<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// i18n é…ç½®é€‰é¡¹</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    legacy<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// ä½¿ç”¨ composition api æ¨¡å¼</span>
    locale<span class="token punctuation">,</span>
    fallbackLocale<span class="token operator">:</span> fallback<span class="token punctuation">,</span> <span class="token comment">// å›é€€è¯­è¨€</span>
    availableLocales<span class="token punctuation">,</span>
    messages<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token punctuation">[</span>locale<span class="token punctuation">]</span><span class="token operator">:</span> message<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    silentTranslationWarn<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// ç¦æ­¢æœ¬åœ°åŒ–å¤±è´¥è­¦å‘Š</span>
    missingWarn<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    silentFallbackWarn<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// ä»…åœ¨æ ¹æœ¬æ²¡æœ‰å¯ç”¨çš„è½¬æ¢æ—¶ç”Ÿæˆè­¦å‘Š</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// main.ts ä¸­ç”¨äºåˆå§‹åŒ– i18n</span>
<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">setupI18n</span><span class="token punctuation">(</span>app<span class="token operator">:</span> App<span class="token operator">&lt;</span>Element<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">createI18nOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  i18n <span class="token operator">=</span> <span class="token function">createI18n</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token keyword">as</span> I18n<span class="token punctuation">;</span>
  app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>i18n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><ol start="4"><li><p>æœ‰äº†åˆå§‹åŒ–å‡½æ•°ååˆå§‹çš„èµ„æºæ˜¾ç¤ºå°±æ²¡æœ‰é—®é¢˜äº†ï¼Œä½†æ˜¯ç¼ºå°‘ä¸€ä¸ªç”¨äºæ›´æ–°çš„å‡½æ•° â€”â€” å½“è¯­è¨€ç¯å¢ƒæ›´æ–°çš„æ—¶å€™éœ€è¦è¿›è¡Œä»€ä¹ˆæ“ä½œ</p> <ol><li>æ›´æ–° <code>store locale</code></li> <li>åˆ¤æ–­å½“å‰è¯­è¨€ç¯å¢ƒæƒ…å†µ</li></ol> <img src="/markdown/assets/img/image-20230629105852577.b0d38326.png" alt="image-20230629105852577" style="zoom:67%;"></li> <li><p>æœ€å <code>i18n</code> çš„é…ç½®ã€æ›´æ–°éƒ½è®¾ç½®å¥½äº†ï¼Œå°±æ˜¯å¦‚ä½•åœ¨<code>æ¨¡æ¿</code>æˆ–è€… <code>ts</code> æ–‡ä»¶ä¸­å¼•å…¥çš„é—®é¢˜ã€‚å®é™…å¯ä»¥æŠ½å–æˆä¸€ä¸ª <code>hooks</code></p></li></ol> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">// ç±»å‹å®šä¹‰</span>
<span class="token keyword">type</span> <span class="token class-name">I18nGlobalTranslation</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token punctuation">(</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> locale<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token punctuation">(</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> locale<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> list<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token punctuation">(</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> locale<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> named<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">unknown</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token punctuation">(</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> list<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token punctuation">(</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> named<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">unknown</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">interface</span> <span class="token class-name">I18nGlobalOptions</span> <span class="token keyword">extends</span> <span class="token class-name">Omit<span class="token operator">&lt;</span><span class="token keyword">typeof</span> i18n<span class="token punctuation">.</span>global<span class="token punctuation">,</span> <span class="token string">&quot;t&quot;</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  t<span class="token operator">:</span> I18nGlobalTranslation<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">I18nTranslationRestParameters</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// composition api hooks</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useI18n</span><span class="token punctuation">(</span>namespace<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  t<span class="token operator">:</span> I18nGlobalTranslation<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> normalFn <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">t</span><span class="token operator">:</span> <span class="token punctuation">(</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// return getKey(namespace, key); namespace ä½œç”¨æš‚ä¸æ˜ç¡®</span>
      <span class="token keyword">return</span> key<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>i18n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> normalFn<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> <span class="token punctuation">{</span> t<span class="token punctuation">,</span> <span class="token operator">...</span>methods <span class="token punctuation">}</span> <span class="token operator">=</span> i18n<span class="token punctuation">.</span>global <span class="token keyword">as</span> I18nGlobalOptions<span class="token punctuation">;</span>

  <span class="token keyword">const</span> tFn<span class="token operator">:</span> <span class="token function-variable function">I18nGlobalTranslation</span> <span class="token operator">=</span> <span class="token punctuation">(</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token operator">...</span>arg<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>key<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>key<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>namespace<span class="token punctuation">)</span> <span class="token keyword">return</span> key<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">t</span><span class="token punctuation">(</span><span class="token function">getKey</span><span class="token punctuation">(</span>namespace<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">(</span>arg <span class="token keyword">as</span> I18nTranslationRestParameters<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>methods<span class="token punctuation">,</span>
    t<span class="token operator">:</span> tFn<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// åœ¨ setup å‡½æ•°ä»¥å¤–ä½¿ç”¨</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">t</span> <span class="token operator">=</span> <span class="token punctuation">(</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> key<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><p>åœ¨ç”¨çš„æ—¶å€™å°±å¯ä»¥</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ t(&quot;sys.login.loginButton&quot;) }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> <span class="token punctuation">{</span> t <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useI18n</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>ä¸ºäº†åœ¨ vscode ä¸­æœ‰å¯¹åº”ä¿¡æ¯æç¤ºï¼Œå¾—ä¸‹è½½ä¸€ä¸ª <code>i18 ally</code> æ’ä»¶ï¼Œå¹¶åœ¨é¡¹ç›® <code>settings.json</code> ä¸­é…ç½®</p></blockquote> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;i18n-ally.localesPaths&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/locales/lang&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// æŒ‡å®šèµ„æºæ‰€åœ¨è·¯å¾„</span>
  <span class="token property">&quot;i18n-ally.keystyle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;nested&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;i18n-ally.sortKeys&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;i18n-ally.namespace&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;i18n-ally.pathMatcher&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{locale}/{namespaces}.{ext}&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;i18n-ally.enabledParsers&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;json&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;i18n-ally.sourceLanguage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;en&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;i18n-ally.displayLanguage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zh-CN&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;i18n-ally.enabledFrameworks&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;vue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="pinia"><a href="#pinia" class="header-anchor">#</a> pinia</h3> <blockquote><p>vue ç›®å‰æµè¡Œçš„çŠ¶æ€ç®¡ç†å·¥å…·</p></blockquote> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">const</span> useCounterStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&quot;counter&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  getters<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">double</span><span class="token operator">:</span> <span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>count <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li><code>state</code>ï¼š<code>store</code> ä¸­çš„æ•°æ®</li> <li><code>getter</code>ï¼š<code>store</code> ä¸­çš„è®¡ç®—å±æ€§</li> <li><code>actions</code>ï¼š<code>store</code> ä¸­çš„ <code>method</code></li></ul> <p>ä»¥ä¸Šæ˜¯æœ€ç®€ <code>pinia</code> é…ç½®</p> <p>å½“ç„¶é™¤äº†ä»¥ä¸Š <code>option configuration</code>ï¼Œä¹Ÿæ”¯æŒåœ¨æ„é€ å‡½æ•°å†…ä½¿ç”¨ <code>composition api</code> çš„æ–¹å¼å®šä¹‰æ•°æ®ã€è®¡ç®—å±æ€§å’Œæ–¹æ³•ã€‚</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">const</span> useCounterStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&quot;counter&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    count<span class="token punctuation">.</span>value<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span> count<span class="token punctuation">,</span> increment <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>ğŸ‘¿ è§£æ„å“åº”å¼å±æ€§ <code>storeToRefs</code></p></blockquote> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span>storeToRefs<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span> <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useCounterStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// `name` å’Œ</span>
  <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">doubleCount</span><span class="token template-punctuation string">`</span></span> æ˜¯å“åº”å¼çš„ ref <span class="token comment">// ä¼šè·³è¿‡æ‰€æœ‰çš„ action æˆ–éå“åº”å¼ (ä¸æ˜¯ ref æˆ–</span>
  reactive<span class="token punctuation">)</span> çš„å±æ€§ <span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> doubleCount<span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">storeToRefs</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span> <span class="token comment">// ä½œä¸º</span>
  action çš„ increment å¯ä»¥ç›´æ¥è§£æ„ <span class="token keyword">const</span> <span class="token punctuation">{</span>increment<span class="token punctuation">}</span> <span class="token operator">=</span> store
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>ğŸ‘¿ ä½¿ç”¨ store</p></blockquote> <p>å¦‚æœæ˜¯åœ¨ <code>script setup</code> å†…éƒ¨çš„è¯ï¼Œç›´æ¥å¯¼å…¥å¹¶æ‰§è¡Œå‡½æ•°å³å¯</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span>useCounterStore<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/stores/counter'</span> <span class="token keyword">const</span> store <span class="token operator">=</span>
  <span class="token function">useCounterStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>å¦‚æœä¸èƒ½ä½¿ç”¨ç»„åˆå¼ <code>api</code>åˆ™éœ€è¦ä½¿ç”¨æ˜ å°„è¾…åŠ©å‡½æ•°</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// å…è®¸è®¿é—® this.counterStore å’Œ this.userStore</span>
    <span class="token operator">...</span><span class="token function">mapStores</span><span class="token punctuation">(</span>useCounterStore<span class="token punctuation">,</span> useUserStore<span class="token punctuation">)</span>
    <span class="token comment">// å…è®¸è¯»å– this.count å’Œ this.double</span>
    <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span>useCounterStore<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'count'</span><span class="token punctuation">,</span> <span class="token string">'double'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// å…è®¸è¯»å– this.increment()</span>
    <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span>useCounterStore<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'increment'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="ğŸ”-components"><a href="#ğŸ”-components" class="header-anchor">#</a> ğŸ” components</h2> <p>é¡¹ç›®åœ¨ <code>components</code> å†…éƒ¨å°è£…äº†è‹¥å¹²å…¬å…±ç»„ä»¶ï¼ŒåŒ…æ‹¬ <code>Dropdown</code>ã€<code>Menu</code>â€¦â€¦ï¼Œä»¥ä¸‹ä¸»è¦ä»å°è£…æ€è·¯å»æè¿°</p> <h3 id="dropdown"><a href="#dropdown" class="header-anchor">#</a> dropDown</h3> <blockquote><p>ä¸‹æ‹‰æ¡†</p></blockquote> <p>ä»ä¸‹æ‹‰æ¡†çš„åŸºæœ¬ä½¿ç”¨éœ€æ±‚æ¥è¯´ï¼Œéœ€è¦æä¾›</p> <ul><li>ä¸‹æ‹‰èœå•åˆ—è¡¨æ•°æ®</li> <li>é»˜è®¤èœå•é€‰ä¸­é€‰é¡¹</li> <li>è§¦å‘æ¡ä»¶(å•å‡»ã€åŒå‡»ã€æ‚¬æµ®)</li> <li>è§¦å‘äº‹ä»¶</li></ul> <p>æ›´é«˜çº§çš„è¯å¯ä»¥å¢åŠ ä¸€ä¸ªæ˜¯å¦ç¡®è®¤çš„æ ‡è¯† <code>popConfirm</code> â€”â€” åœ¨è§¦å‘æ¡ä»¶åéœ€è¦ç”¨æˆ·ç¡®è®¤å†è§¦å‘äº‹ä»¶ï¼›è€Œå®é™… <code>confirm</code>ã€<code>cancel</code> çš„é…ç½®åˆ™æ”¾å…¥åˆ° <code>dropMenuList</code> ä¸­ï¼Œå› æ­¤å¯¹ <code>dropMenuList</code> éœ€è¦çº¦å®šç±»å‹</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">DropMenu</span> <span class="token punctuation">{</span>
  text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  confirm<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  cancel<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">DropDownOptions</span> <span class="token punctuation">{</span>
  dropMenuList<span class="token operator">:</span> DropMenu<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  selectedKeys<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  trigger<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// click/doubleclick...</span>
  <span class="token function-variable function">menuEvent</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  popConfirm<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="countdown"><a href="#countdown" class="header-anchor">#</a> countdown</h3> <blockquote><p>è®¡æ•°å™¨(è·å–éªŒè¯ç é˜¶æ®µå€’è®¡æ—¶)</p></blockquote> <p>ä»è®¡æ—¶å™¨æœ¬èº«æ¥è¯´ <code>CountButton</code>ï¼Œéœ€è¦æä¾›</p> <ul><li>å€’è®¡æ—¶åˆå§‹å€¼</li> <li>å€’è®¡æ—¶æ‰§è¡Œå‰éœ€è¦æ‰§è¡Œçš„è¯·æ±‚å‡½æ•°</li></ul> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">CountButtonParams</span> <span class="token punctuation">{</span>
  count<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token function-variable function">beforeFn</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>åŒæ—¶éœ€è¦æä¾› <code>reset</code>ã€<code>start</code>ã€<code>restart</code>ã€<code>stop</code> ç­‰ç­‰ä¸è®¡æ—¶ç›¸å…³æ–¹æ³•</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token punctuation">(</span>reset<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  count <span class="token operator">=</span> defaultValue<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span>start<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span>restart<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span>stop<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">clearInterval</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="ğŸ”-vite"><a href="#ğŸ”-vite" class="header-anchor">#</a> ğŸ” vite</h2> <ul><li>åˆå§‹åŒ– <code>vue-ts</code> é¡¹ç›®</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">pnpm</span> create vite vue-ts-project <span class="token parameter variable">--template</span> vue-ts
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>é›†æˆ <code>typescript</code> ç¯å¢ƒ</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">pnpm</span> <span class="token function">add</span> typescript @typescript-eslint/eslint-plugin @typescript-eslint/parser eslint eslint-plugin-vue <span class="token parameter variable">-D</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>é…ç½® <code>eslintrc</code></p> <h3 id="plugin"><a href="#plugin" class="header-anchor">#</a> plugin</h3> <blockquote><p>æ’ä»¶åˆ—è¡¨ä¸»è¦æ˜¯æ‹“å±•é¡¹ç›®åŠŸèƒ½</p></blockquote> <ul><li><p><code>@vitejs/plugin-vue</code>ï¼šæ”¯æŒ <code>vue</code> é¡¹ç›®</p></li> <li><p><code>@vitejs/plugin-vue-jsx</code>ï¼šæ”¯æŒ <code>vue</code> ä½¿ç”¨ <code>jsx</code> æˆ–è€… <code>tsx</code> è¯­æ³•</p> <p>åœ¨å¼€å‘çš„æ—¶å€™é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œç»è¿‡äº†æ¼«é•¿çš„æ’é”™æœ€ç»ˆæ‰å‘ç°æ˜¯é¡¹ç›®å¹¶ä¸æ”¯æŒä½¿ç”¨ <code>jsx</code> è¯­æ³•</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">SyntaxError</span><span class="token operator">:</span> expected expression<span class="token punctuation">,</span> got <span class="token string">'&lt;'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <h3 id="glob"><a href="#glob" class="header-anchor">#</a> glob</h3> <p><code>glob</code> åœ¨ vite ä¸­ç”¨äºåŠ¨æ€å¯¼å…¥ï¼Œæ„å»ºæ—¶ä¼šåˆ†ç¦»ä¸ºç‹¬ç«‹ chunk</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">const</span> modules <span class="token operator">=</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span><span class="token function">glob</span><span class="token punctuation">(</span><span class="token string">&quot;./dir/*.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// vite ç”Ÿæˆçš„ä»£ç </span>
<span class="token keyword">const</span> modules <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">&quot;./dir/foo.js&quot;</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./dir/foo.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;./dir/bar.js&quot;</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./dir/bar.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">// éå†è®¿é—®æ¨¡å—</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> path <span class="token keyword">in</span> modules<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  modules<span class="token punctuation">[</span>path<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>mod<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> mod<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="ğŸ”-lint"><a href="#ğŸ”-lint" class="header-anchor">#</a> ğŸ” lint</h2> <blockquote><p><code>eslint</code> ã€<code>prettier</code>ã€ <code>husky</code>ã€<code>lint-staged</code>ã€<code>commitlint</code></p></blockquote> <h3 id="eslint"><a href="#eslint" class="header-anchor">#</a> eslint</h3> <p><a href="http://www.huhaowb.com/2022/10/11/vite%E5%88%9B%E5%BB%BAVue3%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AEESLint/" target="_blank" rel="noopener noreferrer">å®è—é…ç½®<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼š è¦†ç›–äº†ç»å¤§éƒ¨åˆ†çš„ <code>eslint</code> ã€<code>prettier</code> é…ç½®ï¼Œéå¸¸å¥½çš„ä¸€ç¯‡æ–‡ç« </p> <ul><li>ä¾èµ–å®‰è£…</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">pnpm</span> <span class="token function">install</span> eslint eslint-plugin-vue @typescript-eslint/eslint-plugin @typescript-eslint/parser prettier eslint-config-prettier eslint-plugin-prettier
<span class="token parameter variable">-D</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><p><code>prettier</code>ï¼šprettier çš„æ ¸å¿ƒä»£ç </p></li> <li><p><code>eslint-config-prettier</code>ï¼šè¿™å°†ç¦ç”¨ ESLint ä¸­çš„æ ¼å¼åŒ–è§„åˆ™ï¼Œè€Œ Prettier å°†è´Ÿè´£å¤„ç†è¿™äº›è§„åˆ™</p></li> <li><p><code>eslint-plugin-prettier</code> ï¼šæŠŠ Prettier æ¨èçš„æ ¼å¼é—®é¢˜çš„é…ç½®ä»¥ ESLint rules çš„æ–¹å¼å†™å…¥ï¼Œç»Ÿä¸€ä»£ç é—®é¢˜çš„æ¥æºã€‚</p></li> <li><p><code>eslint</code>ï¼š ESLint çš„æ ¸å¿ƒä»£ç </p></li> <li><p><code>@typescript-eslint/parser</code> ï¼šSLint çš„è§£æå™¨ï¼Œç”¨äºè§£æ typescriptï¼Œä»è€Œæ£€æŸ¥å’Œè§„èŒƒ Typescript ä»£ç </p></li> <li><p><code>@typescript/eslint/eslint-plugin</code>ï¼šåŒ…å«äº†å„ç±»å®šä¹‰å¥½çš„æ£€æµ‹ Typescript ä»£ç çš„è§„èŒƒ</p></li> <li><p><code>eslint-plugin-vue</code>ï¼šæ”¯æŒå¯¹ vue æ–‡ä»¶æ£€éªŒ <a href="https://eslint.vuejs.org/rules/max-len.html" target="_blank" rel="noopener noreferrer">è§„åˆ™é›†<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><code>vue-eslint-parser</code>ï¼šè¿™ä¸ªè§£æå™¨å…è®¸æˆ‘ä»¬æ£€æµ‹.vue æ–‡ä»¶çš„ <code>&lt;template&gt;</code>ã€‚</p></li> <li><p><code>eslint.js</code></p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// @ts-check</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;eslint-define-config&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">env</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">browser</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">node</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">es6</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token string">&quot;vue-eslint-parser&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token string">&quot;@typescript-eslint/parser&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ecmaVersion</span><span class="token operator">:</span> <span class="token number">2020</span><span class="token punctuation">,</span>
    <span class="token literal-property property">sourceType</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">jsxPragma</span><span class="token operator">:</span> <span class="token string">&quot;React&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ecmaFeatures</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">jsx</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;plugin:vue/vue3-recommended&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;plugin:@typescript-eslint/recommended&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;prettier&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;plugin:prettier/recommended&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;vue/script-setup-uses-vars&quot;</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;@typescript-eslint/ban-ts-ignore&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;@typescript-eslint/explicit-function-return-type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;@typescript-eslint/no-explicit-any&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;@typescript-eslint/no-var-requires&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;@typescript-eslint/no-empty-function&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;vue/custom-event-name-casing&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;no-use-before-define&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;@typescript-eslint/no-use-before-define&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;@typescript-eslint/ban-ts-comment&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;@typescript-eslint/ban-types&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;@typescript-eslint/no-non-null-assertion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;@typescript-eslint/explicit-module-boundary-types&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;@typescript-eslint/no-unused-vars&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">argsIgnorePattern</span><span class="token operator">:</span> <span class="token string">&quot;^_&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">varsIgnorePattern</span><span class="token operator">:</span> <span class="token string">&quot;^_&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;no-unused-vars&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">argsIgnorePattern</span><span class="token operator">:</span> <span class="token string">&quot;^_&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">varsIgnorePattern</span><span class="token operator">:</span> <span class="token string">&quot;^_&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;space-before-function-paren&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span>

    <span class="token string-property property">&quot;vue/attributes-order&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;vue/v-on-event-hyphenation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;vue/multi-word-component-names&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;vue/one-component-per-file&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;vue/html-closing-bracket-newline&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;vue/max-attributes-per-line&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;vue/multiline-html-element-content-newline&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;vue/singleline-html-element-content-newline&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;vue/attribute-hyphenation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;vue/require-default-prop&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 'vue/html-self-closing': [</span>
    <span class="token comment">//   'error',</span>
    <span class="token comment">//   {</span>
    <span class="token comment">//     html: {</span>
    <span class="token comment">//       void: 'always',</span>
    <span class="token comment">//       normal: 'never',</span>
    <span class="token comment">//       component: 'always',</span>
    <span class="token comment">//     },</span>
    <span class="token comment">//     svg: 'always',</span>
    <span class="token comment">//     math: 'always',</span>
    <span class="token comment">//   },</span>
    <span class="token comment">// ],</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br></div></div><ul><li><code>prettier.config.js</code></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">printWidth</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token comment">// å•è¡Œæœ€å¤§é•¿åº¦</span>
  <span class="token literal-property property">semi</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//  å¥å°¾é»˜è®¤æ·»åŠ åˆ†å·</span>
  <span class="token literal-property property">vueIndentScriptAndStyle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// ç¼©è¿›Vueæ–‡ä»¶ä¸­è„šæœ¬å’Œæ ·å¼</span>
  <span class="token literal-property property">singleQuote</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// å­—ç¬¦ä¸²ä½¿ç”¨å•å¼•å·</span>
  <span class="token literal-property property">trailingComma</span><span class="token operator">:</span> <span class="token string">&quot;all&quot;</span><span class="token punctuation">,</span> <span class="token comment">// å°¾é€—å·</span>
  <span class="token literal-property property">proseWrap</span><span class="token operator">:</span> <span class="token string">&quot;never&quot;</span><span class="token punctuation">,</span> <span class="token comment">// å¯¹äº markdown æ–‡ä»¶æ¥è¯´ä¸å¼ºåˆ¶æ¢è¡Œ https://github.com/prettier/prettier/issues/6766</span>
  <span class="token literal-property property">htmlWhitespaceSensitivity</span><span class="token operator">:</span> <span class="token string">&quot;strict&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">endOfLine</span><span class="token operator">:</span> <span class="token string">&quot;auto&quot;</span><span class="token punctuation">,</span> <span class="token comment">// æ¢è¡Œç¬¦è·Ÿéšåƒ</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p><code>eslint</code>ã€<code>prettier</code> ä¸»è¦åœ¨å·¥ä½œåŒºé˜¶æ®µå¯¹æˆ‘ä»¬ç¼–å†™çš„ä»£ç è¿›è¡Œæ ¼å¼é™åˆ¶ï¼Œä½†å®é™…å¹¶ä¸å½±å“ä»£ç æ‰§è¡Œï¼Œä¸€æ—¦ <code>git</code>æäº¤åˆ°è¿œç¨‹ä»“åº“ï¼Œä¼šæ··æ·†ä»“åº“å†…æ–‡ä»¶æ ¼å¼ï¼Œå¯¼è‡´åˆ«äººåœ¨æ‹‰ä»£ç åæŠ¥é”™ï¼ˆå³ä½¿ä¸å½±å“æ‰§è¡Œï¼Œä½†çˆ†çº¢å°±å¾ˆä¸å¥½ï¼‰ã€‚</p></blockquote> <ul><li><code>husky</code>ï¼šç›‘å¬ <code>git</code> å„ä¸ªé’©å­å‘¨æœŸ</li> <li><code>lint-staged</code>ï¼šé’ˆå¯¹æš‚å­˜åŒºçš„å†…å®¹è¿›è¡Œä»£ç æ ¼å¼æ ¡éªŒ</li> <li><code>commitlint</code>ï¼šé’ˆå¯¹ <code>commit msg</code> è¿›è¡Œæ ¼å¼æ ¡éªŒ</li></ul> <h3 id="husky"><a href="#husky" class="header-anchor">#</a> husky</h3> <ul><li>ä¾èµ–å®‰è£…</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">pnpm</span> <span class="token function">install</span> <span class="token parameter variable">-D</span> husky
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>é…ç½® <code>npm install</code> ä¹‹å‰æ‰§è¡Œ <code>husky install</code></li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;prepare&quot;</span><span class="token operator">:</span> <span class="token string">&quot;husky install&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="lint-staged"><a href="#lint-staged" class="header-anchor">#</a> lint-staged</h3> <ul><li>ä¾èµ–å®‰è£…</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">pnpm</span> <span class="token function">install</span> <span class="token parameter variable">-D</span> lint-staged
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>é…ç½®æ–‡ä»¶ <code>lintstagedrc.js</code></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">&quot;*.{js,jsx,ts,tsx}&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;eslint --fix&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;prettier --write&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;{!(package)*.json,*.code-snippets,.!(browserslist)*rc}&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;prettier --write--parser json&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;package.json&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;prettier --write&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;*.vue&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;eslint --fix&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;prettier --write&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;*.md&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;prettier --write&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>é…ç½® <code>script</code> é’©å­æ‰§è¡Œ</li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;lint:lint-staged&quot;</span><span class="token operator">:</span> <span class="token string">&quot;lint-staged -c ./.husky/lintstagedrc.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><code>pre-commit</code> é’©å­æ‰§è¡Œ <code>lint-staged</code></li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ npx husky <span class="token function">add</span> .husky/pre-commit <span class="token string">'npm run lint:lint-staged'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="commitlint"><a href="#commitlint" class="header-anchor">#</a> commitlint</h3> <ul><li>ä¾èµ–å®‰è£…</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">pnpm</span> <span class="token function">install</span> <span class="token parameter variable">-D</span> @commitlint/cli @commitlint/config-conventional
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><code>commit-msg</code> é’©å­æ‰§è¡Œ <code>lint-staged</code></li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ npx husky <span class="token function">add</span> .husky/commit-msg <span class="token string">&quot;npx --no -- commitlint --edit <span class="token variable">$1</span>&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div> <footer class="page-edit page-editor"><div class="edit-link"><a href="https://github.com/jzyismylover/ubuntu-markdown/edit/docs/source/vben/vben.md" target="_blank" rel="noopener noreferrer">å®Œå–„é¡µé¢</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">æœ€è¿‘æ›´æ–°:</span> <span class="time">3/17/2024, 9:24:20 AM</span></div></footer> <!----></div> <div class="toc-container-sidebar"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="max-height:86vh"><div style="font-weight:bold;"></div> <hr> <div class="toc-box"><ul class="toc-sidebar-links"><li><a href="/markdown/vben/#ğŸ”-vue3" class="toc-sidebar-link">ğŸ” vue3</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/markdown/vben/#api" class="toc-sidebar-link">api</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/markdown/vben/#injectionkey" class="toc-sidebar-link">InjectionKey</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/markdown/vben/#unwrapref" class="toc-sidebar-link">UnwrapRef</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/markdown/vben/#unref" class="toc-sidebar-link">unref</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/markdown/vben/#torefs" class="toc-sidebar-link">toRefs</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/vben/#hooks" class="toc-sidebar-link">hooks</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/markdown/vben/#usemessage" class="toc-sidebar-link">useMessage</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/markdown/vben/#useeventlistener" class="toc-sidebar-link">useEventListener</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/markdown/vben/#useformitem" class="toc-sidebar-link">useFormItem</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/markdown/vben/#usecountdown" class="toc-sidebar-link">useCountDown</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/vben/#vue-router" class="toc-sidebar-link">vue-router</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/vben/#vue-i18n" class="toc-sidebar-link">vue-i18n</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/vben/#pinia" class="toc-sidebar-link">pinia</a></li></ul></li><li><a href="/markdown/vben/#ğŸ”-components" class="toc-sidebar-link">ğŸ” components</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/markdown/vben/#dropdown" class="toc-sidebar-link">dropDown</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/vben/#countdown" class="toc-sidebar-link">countdown</a></li></ul></li><li><a href="/markdown/vben/#ğŸ”-vite" class="toc-sidebar-link">ğŸ” vite</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/markdown/vben/#plugin" class="toc-sidebar-link">plugin</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/vben/#glob" class="toc-sidebar-link">glob</a></li></ul></li><li><a href="/markdown/vben/#ğŸ”-lint" class="toc-sidebar-link">ğŸ” lint</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/markdown/vben/#eslint" class="toc-sidebar-link">eslint</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/vben/#husky" class="toc-sidebar-link">husky</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/vben/#lint-staged" class="toc-sidebar-link">lint-staged</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/vben/#commitlint" class="toc-sidebar-link">commitlint</a></li></ul></li></ul></div></div></div></div></div>  <div></div></main> <aside class="page-sidebar"> <div class="page-side-toolbar"></div>  </aside></div><div class="global-ui"><!----></div></div>
    <script src="/markdown/assets/js/app.085aa012.js" defer></script><script src="/markdown/assets/js/2.773263cd.js" defer></script><script src="/markdown/assets/js/33.5a2693b9.js" defer></script>
  </body>
</html>
