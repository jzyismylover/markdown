å­¦ä¹ èµ„æº

- [The Tao of Rust](https://github.com/ZhangHanDong/tao-of-rust-codes/blob/master/tao_of_rust_english.md)
- [Translation of the official The Rust Programming Language book](https://github.com/KaiserY/rust-book-chinese)
- [Translation of the Rust By Example](https://github.com/rust-lang-cn/rust-by-example-cn)
- [RustPrimer](https://github.com/rustcc/RustPrimer)
- [Chinese Rust Community](https://github.com/RustChina/rust-china.org)
- [The book in Traditional Chinese](http://askeing.github.io/rust-book/)
- [Translation of The Little Book of Rust Macros](https://github.com/DaseinPhaos/tlborm-chinese)
- [The Rust Course](https://github.com/sunface/rust-course)



## å®‰è£…

> ä»¥ä¸‹ä¸ºåœ¨ linuxã€macos å®‰è£… rust é€šç”¨çš„æ–¹æ³• â€”â€” rustup(ä¸€ä¸ªç®¡ç† Rust ç‰ˆæœ¬å’Œç›¸å…³å·¥å…·çš„å‘½ä»¤è¡Œå·¥å…·ã€‚)

```bash
$ sudo curl --proto '=https' --tlsv1.2 https://sh.rustup.rs -sSf | sh
```

ğŸ” å®é™…æ‰§è¡Œåä¼šç»è¿‡ä¸€ç³»åˆ—çš„é€‰é¡¹æ“ä½œå¹¶æœ€ååœ¨ `.bashrc` é‡Œé¢åˆ›å»º `. "$HOME/.cargo/env"`ï¼ˆæš´éœ²åœ¨ç¯å¢ƒå˜é‡ï¼‰ã€‚å¦‚æœä½¿ç”¨çš„ä¸æ˜¯ `bash` ä½œä¸ºé»˜è®¤ç»ˆç«¯çš„è¯å¯ä»¥å°†å½“å‰é…ç½®å¤åˆ¶åˆ°å¯¹åº”ç»ˆç«¯çš„é…ç½®ç¯å¢ƒä¸­ï¼Œæ¯”å¦‚ `.zshrc`

```bash
$ rustc -V # æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ
rustc 1.70.0 (90c541806 2023-05-31)
```

:warning: é™¤æ­¤ä¹‹å¤–è¿˜éœ€è¦å®‰è£…ä¸€ä¸ªé“¾æ¥å™¨( `rustc` ä¾èµ– gccã€glibc )ï¼Œåœ¨ ubuntu ä¸­å¯ä»¥é€šè¿‡å®‰è£… `build-essential`ï¼Œå®‰è£…çš„è¿‡ç¨‹ä¼šé™„å¸¦å®‰è£… `G++, dpkg-dev, GCC and make....`

```bash
$ sudo apt update
$ sudo apt install build-essential
```

- æŸ¥çœ‹æœ¬åœ°æ–‡æ¡£

```bash
$ rustup doc
```

> `cargo` å¯å¸®åŠ©å¿«é€Ÿåˆå§‹åŒ– `rust` é¡¹ç›®ï¼Œæœ‰åˆ«äºå°†æ„å»ºç»“æœæ”¾åœ¨ä¸æºç ç›¸åŒçš„ç›®å½•ï¼ŒCargo ä¼šå°†å…¶æ”¾åˆ° `targetâˆ•debug` ç›®å½•

- cargo new åˆ›å»ºé¡¹ç›®ã€‚
- cargo build æ„å»ºé¡¹ç›®ã€‚
- cargo run ä¸€æ­¥æ„å»ºå¹¶è¿è¡Œé¡¹ç›®ã€‚
- cargo check åœ¨ä¸ç”ŸæˆäºŒè¿›åˆ¶æ–‡ä»¶çš„æƒ…å†µä¸‹æ„å»ºé¡¹ç›®æ¥æ£€æŸ¥é”™è¯¯



ğŸ” å®Œæˆä»¥ä¸Šç¯å¢ƒçš„å®‰è£…åï¼Œå°±è¦é…ç½® IDE (vscode)  ç¼–ç¨‹ç¯å¢ƒäº†ï¼Œä¸»è¦æ˜¯å®‰è£…ç›¸å…³æ’ä»¶

- `rust-analyzer`ï¼šrust ä»£ç è¡¥å…¨ä»¥åŠæ ¼å¼åŒ–
- `even better toml`ï¼šæ”¯æŒ `.toml` æ–‡ä»¶å®Œæ•´ç‰¹æ€§



ğŸ” `rustrc`ã€`rustup`ã€`cargo` æ¦‚å¿µåŒºåˆ†

- `rustrc`ï¼šç¼–è¯‘å™¨ï¼Œç¼–è¯‘é¡¹ç›®ä»£ç 
- `rustup`ï¼šå·¥å…·é“¾ç®¡ç†ï¼Œç”¨äºå®‰è£… `rustrc` ç‰ˆæœ¬ä»¥åŠå¸¸ç”¨ç»„ä»¶
- `cargo`ï¼šåŒ…ç®¡ç†å·¥å…·



## ç¼–è¯‘è¿‡ç¨‹

![](/home/jzy/Documents/markdown/rust/rust.assets/rust-complie-process.png)



## å¸¸è§ç¼–ç¨‹æ¦‚å¿µ

> rust å˜é‡å®šä¹‰ã€åŸºç¡€è¯­æ³•ï¼ŒåŒ…æ‹¬æ•°æ®ç»“æ„.....

### å˜é‡

- å®šä¹‰ä¸€ä¸ªä¸å¯å˜å˜é‡ï¼ˆä¸èƒ½äºŒæ¬¡èµ‹å€¼ï¼‰

```rust
let x = 5
```

- å®šä¹‰å¯å˜å˜é‡

```rust
let mut x = 5
```

> ğŸ” å­˜åœ¨ä¸€ä¸ªéšè—å˜é‡çš„æ¦‚å¿µ â€”â€” å¯åŒæ—¶ä½¿ç”¨ `let` å£°æ˜åŒåå˜é‡ï¼Œåé¢çš„è¦†ç›–å‰é¢çš„å£°æ˜ã€‚å½“å‰å˜é‡ä»ç„¶ä¸å¯äºŒæ¬¡ä¿®æ”¹ã€‚

`éšè—å˜é‡` æ¦‚å¿µå’Œ `mut` çš„åŒºåˆ«

- å‰è€…æ¯æ¬¡éƒ½è¦åŠ ä¸Š `let` å®šä¹‰
- å‰è€…å®šä¹‰åŒåå˜é‡æ—¶ç±»å‹å¯ä¸ä¸€è‡´ï¼ˆå®é™…ä¸Šæ˜¯åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å˜é‡ï¼‰

### å¸¸é‡

>  å¸¸é‡ä¸å˜é‡çš„åŒºåˆ«

- ä¸å…è®¸å¯¹å¸¸é‡ä½¿ç”¨ `mut`
- å£°æ˜å¸¸é‡ä½¿ç”¨ `const` å…³é”®å­—
- å¿…é¡»æ³¨æ˜å€¼çš„ç±»å‹
- åªèƒ½è¢«è®¾ç½®ä¸ºå¸¸é‡è¡¨è¾¾å¼ï¼Œè€Œä¸å¯ä»¥æ˜¯å…¶ä»–ä»»ä½•åªèƒ½åœ¨ `è¿è¡Œæ—¶è®¡ç®—å‡ºçš„å€¼`

```rust 
const THREE_HOUR_IN_SECONDS: u32 = 60 * 60 * 3
```

ğŸ” Rust å¯¹å¸¸é‡çš„å‘½åçº¦å®šæ˜¯åœ¨å•è¯ä¹‹é—´ä½¿ç”¨å…¨`å¤§å†™åŠ ä¸‹åˆ’çº¿` 



### æ•°æ®ç±»å‹

`rust` æ˜¯ **é™æ€ç±»å‹** è¯­è¨€ï¼Œåœ¨ç¼–è¯‘æ—¶å°±éœ€è¦çŸ¥é“æ‰€æœ‰å˜é‡çš„ç±»å‹



#### æ ‡é‡

`æ ‡é‡ç±»å‹`ä»£è¡¨ä¸€ä¸ªå•ç‹¬çš„å€¼ï¼ŒRust æœ‰å››ç§åŸºæœ¬çš„æ ‡é‡ç±»å‹ï¼šæ•´å‹ã€æµ®ç‚¹å‹ã€å¸ƒå°”ç±»å‹å’Œå­—ç¬¦ç±»å‹

##### æ•´å‹

> ä¸€ä¸ªæ²¡æœ‰å°æ•°éƒ¨åˆ†çš„æ•°å­—

ğŸ” è¡¨æ ¼ï¼šrust ä¸­çš„æ•´å‹ç±»å‹

| é•¿åº¦    | æœ‰ç¬¦å·  | æ— ç¬¦å·  |
| ------- | ------- | ------- |
| 8-bit   | `i8`    | `u8`    |
| 16-bit  | `i16`   | `u16`   |
| 32-bit  | `i32`   | `u32`   |
| 64-bit  | `i64`   | `u64`   |
| 128-bit | `i128`  | `u128`  |
| arch    | `isize` | `usize` |

å¯¹åº” `bitä½` çš„å˜ä½“éƒ½å¯ä»¥è®¾ç½®ä¸ºæœ‰ç¬¦å·å’Œæ— ç¬¦å·ã€‚

- å¯¹äº `æœ‰ç¬¦å·`å˜ä½“æ¥è¯´ï¼Œå­˜å‚¨èŒƒå›´ 

$$
-(2^{n-1}) åˆ° 2^{n - 1} - 1
$$

- å¯¹äº `æ— ç¬¦å·` å˜ä½“æ¥è¯´ï¼Œå­˜å‚¨èŒƒå›´

$$
0 åˆ° 2^{n} - 1
$$

- `isize` & `usize` ç±»å‹ä¾èµ–è¿è¡Œç¨‹åºçš„è®¡ç®—æ¶æ„ï¼š64ä½ æ¶æ„ä¸Šæ—¶ 64ä½ï¼Œ32ä½æ¶æ„ä¸Šä¸º 32 ä½
- rust æ•°å­—ç±»å‹é»˜è®¤æ˜¯ `i32`



ğŸ” è¡¨æ ¼ï¼šrust ä¸­çš„æ•´å‹å­—é¢å€¼

| æ•°å­—å­—é¢å€¼                    | ä¾‹å­          |
| ----------------------------- | ------------- |
| Decimal (åè¿›åˆ¶)              | `98_222`      |
| Hex (åå…­è¿›åˆ¶)                | `0xff`        |
| Octal (å…«è¿›åˆ¶)                | `0o77`        |
| Binary (äºŒè¿›åˆ¶)               | `0b1111_0000` |
| Byte (å•å­—èŠ‚å­—ç¬¦)(ä»…é™äº`u8`) | `b'A'`        |

- `98_222` ç­‰ä»·äº `98222` ï¼Œ`_` ä½œä¸ºåˆ†éš”ç¬¦å·æ–¹ä¾¿è¯»æ•°

##### æµ®ç‚¹å‹

> rust æµ®ç‚¹åˆ†ä¸º å•ç²¾åº¦æµ®ç‚¹(`f32`) å’Œ åŒç²¾åº¦æµ®ç‚¹ (`f64`)

```rust
fn main() {
    let x = 2.0; // f64(é»˜è®¤)
    let y: f32 = 3.0; // f32
}
```

##### å¸ƒå°”ç±»å‹

> rust å¸ƒå°”ç±»å‹æœ‰ä¸¤ä¸ªå¯èƒ½çš„å€¼ `true` & `false`

```rust
fn main() {
    let t = true;
    let f:bool = false;
}
```

##### å­—ç¬¦ç±»å‹

> rust å­—ç¬¦ç±»å‹è¢«å®šä¹‰ä¸º `char`ï¼Œä»£è¡¨åŸç”Ÿå­—æ¯ç±»å‹

ğŸ” éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨`å•å¼•å·`å£°æ˜ `char` å­—é¢é‡ï¼›ä½¿ç”¨ `åŒå¼•å·`å£°æ˜å­—ç¬¦ä¸²çš„å­—é¢é‡



#### å¤åˆ

å¤åˆç±»å‹å°†å¤šä¸ªå€¼ç»„åˆæˆä¸€ä¸ªç±»å‹ï¼ŒåŒ…æ‹¬ `tuple` å’Œ `array`

##### å…ƒç»„

- é•¿åº¦ä¸å¯å˜

- å®šä¹‰ & è®¿é—®

  ```rust
  fn main() {
    let tup:(i32, f64, bool, char) = (10, 0.5, true, 'a');
    println!(
      "tup.0:{}, tup.1:{}, tup.2:{}, tup.3:{}",
      tup.0, tup.1, tup.2, tup.3
    )
  }
  ```

- è§£æ„å–å€¼

  ```rust
  fn main() {
    let tup:(i32, f64, bool, char) = (10, 0.5, true, 'a');
    let (x, y, q, z) = tup;
  }
  ```

##### æ•°ç»„

åŒºåˆ«äº `å…ƒç»„`ï¼Œæ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ ç±»å‹å¿…é¡»ç›¸åŒï¼›ä¸”åœ¨ `rust` ä¸­ï¼Œæ•°ç»„çš„é•¿åº¦æ˜¯å›ºå®šçš„

- åˆå§‹åŒ–æ•°ç»„

  ```rust
  let array: [i32; 5] = [1, 2, 3, 4, 5]; // æ•°ç»„é•¿åº¦ä¸º5,ä¸”æ‰€æœ‰å€¼ç±»å‹å‡ä¸ºi32
  let array = [3; 5] // æ•°ç»„é•¿åº¦ä¸º5,ä¸”æ‰€æœ‰å€¼å‡ä¸º3
  ```

- é€šè¿‡ `array[index]` çš„å½¢å¼è®¿é—®å€¼



#### å‡½æ•°

å‡½æ•°å®šä¹‰ä¸ `js` ç›¸å·®ä¸å¤šï¼ŒåŒæ ·æ˜¯ `()` åŒ…è£¹å‚æ•°ã€`{}` åŒ…è£¹å‡½æ•°ä½“ï¼Œä½†ä»¥ä¸‹å‡ ç‚¹éœ€è¦æ³¨æ„

- å‡½æ•°å‘½åâ€”â€” å…¨éƒ¨é‡‡ç”¨å°å†™ï¼Œå­˜åœ¨å¤šå•è¯æ—¶ä½¿ç”¨` _` åˆ†éš”

- å‡½æ•°å‚æ•°å…¨éƒ¨éœ€è¦æ³¨æ˜ç±»å‹

- å‡½æ•°è¿”å›åŸºäºè¡¨è¾¾å¼ï¼Œè¡¨è¾¾å¼ä¸éœ€è¦åœ¨æœ«å°¾åŠ ä¸Š `;`

  ```rust
  fn main() {
      let x = plus_one(5);
      println!("The value of x is: {x}");
  }
  
  fn plus_one(x: i32) -> i32 {
      x + 1; // æŠ¥é”™ï¼›å› ä¸ºè¿™æ˜¯ä¸€ä¸ªè¯­å¥ï¼Œè¯­å¥å¹¶æ²¡æœ‰è¿”å›å€¼
      x + 1 // æ­£ç¡®ï¼›ä»£è¡¨è¿™æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè¡¨è¾¾å¼è¿”å›è®¡ç®—å€¼
  }
  ```



#### å¾ªç¯

> `rust` ä¸­æœ‰ä¸‰ç§å¾ªç¯ï¼š`loop`ã€`while`ã€`for`ï¼Œç›¸å¯¹æ¥è¯´æ¯”è¾ƒå¸¸ç”¨çš„æ—¶åä¸¤è€…

##### loop

- å¯ä»¥é€šè¿‡ `break` è¿”å›å¾ªç¯å€¼

- å¯å®šä¹‰æ ‡ç­¾ï¼Œåœ¨å¤šå±‚ `loop` å¾ªç¯åµŒå¥—æƒ…æ™¯ä¸‹ç»ˆæ­¢å¯¹åº”æ ‡ç­¾å¾ªç¯

  ```rust
  fn for_loop() {
      let mut count = 0;
      'counting_up: loop {
          let mut remaining = 10;
  		// åµŒå¥— loop
          loop {
              if remaining == 9 {
                  break;
              }
              if count == 2 {
                  break 'counting_up;
              }
              remaining -= 1;
          }
  
          count += 1;
      }
  }
  ```

##### while

ä¸ `js ` ç›¸å·®ä¸å¤š

##### for

è¿™é‡Œçš„ `for ` æŒ‡çš„æ˜¯ `for...in` å¾ªç¯ï¼Œä¹Ÿæ˜¯ä½¿ç”¨é¢‘ç‡æœ€é«˜ä¸”ä¸å®¹æ˜“å‡ºé”™çš„å¾ªç¯
