(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{383:function(s,t,a){s.exports=a.p+"assets/img/image-20230630173828177.08c24b6e.png"},452:function(s,t,a){"use strict";a.r(t);var n=a(4),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"🔐-storage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🔐-storage"}},[s._v("#")]),s._v(" 🔐 storage")]),s._v(" "),t("blockquote",[t("p",[s._v("项目中浏览器 "),t("code",[s._v("storage")]),s._v(" 的设置，理解如下：")])]),s._v(" "),t("div",{staticClass:"language-text line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("cache\n├─index.ts # 导出创建 storage 方法\n├─memeory.ts # 内存 cache\n├─persistent.ts # 导出实际更新存储的方法\n└storageCache.ts # 浏览器 storage\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("img",{staticStyle:{display:"block",margin:"auto"},attrs:{src:a(383)}}),s._v(" "),t("p",[s._v("🔐 存储加密")]),s._v(" "),t("p",[s._v("项目中亮点之处就是使用 "),t("code",[s._v("AES加密算法")]),s._v(" 对存储的内容进行加密。可配置传入")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("key - 密钥\niv - 初始向量\nmode - 加密模式\npadding - 偏移\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("总体 "),t("code",[s._v("storage")]),s._v(" 包含 "),t("code",[s._v("get")]),s._v("、"),t("code",[s._v("set")]),s._v("、"),t("code",[s._v("remove")]),s._v("、"),t("code",[s._v("clear")]),s._v(" 方法")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("get")]),s._v("：获取缓存内容，如果内容过期则删除")]),s._v(" "),t("li",[t("code",[s._v("set")]),s._v("：设置缓存内容，设定缓存的设定时间 "),t("code",[s._v("time")]),s._v(" 以及可持续时间 "),t("code",[s._v("expire")])]),s._v(" "),t("li",[t("code",[s._v("remove")]),s._v("：根据 "),t("code",[s._v("key")]),s._v(" 值删除缓存中的内容")]),s._v(" "),t("li",[t("code",[s._v("clear")]),s._v("：清除缓存的所有内容")])]),s._v(" "),t("p",[t("code",[s._v("localStorage")]),s._v(" 的存储形式（同时也是需要进行"),t("code",[s._v("加密存储")]),s._v(" 的数据）")]),s._v(" "),t("div",{staticClass:"language-ts line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 枚举类型 —— 浏览器缓存 key = VUE_VBEN_ADMIN__DEVELOPMENT__2.8.0__COMMON__LOCAL__KEY__ 的 value键集合")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BasicStore")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("TOKEN_KEY")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("number")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("undefined")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// token")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("USER_INFO_KEY")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" UserInfo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 用户信息")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ROLES_KEY")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 用户角色")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LOCK_INFO_KEY")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" LockInfo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 🔓")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PROJ_CFG_KEY")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" ProjectConfig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 项目配置")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MULTIPLE_TABS_KEY")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" RouteLocationNormalized"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// tabs")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"value"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"TOKEN__"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("Object"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("..."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"ROLES__KEY__"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("Object"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("..."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"USER__INFO__"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("Object"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("..."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"PROJ__CFG__KEY__"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("Object"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("..."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"time"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1688351157733")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"expire"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1688955957733")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("创建 "),t("code",[s._v("storage")]),s._v(" 可配置传入的参数")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      prefixKey"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" string; # 存储 key 前缀\n      storage"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Storage; # 使用哪种浏览器存储模式\n      hasEncrypt"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" boolean; # 当前内容是否已经加密\n      timeout?"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Nullable<number>; # 内存缓存的持续时间\n      key"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" string; # 加密密钥\n      iv"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" string # 初始加密向量\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("🔐 内存存储")]),s._v(" "),t("p",[s._v("除了将内容存储在浏览器 "),t("code",[s._v("storage")]),s._v(" 中，项目还定义了 "),t("code",[s._v("Memory class")]),s._v("。"),t("code",[s._v("Memory class")]),s._v(" 主要是将内容存储在内存中，实际上每次更新都是在该对象上进行更新。在更新的过程中提供一个选项 —— 是否覆盖浏览器缓存。这样的好处在用户修改对应配置的时候无法恢复的情况（相当于拷贝了一份副本进行更新）。")]),s._v(" "),t("div",{staticClass:"language-ts line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 每个 Memory Cache 的值都有如下结构")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Cache"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("V")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("any")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 存储值")]),s._v("\n  value"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("V")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 过期回调函数 id")]),s._v("\n  timeoutId"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" ReturnType"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typeof")]),s._v(" setTimeout"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 到期时间")]),s._v("\n  time"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("number")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 持续时间")]),s._v("\n  alive"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("number")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("一些注意事项")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("需要考虑 "),t("code",[s._v("timeoutId")]),s._v("定时器的清除")]),s._v(" "),t("ul",[t("li",[t("p",[t("code",[s._v("set")]),s._v("：重新设置值需要 "),t("code",[s._v("clearTimeout")]),s._v(" 并重新定义 "),t("code",[s._v("setTimeout")])])]),s._v(" "),t("li",[t("p",[t("code",[s._v("remove")]),s._v("：删除 "),t("code",[s._v("key")]),s._v(" 及其对应的定时器")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("reset")]),s._v("：删除过期 "),t("code",[s._v("key")]),s._v(" 及其对应定时器")])])])]),s._v(" "),t("li",[t("p",[t("code",[s._v("get")]),s._v(" 函数返回的是 "),t("code",[s._v("Cache<T>")]),s._v(" | "),t("code",[s._v("undefined")]),s._v("，因此凡是在使用的时候都需要判断返回值是否为 "),t("code",[s._v("undefined")])])])]),s._v(" "),t("h2",{attrs:{id:"🔐-axios"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🔐-axios"}},[s._v("#")]),s._v(" 🔐 axios")]),s._v(" "),t("div",{staticClass:"language-text line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("http\n├─Axios.ts # 初始化实例\n├─axiosCancel.ts # 配置 axios 取消请求\n├─axiosTransform.ts # 定义 axios transform 接口\n├─checkStatus.ts # 定义错误 code 检查机制并创建对应的消息提示实例\n├─helper.ts # 日期转换 util\n└index.ts # 实例 axios(配置拦截器)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("上面都是对文件比较抽象的描述，整体流程定义我觉得可以分为：")]),s._v(" "),t("ul",[t("li",[s._v("定义 "),t("code",[s._v("axios cancler")]),s._v(" & "),t("code",[s._v("axios transform")])]),s._v(" "),t("li",[s._v("初始化 "),t("code",[s._v("axios 实例")]),s._v("，注册相关拦截器及配置选项")]),s._v(" "),t("li",[s._v("引入并导出 "),t("code",[s._v("axios")]),s._v(" 实例")])]),s._v(" "),t("blockquote",[t("p",[s._v("由于代码量过大不再一一详细描述各个文件的具体实现，抽出其中比较重要的几点进行理解")])]),s._v(" "),t("p",[s._v("🔐 "),t("code",[s._v("axios cancler")])]),s._v(" "),t("p",[s._v("实现 "),t("code",[s._v("axios")]),s._v(" 取消重复请求其实有两种")]),s._v(" "),t("ol",[t("li",[s._v("新请求覆盖旧 "),t("code",[s._v("pending")]),s._v(" 请求(项目中)")]),s._v(" "),t("li",[s._v("忽略新相同请求直到队列中相同"),t("code",[s._v("pending")]),s._v(" 请求清空")])]),s._v(" "),t("p",[s._v("第一种单纯只是前端不接受该请求结果，请求依然被发送到后端，适合输入框类型；")]),s._v(" "),t("p",[s._v("第二种则是正常的一个请求过滤行为，适合对于密集型任务去重减轻后台压力；")]),s._v(" "),t("p",[s._v("🔐 "),t("code",[s._v("axios transform")])]),s._v(" "),t("p",[s._v("定义在 "),t("code",[s._v("axios")]),s._v(" 请求响应不同阶段的接口，包括：")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("beforeRequestHook")]),s._v("：请求之前处理 config —— url、参数、时间格式化")]),s._v(" "),t("li",[t("code",[s._v("transformRequestHook")]),s._v(" ：处理响应结果")]),s._v(" "),t("li",[t("code",[s._v("requestInterceptors")]),s._v("："),t("code",[s._v("token")]),s._v(" 添加、重复请求判断")]),s._v(" "),t("li",[t("code",[s._v("responseInterceptors")]),s._v("：响应拦截 —— 从 pending 中删除当前请求")]),s._v(" "),t("li",[t("code",[s._v("responseInterceptorsCatch")]),s._v("：响应后错误处理")]),s._v(" "),t("li",[t("code",[s._v("requestInterceptorsCatch")]),s._v("：请求前错误处理")])]),s._v(" "),t("p",[s._v("🔐 "),t("code",[s._v("axios requestOptions")])]),s._v(" "),t("p",[s._v("自定义 "),t("code",[s._v("axios")]),s._v(" 请求响应过程中可配置参数。实际在使用的时候可以通过传入 "),t("code",[s._v("{ requestOptions: opt }")]),s._v(" 进行覆盖来改变默认行为")]),s._v(" "),t("div",{staticClass:"language-ts line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestOptions")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// post请求的时候是否添加参数到url")]),s._v("\n  joinParamsToUrl"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("boolean")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 格式化提交参数时间")]),s._v("\n  formatDate"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("boolean")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 是否需要对返回数据进行处理")]),s._v("\n  isTransformResponse"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("boolean")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 是否返回原生响应头 比如：需要获取响应头时使用该属性")]),s._v("\n  isReturnNativeResponse"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("boolean")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 是否将prefix 添加到url")]),s._v("\n  joinPrefix"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("boolean")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 接口地址")]),s._v("\n  apiUrl"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 请求拼接路径")]),s._v("\n  urlPrefix"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 错误提示类型")]),s._v("\n  errorMessageMode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" ErrorMessageMode"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//  是否加入时间戳(解决get请求缓存)")]),s._v("\n  joinTime"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("boolean")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 是否忽略重复请求限制")]),s._v("\n  ignoreCancelToken"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("boolean")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 请求是否需要携带 token 验证")]),s._v("\n  withToken"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("boolean")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br")])]),t("p",[s._v("🔐 "),t("code",[s._v("encodeURLComponent")]),s._v(" & "),t("code",[s._v("decodeURLComponent")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("encodeURLComponent")]),s._v("：通过特定字符转义特殊字符，返回被编码后的新字符窜")]),s._v(" "),t("li",[t("code",[s._v("decodeURLComponent")]),s._v("：解码 "),t("code",[s._v("encodeURLComponent")]),s._v(" 编码字符返回原字符串")])]),s._v(" "),t("h2",{attrs:{id:"🔐-moment"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🔐-moment"}},[s._v("#")]),s._v(" 🔐 moment")]),s._v(" "),t("blockquote",[t("p",[s._v("为 JS 提供更多日期创建以及格式化的日期库，但是从官网目前状态来看，作者已经不再建议使用该库 —— 该库已经停止维护，对于一些问题也不再进行修复了，因此现在其替代品更多是 "),t("code",[s._v("day.js")]),s._v(" ，但项目中使用了那就简单记录下其 api 语法")])]),s._v(" "),t("ol",[t("li",[s._v("创建日期")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("语法 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("moment")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("string"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language-text line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("2013-02-08  # A calendar date part\n2013-02     # A month date part\n2013-W06-5  # A week date part\n2013-039    # An ordinal date part\n\n20130208    # Basic (short) full date\n201303      # Basic (short) year+month\n2013        # Basic (short) year only\n2013W065    # Basic (short) week, weekday\n2013W06     # Basic (short) week only\n2013050     # Basic (short) ordinal date (year + day-of-year)\n2013-02-08T09            # An hour time part separated by a T\n2013-02-08 09            # An hour time part separated by a space\n2013-02-08 09:30         # An hour and minute time part\n2013-02-08 09:30:26      # An hour, minute, and second time part\n2013-02-08 09:30:26.123  # An hour, minute, second, and millisecond time part\n2013-02-08 24:00:00.000  # hour 24, minute, second, millisecond equal 0 means next day at midnight\n\n20130208T080910,123      # Short date and time up to ms, separated by comma\n20130208T080910.123      # Short date and time up to ms\n20130208T080910          # Short date and time up to seconds\n20130208T0809            # Short date and time up to minutes\n20130208T08              # Short date and time, hours only\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("格式化日期")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("语法 moment"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("format")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("string"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("a",{attrs:{href:"http://momentjs.cn/docs/#/displaying/format/",target:"_blank",rel:"noopener noreferrer"}},[s._v("具体 string 可定义列表"),t("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=e.exports}}]);