<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JS åŸºç¡€ | Mr.Jiang-æŠ€æœ¯åšå®¢</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="">
    <script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?2675818a983a3131404cee835018f016";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
      </script>
    <meta name="description" content="å­¦ä¹ &amp;å·¥ä½œ-æŠ€æœ¯ç§¯ç´¯">
    
    <link rel="preload" href="/markdown/assets/css/0.styles.5474aed4.css" as="style"><link rel="preload" href="/markdown/assets/js/app.085aa012.js" as="script"><link rel="preload" href="/markdown/assets/js/2.773263cd.js" as="script"><link rel="preload" href="/markdown/assets/js/57.af66ff8f.js" as="script"><link rel="prefetch" href="/markdown/assets/js/1.50bc9635.js"><link rel="prefetch" href="/markdown/assets/js/10.121e7e8f.js"><link rel="prefetch" href="/markdown/assets/js/11.5205ffab.js"><link rel="prefetch" href="/markdown/assets/js/12.fef29d74.js"><link rel="prefetch" href="/markdown/assets/js/13.b581db50.js"><link rel="prefetch" href="/markdown/assets/js/14.07202c28.js"><link rel="prefetch" href="/markdown/assets/js/15.9aedb95a.js"><link rel="prefetch" href="/markdown/assets/js/16.dd97e264.js"><link rel="prefetch" href="/markdown/assets/js/17.8eb943fb.js"><link rel="prefetch" href="/markdown/assets/js/18.942cde78.js"><link rel="prefetch" href="/markdown/assets/js/19.44710683.js"><link rel="prefetch" href="/markdown/assets/js/20.22d46747.js"><link rel="prefetch" href="/markdown/assets/js/21.aa8b4011.js"><link rel="prefetch" href="/markdown/assets/js/22.b40024cc.js"><link rel="prefetch" href="/markdown/assets/js/23.ace5d346.js"><link rel="prefetch" href="/markdown/assets/js/24.2405d60a.js"><link rel="prefetch" href="/markdown/assets/js/25.c08a85e2.js"><link rel="prefetch" href="/markdown/assets/js/26.c4c5f267.js"><link rel="prefetch" href="/markdown/assets/js/27.b91e5849.js"><link rel="prefetch" href="/markdown/assets/js/28.b80c3633.js"><link rel="prefetch" href="/markdown/assets/js/29.594ec447.js"><link rel="prefetch" href="/markdown/assets/js/3.9d4223ad.js"><link rel="prefetch" href="/markdown/assets/js/30.324e278d.js"><link rel="prefetch" href="/markdown/assets/js/31.43dc2191.js"><link rel="prefetch" href="/markdown/assets/js/32.3fb01abd.js"><link rel="prefetch" href="/markdown/assets/js/33.5a2693b9.js"><link rel="prefetch" href="/markdown/assets/js/34.637d4661.js"><link rel="prefetch" href="/markdown/assets/js/35.eccfebaa.js"><link rel="prefetch" href="/markdown/assets/js/36.c13df5f5.js"><link rel="prefetch" href="/markdown/assets/js/37.9890e89c.js"><link rel="prefetch" href="/markdown/assets/js/38.b33827f2.js"><link rel="prefetch" href="/markdown/assets/js/39.3a1ace37.js"><link rel="prefetch" href="/markdown/assets/js/4.27d6f5b1.js"><link rel="prefetch" href="/markdown/assets/js/40.4396d4c2.js"><link rel="prefetch" href="/markdown/assets/js/41.afe775e0.js"><link rel="prefetch" href="/markdown/assets/js/42.19b2951c.js"><link rel="prefetch" href="/markdown/assets/js/43.7c3256ea.js"><link rel="prefetch" href="/markdown/assets/js/44.7da308e4.js"><link rel="prefetch" href="/markdown/assets/js/45.89b2fd21.js"><link rel="prefetch" href="/markdown/assets/js/46.e817e45d.js"><link rel="prefetch" href="/markdown/assets/js/47.c56ee626.js"><link rel="prefetch" href="/markdown/assets/js/48.59541039.js"><link rel="prefetch" href="/markdown/assets/js/49.bc7ad96a.js"><link rel="prefetch" href="/markdown/assets/js/5.2637f2cc.js"><link rel="prefetch" href="/markdown/assets/js/50.9d0dc446.js"><link rel="prefetch" href="/markdown/assets/js/51.4d949834.js"><link rel="prefetch" href="/markdown/assets/js/52.90aa4f80.js"><link rel="prefetch" href="/markdown/assets/js/53.67b77129.js"><link rel="prefetch" href="/markdown/assets/js/54.3535db37.js"><link rel="prefetch" href="/markdown/assets/js/55.9efbe9e5.js"><link rel="prefetch" href="/markdown/assets/js/56.e8aa37ba.js"><link rel="prefetch" href="/markdown/assets/js/58.0415674f.js"><link rel="prefetch" href="/markdown/assets/js/59.b09373ca.js"><link rel="prefetch" href="/markdown/assets/js/6.61bacfb8.js"><link rel="prefetch" href="/markdown/assets/js/60.d07cb515.js"><link rel="prefetch" href="/markdown/assets/js/61.ec2b2da7.js"><link rel="prefetch" href="/markdown/assets/js/62.44a5a0b8.js"><link rel="prefetch" href="/markdown/assets/js/63.09e39adc.js"><link rel="prefetch" href="/markdown/assets/js/64.b9ee085d.js"><link rel="prefetch" href="/markdown/assets/js/65.026450b0.js"><link rel="prefetch" href="/markdown/assets/js/66.a3571972.js"><link rel="prefetch" href="/markdown/assets/js/67.5a8616c4.js"><link rel="prefetch" href="/markdown/assets/js/68.6fdda787.js"><link rel="prefetch" href="/markdown/assets/js/69.691ff5d7.js"><link rel="prefetch" href="/markdown/assets/js/7.32a4bd87.js"><link rel="prefetch" href="/markdown/assets/js/70.b401009e.js"><link rel="prefetch" href="/markdown/assets/js/71.6b3bcefe.js"><link rel="prefetch" href="/markdown/assets/js/72.dcd8145e.js"><link rel="prefetch" href="/markdown/assets/js/73.cc81c046.js"><link rel="prefetch" href="/markdown/assets/js/74.856f40f0.js"><link rel="prefetch" href="/markdown/assets/js/75.746590de.js"><link rel="prefetch" href="/markdown/assets/js/76.8ddba5b5.js"><link rel="prefetch" href="/markdown/assets/js/77.16644476.js"><link rel="prefetch" href="/markdown/assets/js/78.e89fc885.js"><link rel="prefetch" href="/markdown/assets/js/79.1193b665.js"><link rel="prefetch" href="/markdown/assets/js/80.9475cd89.js"><link rel="prefetch" href="/markdown/assets/js/81.8d99d275.js"><link rel="prefetch" href="/markdown/assets/js/82.80eb3e2f.js"><link rel="prefetch" href="/markdown/assets/js/83.fe14141e.js"><link rel="prefetch" href="/markdown/assets/js/84.9647a2db.js"><link rel="prefetch" href="/markdown/assets/js/85.c7258f01.js"><link rel="prefetch" href="/markdown/assets/js/86.1a5782f4.js"><link rel="prefetch" href="/markdown/assets/js/87.e7354607.js"><link rel="prefetch" href="/markdown/assets/js/vendors~docsearch.54f2532f.js">
    <link rel="stylesheet" href="/markdown/assets/css/0.styles.5474aed4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/markdown/" class="home-link router-link-active"><img src="/markdown/logo.png" alt="Mr.Jiang-æŠ€æœ¯åšå®¢" class="logo"> <span class="site-name can-hide">Mr.Jiang-æŠ€æœ¯åšå®¢</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/jzyismylover/ubuntu-markdown" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/jzyismylover/ubuntu-markdown" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/markdown/fronted/" class="sidebar-link">å‰ç«¯çŸ¥è¯†æ¦‚è¿°</a></li><li><a href="/markdown/git/" class="sidebar-link">ç‰ˆæœ¬æ§åˆ¶</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Javascript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/markdown/array/" class="sidebar-link">æ•°ç»„</a></li><li><a href="/markdown/es6/" class="sidebar-link">ES6</a></li><li><a href="/markdown/javascript/" aria-current="page" class="active sidebar-link">JS åŸºç¡€</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/markdown/javascript/#js-ä½œç”¨åŸŸ" class="sidebar-link">ğŸ˜‰ JS ä½œç”¨åŸŸ</a></li><li class="sidebar-sub-header"><a href="/markdown/javascript/#ä»£ç†" class="sidebar-link">ğŸ˜‰ ä»£ç†</a></li><li class="sidebar-sub-header"><a href="/markdown/javascript/#object-å¯¹è±¡" class="sidebar-link">ğŸ’› Object å¯¹è±¡</a></li><li class="sidebar-sub-header"><a href="/markdown/javascript/#localstorage-å®‰å…¨åˆ†æ" class="sidebar-link">ğŸ‘¹ LocalStorage å®‰å…¨åˆ†æ</a></li><li class="sidebar-sub-header"><a href="/markdown/javascript/#web-å¸¸è§æ”»å‡»" class="sidebar-link">ğŸ˜‰ web å¸¸è§æ”»å‡»</a></li><li class="sidebar-sub-header"><a href="/markdown/javascript/#bigint" class="sidebar-link">ğŸ†— BigInt</a></li><li class="sidebar-sub-header"><a href="/markdown/javascript/#ç±»å‹è½¬æ¢" class="sidebar-link">â­ï¸ ç±»å‹è½¬æ¢</a></li><li class="sidebar-sub-header"><a href="/markdown/javascript/#å‡½æ•°" class="sidebar-link">ğŸ˜— å‡½æ•°</a></li><li class="sidebar-sub-header"><a href="/markdown/javascript/#é—­åŒ…" class="sidebar-link">ğŸ˜† é—­åŒ…</a></li><li class="sidebar-sub-header"><a href="/markdown/javascript/#this" class="sidebar-link">ğŸ“„ this</a></li><li class="sidebar-sub-header"><a href="/markdown/javascript/#å†…å­˜ç®¡ç†" class="sidebar-link">â“ å†…å­˜ç®¡ç†</a></li><li class="sidebar-sub-header"><a href="/markdown/javascript/#äº‹ä»¶å¾ªç¯" class="sidebar-link">âœ´ï¸ äº‹ä»¶å¾ªç¯</a></li><li class="sidebar-sub-header"><a href="/markdown/javascript/#ç”Ÿæˆå™¨-åç¨‹" class="sidebar-link">â—ï¸ ç”Ÿæˆå™¨ &amp; åç¨‹</a></li><li class="sidebar-sub-header"><a href="/markdown/javascript/#åŸå‹é“¾" class="sidebar-link">â­ï¸ åŸå‹é“¾</a></li><li class="sidebar-sub-header"><a href="/markdown/javascript/#js-å¸¸è§é—®é¢˜" class="sidebar-link">â„¹ï¸ JS å¸¸è§é—®é¢˜</a></li><li class="sidebar-sub-header"><a href="/markdown/javascript/#å‰ç«¯æ€§èƒ½ä¼˜åŒ–" class="sidebar-link">ğŸ™… å‰ç«¯æ€§èƒ½ä¼˜åŒ–</a></li><li class="sidebar-sub-header"><a href="/markdown/javascript/#js-ä½è¿ç®—" class="sidebar-link">â“ JS ä½è¿ç®—</a></li><li class="sidebar-sub-header"><a href="/markdown/javascript/#symbol" class="sidebar-link">â“‚ï¸ Symbol</a></li><li class="sidebar-sub-header"><a href="/markdown/javascript/#json-stringify" class="sidebar-link">â­•ï¸ JSON.stringify</a></li><li class="sidebar-sub-header"><a href="/markdown/javascript/#web-worker" class="sidebar-link">ğŸŒŸ Web Worker</a></li><li class="sidebar-sub-header"><a href="/markdown/javascript/#è·¨åŸŸ" class="sidebar-link">ğŸ’ƒ è·¨åŸŸ</a></li><li class="sidebar-sub-header"><a href="/markdown/javascript/#js-å¯é€‰é“¾" class="sidebar-link">ğŸ”‘ JS å¯é€‰é“¾ ?</a></li><li class="sidebar-sub-header"><a href="/markdown/javascript/#ç©ºå€¼åˆå¹¶æ“ä½œç¬¦" class="sidebar-link">ğŸ˜‰ ç©ºå€¼åˆå¹¶æ“ä½œç¬¦ ??</a></li><li class="sidebar-sub-header"><a href="/markdown/javascript/#æ‰‹å†™é¢˜ç›®" class="sidebar-link">æ‰‹å†™é¢˜ç›®</a></li><li class="sidebar-sub-header"><a href="/markdown/javascript/#æ’åºç®—æ³•" class="sidebar-link">æ’åºç®—æ³•</a></li><li class="sidebar-sub-header"><a href="/markdown/javascript/#vue-åŸç†å®ç°" class="sidebar-link">Vue åŸç†å®ç°</a></li></ul></li></ul></section></li><li><a href="/markdown/typescript/" class="sidebar-link">Typescript</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Electron</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>å‰ç«¯ç›‘æ§</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="content"><div class="content-wrapper" style="width:100%"><div class="theme-default-content custom-content content__default"><h1 id="js-åŸºç¡€"><a href="#js-åŸºç¡€" class="header-anchor">#</a> JS åŸºç¡€</h1> <blockquote><p>ä¸»è¦ <a href="/markdown/fronted/javascript/">readme.md</a> æ˜¯å¤ä¹ é˜¶æ®µå¤ä¹ åˆ°çš„ä¸€äº›çŸ¥è¯†ï¼Œç›¸æ¯”äºçº¢å®ä¹¦çš„çŸ¥è¯†ç‚¹å¯èƒ½åªæ˜¯ä¹ç‰›ä¸€æ¯›äº†ï¼Œæ‰€ä»¥æœ‰ç©ºè¿˜æ˜¯å¤šçœ‹çœ‹ä¹¦</p></blockquote> <p>[TOC]</p> <h2 id="js-ä½œç”¨åŸŸ"><a href="#js-ä½œç”¨åŸŸ" class="header-anchor">#</a> ğŸ˜‰ JS ä½œç”¨åŸŸ</h2> <p>ä½œç”¨åŸŸæ˜¯ä¸€ä¸ªå…³é”®çš„æ¦‚å¿µï¼Œå®šä¹‰äº†å˜é‡æœç´¢çš„è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å½“å‰å‡½æ•°ä½¿ç”¨åˆ°äº†æŸä¸ªå˜é‡ï¼Œå®ƒå¯ä»¥ä»å“ªé‡Œæ¥çš„è¿™ä¹ˆä¸€ä¸ªæ„æ€ã€‚ä½œç”¨åŸŸå…¶å®æœ‰ä¸¤ç§ï¼Œé™æ€ä½œç”¨åŸŸ å’Œ åŠ¨æ€ä½œç”¨åŸŸã€‚</p> <p><strong>å…³é”®ï¼šå‡½æ•°çš„ä½œç”¨åŸŸåœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™å°±å†³å®šäº†</strong></p> <p><a href="https://zhuanlan.zhihu.com/p/65565830" target="_blank" rel="noopener noreferrer">å­¦ä¹ é“¾æ¥<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> &amp; <a href="https://github.com/mqyqingfeng/Blog/blob/master/articles/%E6%B7%B1%E5%85%A5%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/JavaScript%E6%B7%B1%E5%85%A5%E4%B9%8B%E8%AF%8D%E6%B3%95%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%92%8C%E5%8A%A8%E6%80%81%E4%BD%9C%E7%94%A8%E5%9F%9F.md" target="_blank" rel="noopener noreferrer">å†´ç¾½<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="é™æ€ä½œç”¨åŸŸ"><a href="#é™æ€ä½œç”¨åŸŸ" class="header-anchor">#</a> é™æ€ä½œç”¨åŸŸ</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">testing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="åŠ¨æ€ä½œç”¨åŸŸ"><a href="#åŠ¨æ€ä½œç”¨åŸŸ" class="header-anchor">#</a> åŠ¨æ€ä½œç”¨åŸŸ</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">testing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ğŸ”‘ ä¸¤è€…ä¸»è¦çš„åŒºåˆ«æ˜¯å‡½æ•°çš„ä½œç”¨åŸŸæ˜¯åœ¨å®šä¹‰æ—¶ç¡®å®šè¿˜æ˜¯åœ¨è¿è¡Œæ—¶ç¡®å®šï¼Œé™æ€ä½œç”¨åŸŸæ˜¯åœ¨å®šä¹‰æ—¶å°±ç¡®å®šäº†ï¼ŒåŠ¨æ€ä½œç”¨åŸŸæ˜¯åœ¨è°ƒç”¨çš„æ—¶å€™å†ç¡®å®šã€‚å› ä¸ºå¯¹äºç¬¬ä¸€æ®µä»£ç ï¼Œa çš„æœç´¢è¿‡ç¨‹å°±æ˜¯ä» fn -&gt; å…¨å±€ï¼›å¯¹äºç¬¬äºŒæ®µä»£ç ï¼Œa æœç´¢çš„è¿‡ç¨‹å°±æ˜¯ä» fn -&gt; testing -&gt; å…¨å±€ï¼Œä¸¤ç§æ˜¯å®Œå…¨ä¸ä¸€æ ·çš„è¿‡ç¨‹ã€‚</p> <h2 id="ä»£ç†"><a href="#ä»£ç†" class="header-anchor">#</a> ğŸ˜‰ ä»£ç†</h2> <ol><li>ä»£ç†ç©ºå¯¹è±¡</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;target&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>åˆ›å»ºå¤„ç†çš„ä»£ç†å™¨ proxy ç›¸å½“äºæ˜¯åŸå¯¹è±¡çš„ä¸€ä¸ªå¼•ç”¨</p> <ol start="2"><li>æ•è·å™¨å‚æ•°</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;target&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">/*
     trapTarget - æŒ‡å‘åŸå¯¹è±¡ target çš„å¼•ç”¨
     property - è®¿é—®çš„å±æ€§å
     receiver - æŒ‡å‘ proxy ä»£ç†çš„å¼•ç”¨
     */</span>
  <span class="token function">get</span><span class="token punctuation">(</span>trapTarget<span class="token punctuation">,</span> property<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ol start="3"><li>åå°„ API</li></ol> <ul><li>Reflect ä½œä¸ºä¸€ä¸ªå¯¹è±¡å°è£…äº†åŸå§‹è¡Œä¸ºï¼Œä¸æ•è·å™¨å…·æœ‰ç›¸åŒçš„åç§°å’Œå‡½æ•°ç­¾å</li> <li>Reflect çš„ <a href="https://es6.ruanyifeng.com/#docs/reflect" target="_blank" rel="noopener noreferrer">è®¾è®¡ç›®æ ‡<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li>å°† Object å¯¹è±¡çš„ä¸€äº›æ˜æ˜¾å±äºè¯­è¨€å†…éƒ¨çš„æ–¹æ³•æ”¾åˆ° Reflect å¯¹è±¡ä¸Š</li> <li>ä¿®æ”¹æŸäº› object æ–¹æ³•è¿”å›çš„ç»“æœ</li> <li>è®© object çš„æ“ä½œå˜æˆå‡½æ•°è¡Œä¸º</li> <li>Reflect å’Œ proxy å…·æœ‰ç›¸åŒçš„å‡½æ•°ç­¾å</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'target'</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span>
    get <span class="token operator">=</span> Reflect<span class="token punctuation">.</span>get
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="4"><li><p>JS å¯¹è±¡çš„å››ä¸ªç‰¹å¾</p> <ul><li><p>enumerable - æ˜¯å¦å¯ä»¥è¢« for...in éå† - æ³¨æ„ for...in ä¼šè¿”å›åŸå‹å’Œå¯¹è±¡ä¸Šå¯æšä¸¾çš„å±æ€§</p></li> <li><p>configurable - æ˜¯å¦å¯è¢«é…ç½® - ä¸å½±å“ enumerable</p></li> <li><p>value - å½“å‰å±æ€§çš„å€¼</p></li> <li><p>writable - æ˜¯å¦å¯ä»¥è¢«ä¿®æ”¹</p></li></ul></li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">configurable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token literal-property property">writable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&quot;bar&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// get ä¸ value ä¸èƒ½åŒæ—¶å­˜åœ¨</span>
<span class="token comment">// set å’Œ writable ä¸èƒ½åŒæ—¶å­˜åœ¨</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ğŸ”‘ è§£é‡Šä¸‹ configurable æ˜¯ä»€ä¹ˆæ„æ€</p> <ul><li>é”å®šå±æ€§æè¿°ç¬¦</li> <li>å±æ€§ä¸å¯åˆ é™¤</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// é”å®šå±æ€§æè¿°ç¬¦</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;jzyismylover&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">configurable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token literal-property property">writable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ä¸€æ—¦åˆå§‹çš„æè¿° configurable è®¾ç½®ä¸º falseï¼Œé‚£ä¹ˆè¿™ä¸ªé…åˆå°±ä¼šæŠ¥é”™</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
       <span class="token operator">^</span>

<span class="token literal-property property">TypeError</span><span class="token operator">:</span> Cannot redefine property<span class="token operator">:</span> <span class="token function">name</span><span class="token punctuation">(</span>å±æ€§ä¸å¯å†é…ç½®çš„æ„æ€<span class="token punctuation">)</span>
    at Function<span class="token punctuation">.</span><span class="token function">defineProperty</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>anonymous<span class="token operator">&gt;</span><span class="token punctuation">)</span>
    at Object<span class="token punctuation">.</span><span class="token operator">&lt;</span>anonymous<span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token constant">F</span><span class="token operator">:</span>\å¼€å‘æ–‡ä»¶\javascript\js\æ—¥å¸¸å­¦ä¹ \errorHandler<span class="token punctuation">.</span>js<span class="token operator">:</span><span class="token number">24</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">)</span>
    at Module<span class="token punctuation">.</span><span class="token function">_compile</span> <span class="token punctuation">(</span>node<span class="token operator">:</span>internal<span class="token operator">/</span>modules<span class="token operator">/</span>cjs<span class="token operator">/</span>loader<span class="token operator">:</span><span class="token number">1101</span><span class="token operator">:</span><span class="token number">14</span><span class="token punctuation">)</span>
    at Object<span class="token punctuation">.</span>Module<span class="token punctuation">.</span>_extensions<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token function">js</span> <span class="token punctuation">(</span>node<span class="token operator">:</span>internal<span class="token operator">/</span>modules<span class="token operator">/</span>cjs<span class="token operator">/</span>loader<span class="token operator">:</span><span class="token number">1153</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">)</span>
    at Module<span class="token punctuation">.</span><span class="token function">load</span> <span class="token punctuation">(</span>node<span class="token operator">:</span>internal<span class="token operator">/</span>modules<span class="token operator">/</span>cjs<span class="token operator">/</span>loader<span class="token operator">:</span><span class="token number">981</span><span class="token operator">:</span><span class="token number">32</span><span class="token punctuation">)</span>
    at Function<span class="token punctuation">.</span>Module<span class="token punctuation">.</span><span class="token function">_load</span> <span class="token punctuation">(</span>node<span class="token operator">:</span>internal<span class="token operator">/</span>modules<span class="token operator">/</span>cjs<span class="token operator">/</span>loader<span class="token operator">:</span><span class="token number">822</span><span class="token operator">:</span><span class="token number">12</span><span class="token punctuation">)</span>
    at Function<span class="token punctuation">.</span>executeUserEntryPoint <span class="token punctuation">[</span><span class="token keyword">as</span> runMain<span class="token punctuation">]</span> <span class="token punctuation">(</span>node<span class="token operator">:</span>internal<span class="token operator">/</span>modules<span class="token operator">/</span>run_main<span class="token operator">:</span><span class="token number">81</span><span class="token operator">:</span><span class="token number">12</span><span class="token punctuation">)</span>
    at node<span class="token operator">:</span>internal<span class="token operator">/</span>main<span class="token operator">/</span>run_main_module<span class="token operator">:</span><span class="token number">17</span><span class="token operator">:</span><span class="token number">47</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ol start="5"><li>ä»£ç†æ’¤é”€</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> proxy<span class="token punctuation">,</span> revoke <span class="token punctuation">}</span> <span class="token operator">=</span> Proxy<span class="token punctuation">.</span><span class="token function">revocable</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">revoke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å–æ¶ˆå½“å‰çš„ä»£ç†</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>å¸¸è§çš„ä»£ç†é…ç½®</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Jake&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// è®¿é—®å‡½æ•°æ—¶æœº</span>
  <span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> property<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// è®¾ç½®å…ƒç´ æ—¶æœº</span>
  <span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> property<span class="token punctuation">,</span> value<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// å‡½æ•°å±æ€§æ˜¯å¦å­˜åœ¨åˆ¤æ–­æ—¶æœº</span>
  <span class="token function">has</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> property</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// å‡½æ•°è°ƒç”¨æ—¶æœº</span>
  <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> thisArg<span class="token punctuation">,</span> <span class="token operator">...</span>argumentsList</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// thisArg æŒ‡çš„æ˜¯è°ƒç”¨å‡½æ•°æ—¶çš„ this å‚æ•°</span>
    <span class="token keyword">return</span> <span class="token function">Reflect</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// new æ“ä½œç¬¦æ—¶æœº</span>
  <span class="token function">construct</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> argumentList<span class="token punctuation">,</span> newTarget</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// argumentList - ä¼ ç»™ç›®æ ‡æ„é€ å‡½æ•°çš„å‚æ•°åˆ—è¡¨</span>
    <span class="token comment">// newTarget æœ€åˆè¢«è°ƒç”¨çš„æ„é€ å‡½æ•°</span>
    <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">construct</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// åˆ é™¤å±æ€§æ—¶æœº</span>
  <span class="token function">deleteProperty</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">deleteProperty</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><blockquote><p><em>éœ€è¦æ³¨æ„</em>ï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯åŸºäº proxy å®ä¾‹å»æ“ä½œç„¶åå†æ˜ å°„ä¼šåŸå¯¹è±¡ä¸Šçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åŸºäºä»£ç†å™¨åšå¾ˆå¤šè§„åˆ™çš„éªŒè¯ï¼Œæ¯”å¦‚æ»¡è¶³ä»€ä¹ˆæ¡ä»¶ä»¥åæ‰å¯ä»¥ä¿®æ”¹å¯¹åº”çš„å€¼ï¼Œæˆ–è€…éšè—åŸå¯¹è±¡ä¸Šçš„æŸäº›å±æ€§ã€‚</p></blockquote> <ol><li>å±æ€§éªŒè¯</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">onlyNumbersGoHere</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> property<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// éªŒè¯åªæœ‰å½“èµ‹å€¼çš„ç±»å‹ä¸º number çš„æ—¶å€™æ‰å¯ä»¥å®Œæˆèµ‹å€¼</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> value <span class="token operator">!==</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ol start="2"><li>æ•°æ®ç»‘å®šä¸å¯è§‚å¯Ÿå¯¹è±¡</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getMedian</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> nums<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span>length <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> thisArg<span class="token punctuation">,</span> <span class="token operator">...</span>argumentsList</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> argumentsList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> item <span class="token operator">!==</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token string">&quot;TypeError&quot;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token function">Reflect</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ol start="3"><li>æ•°æ®ç»‘å®šä¸å¯è§‚å¯Ÿå¯¹è±¡</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> userList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">emit</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>userList<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// push æ—¶è§¦å‘çš„æ˜¯userList[0] = 'xxx' å’Œ userList.length=xxx</span>
  <span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> property<span class="token punctuation">,</span> value<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">emit</span><span class="token punctuation">(</span>Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> property<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

proxy<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="object-å¯¹è±¡"><a href="#object-å¯¹è±¡" class="header-anchor">#</a> ğŸ’› <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/assign" target="_blank" rel="noopener noreferrer">Object å¯¹è±¡<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <h3 id="object-assign"><a href="#object-assign" class="header-anchor">#</a> Object.assign</h3> <ul><li>è¯­æ³•æ ¼å¼ï¼šObject.assign(target, ...sources)<br>
ç”¨äºå°†æ‰€æœ‰å¯æšä¸¾å±æ€§çš„å€¼ä»ä¸€ä¸ªæˆ–å¤šä¸ªæºå¯¹è±¡åˆ†é…åˆ°ç›®æ ‡å¯¹è±¡ï¼Œå¹¶è¿”å›ç›®æ ‡å¯¹è±¡(æµ…æ‹·è´)--æ”¹å˜ç›®æ ‡å¯¹è±¡</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">&quot;hello world&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token string">&quot;hello world&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>obj1<span class="token punctuation">,</span> obj2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  {a:&quot;hello world&quot;,b:&quot;hello world&quot;}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  {a:&quot;hello world&quot;,b:&quot;hello world&quot;}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { b: 'hello world' }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> o2 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>symbol<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">getName</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>o2<span class="token punctuation">,</span> <span class="token string">&quot;getName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/* {
  value: [Function: getName],
  writable: true,
  enumerable: true,
  configurable: true
}*/</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>o2<span class="token punctuation">,</span> <span class="token string">&quot;toString&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
{
  value: [Function: toString],
  writable: true,
  enumerable: true,
  configurable: true
}
*/</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>o2<span class="token punctuation">,</span> symbol<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*{ value: 2, writable: true, enumerable: true, configurable: true }*/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>â—ï¸ Symbol çš„ enumerable ä¸º true, ä½†æ˜¯åœ¨ä¸‹æ–‡ä¼šå‡ºç°æ— æ³•è¢« for...in æˆ–è€… Object.keys() éå†ï¼Œç»è¿‡ä¸€ç•ªæ¢ç©¶å‘ç°å†…éƒ¨æ˜¯åšäº†ä¸€ç•ªå¤„ç†çš„ï¼Œä¹‹å‰çš„ç‰ˆæœ¬æ˜¯ç”¨ for... in è¿›è¡Œæ‰€æœ‰å±æ€§çš„æšä¸¾ç„¶åæ‹·è´çš„ï¼Œåœ¨ ES6 é‡Œé¢å¯èƒ½ä½¿ç”¨äº† Object.getOwnPropertySymbols æ¥è·å¾— æ‰€æœ‰ Symbol å±æ€§ç„¶åå†æ‹·è´ã€‚</p> <h4 id="æµ…æ‹·è´ç‰¹æ€§"><a href="#æµ…æ‹·è´ç‰¹æ€§" class="header-anchor">#</a> æµ…æ‹·è´ç‰¹æ€§</h4> <p>ä¹Ÿå°±è¯´å¦‚æœæ‹·è´å±æ€§çš„å€¼æ˜¯å¼•ç”¨ç±»å‹çš„è¯ï¼Œå…‹éš†ä¹‹åå¯¹è±¡å¯¹å…¶çš„ä¿®æ”¹ä¼šæ›´æ–°åˆ°åŸå¯¹è±¡ä¸Šï¼Œå› ä¸ºè¿™ä¸ªæ“ä½œçš„éƒ½æ˜¯åŒä¸€ä¸ªå†…å­˜åœ°å€ã€‚é™¤éæ‰‹åŠ¨ä¿®æ”¹äº†å¯¹åº”çš„æŒ‡å‘</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> newObj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
newObj<span class="token punctuation">.</span>list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// æ‰‹åŠ¨æ›´æ”¹äº†æ–°å¯¹è±¡çš„listçš„æŒ‡å‘</span>
<span class="token comment">// è¿™æ ·å­ obj.list å’Œ newObj.list å°±ç‹¬ç«‹å¼€æ¥äº’ç›¸ä¸å—</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="å¯¹è±¡çš„æšä¸¾"><a href="#å¯¹è±¡çš„æšä¸¾" class="header-anchor">#</a> å¯¹è±¡çš„æšä¸¾</h3> <ul><li><p>for...inï¼šéå†å¯¹è±¡è‡ªèº«å’Œ<strong>ç»§æ‰¿</strong>çš„å¯æšä¸¾çš„å±æ€§</p> <p>â­ï¸ åœ¨éå†æ‹·è´çš„æ—¶å€™éœ€è¦æ³¨æ„ä½¿ç”¨ Object.hasOwnProerty æ¥æ’é™¤åœ¨åŸå‹é“¾ä¸Šçš„ä¸€äº›å±æ€§</p></li> <li><p>Object.keys()ï¼šè¿”å›å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰å¯æšä¸¾çš„å±æ€§çš„é”®å</p></li> <li><p>JSON.stringifyï¼šåªä¸²è¡ŒåŒ–å¯¹è±¡è‡ªèº«çš„å¯æšä¸¾çš„å±æ€§</p> <p>ğŸŒŸ ä¼šå¿½ç•¥ undefined ã€å‡½æ•°ã€Symbolï¼ŒåŒæ—¶å¤„ç†å¾ªç¯å¼•ç”¨ä¼šæŠ¥å †æ ˆé”™è¯¯</p></li> <li><p>Object.getOwnPropertyNamesï¼šå’Œ <code>Object.keys</code> ç±»ä¼¼ï¼Œä½†ä¹Ÿä¼šè¿”å›ä¸å¯æšä¸¾è‡ªæœ‰å±æ€§ï¼Œåªè¦ä»–ä»¬çš„åå­—æ˜¯å­—ç¬¦çªœ</p></li> <li><p>Object.getOwnPropertySymbolsï¼šè¿”å› <code>symbol</code> è‡ªæœ‰å±æ€§æ— è®ºæ˜¯å¦å¯æšä¸¾</p></li> <li><p>Reflect.ownKeysï¼šè¿”å›æ‰€æœ‰è‡ªæœ‰å±æ€§ååŒ…æ‹¬ <code>string</code> / <code>symbol</code> æ— è®ºæ˜¯å¦å¯æšä¸¾</p></li> <li><p>Object.assignï¼šå¿½ç•¥ enumerable ä¸º false çš„å±æ€§ï¼Œåªæ‹·è´å¯¹è±¡è‡ªèº«çš„å¯æšä¸¾çš„å±æ€§</p></li></ul> <h2 id="localstorage-å®‰å…¨åˆ†æ"><a href="#localstorage-å®‰å…¨åˆ†æ" class="header-anchor">#</a> ğŸ‘¹ <a href="https://blog.csdn.net/yangdeli888/article/details/7735260" target="_blank" rel="noopener noreferrer">LocalStorage å®‰å…¨åˆ†æ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <blockquote><ol><li>localStorage çš„å­˜å‚¨å®ç°é•¿ä¸”å­˜å‚¨çš„å†…å®¹åŸºæœ¬ä¸Šéƒ½æ˜¯ä»¥æ˜æ–‡çš„æ–¹å¼è¿›è¡Œå­˜å‚¨ï¼Œå¯¹äºç½‘ç«™æ”»å‡»è€…æ¥è¯´ï¼Œå¯ä»¥é€šè¿‡ç›´æ¥æ³¨å…¥ localstorage.removeItem() æˆ–è€… localStorage.clear() çš„æ–¹å¼å¯¹ç¼“å­˜è¿›è¡Œæ¸…ç©ºç­‰ç­‰</li> <li>åœ¨è¿™é‡Œæˆ‘ä»¬å…³å¿ƒçš„æ˜¯ localstorage è®¾ç½®æ—¶é™æ€§çš„é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯å¦‚ä½•ç»™ localstorage åƒ cookie ä¸€æ ·è®¾ç½®ä¸€ä¸ªæœ‰æ•ˆæ—¶é—´æˆ–è€…è¯´å¦‚ä½•åˆ¤æ–­å½“å‰ localstorage ç¼“å­˜çš„å†…å®¹æ˜¯æœ€æ–°çš„</li></ol></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// æœ‰ä¸¤ç§è§£å†³æ–¹æ³•ï¼Œ</span>
<span class="token comment">// ç¬¬ä¸€ç§æ˜¯å‰ç«¯è‡ªå·±æ“ä½œè®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é™ï¼Œä¸æ•°æ®åŒ…è£…åœ¨ä¸€èµ·è½¬æ¢ä¸º JSON å­—ç¬¦ä¸²çš„å½¢å¼å­˜å…¥ç¼“å­˜ï¼Œä¸‹æ¬¡å–å€¼çš„æ—¶å€™åˆ¤æ–­æ˜¯å¦åœ¨æ—¶é™å†…</span>
<span class="token comment">// ç¬¬äºŒç§æ˜¯é€šè¿‡ç±»ä¼¼åå•†ç¼“å­˜çš„æ–¹å¼ï¼Œæ¯æ¬¡è¯·æ±‚æºå¸¦ä¸€ä¸ªEtagæ ‡è¯†åˆ°æœåŠ¡å™¨ï¼Œä»¥ Etagçš„ä¸€è‡´æ€§åˆ¤æ–­å½“å‰æ•°æ®æ˜¯å¦æ›´æ–°</span>

<span class="token comment">// åŸºäºç¬¬ä¸€ç§æ€è·¯çš„å®ç°æ–¹æ³•</span>
<span class="token keyword">function</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> curtime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è·å–å½“å‰æ—¶é—´</span>
  localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">val</span><span class="token operator">:</span> value<span class="token punctuation">,</span> <span class="token literal-property property">time</span><span class="token operator">:</span> curtime <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è½¬æ¢æˆjsonå­—ç¬¦ä¸²åºåˆ—</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> exp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//expæ˜¯è®¾ç½®çš„è¿‡æœŸæ—¶é—´</span>
  <span class="token keyword">var</span> val <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è·å–å­˜å‚¨çš„å…ƒç´ </span>
  <span class="token keyword">var</span> dataobj <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è§£æå‡ºjsonå¯¹è±¡</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> dataobj<span class="token punctuation">.</span>time <span class="token operator">&gt;</span> exp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//å¦‚æœå½“å‰æ—¶é—´-å‡å»å­˜å‚¨çš„å…ƒç´ åœ¨åˆ›å»ºæ—¶å€™è®¾ç½®çš„æ—¶é—´ &gt; è¿‡æœŸæ—¶é—´</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;expires&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//æç¤ºè¿‡æœŸ</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;val=&quot;</span> <span class="token operator">+</span> dataobj<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="web-å¸¸è§æ”»å‡»"><a href="#web-å¸¸è§æ”»å‡»" class="header-anchor">#</a> ğŸ˜‰ web å¸¸è§æ”»å‡»</h2> <p>CSRF å’Œ XSS</p> <ul><li>CSRF(è·¨ç«™è¯·æ±‚ä¼ªé€ ) çš„æ”»å‡»æµç¨‹</li></ul> <img src="E:\æ‚ä¸ƒæ‚å…«çš„ä¸œè¥¿\typeorm å›¾ç‰‡å­˜å‚¨åŒº\v2-4f67322fc9c1aba2d6a251696d14ec31_720w.jpg" style="display:block;margin:auto;"> <ol><li>ç™»å½•å—ä¿¡ä»»ç½‘ç«™ A ï¼Œå¹¶åœ¨æœ¬åœ°ç”Ÿæˆä¿å­˜ Cookieï¼›</li> <li>åœ¨ä¸ç™»å‡º A æƒ…å†µä¸‹ï¼Œè®¿é—®ç—…æ¯’ç½‘ç«™ B</li></ol> <p>â€‹ ç”¨æˆ·åªæœ‰ç¬¦åˆä¸Šé¢ä¸¤ä¸ªæ­¥éª¤çš„æ“ä½œæ‰å…·å¤‡é­å— CSRF æ”»å‡»çš„åŸºç¡€</p> <p>ğŸ”‘ é¢è¯•ä¸­æœ‰é—®åˆ°ä¸€ä¸ªé—®é¢˜</p> <p>CSRF æ˜¯å¦‚ä½•æ¨¡æ‹Ÿå‘èµ· get / post è¯·æ±‚ï¼Ÿæ¢è¨€è€ŒçŸ¥å°±æ˜¯é—®æœ‰å“ªäº›æ–¹å¼å¯ä»¥å®ç°ä¸åŒæºçš„ get è¯·æ±‚å’Œ post è¯·æ±‚ï¼Ÿ</p> <ul><li><p>é¦–å…ˆæˆ‘ä»¬å¾—çŸ¥é“åœ¨ HTML/ JS / CSS ä¸­æœ‰å“ªäº›è¯·æ±‚æ–¹å¼ä¸å—åŒæºé™åˆ¶ã€‚--&gt; é¡µé¢ä¸­çš„é“¾æ¥ï¼Œé‡å®šå‘ï¼Œä»¥åŠè¡¨å•æäº¤æ˜¯ä¸ä¼šå—åˆ°åŒæºç­–ç•¥çš„é™åˆ¶çš„ã€‚</p> <ul><li>é“¾æ¥æŒ‡çš„å°±æ˜¯ link, script, img, iframe çš„é“¾æ¥</li> <li>è¡¨å•æŒ‡çš„å°±æ˜¯æµè§ˆå™¨åŸç”Ÿè¡¨å•</li></ul></li> <li><p>get è¯·æ±‚ -- jsonp(script ä¸å—åŒæºé™åˆ¶)</p></li> <li><p>post è¯·æ±‚ -- è®¾ç½®ä¸€ä¸ªè‡ªåŠ¨æäº¤çš„è¡¨å•å‘é€ post è¯·æ±‚ï¼Œè®¿é—®é¡µé¢åä¼šè‡ªåŠ¨è¿›è¡Œæäº¤ã€‚</p> <p><a href="https://blog.csdn.net/wabiaozia/article/details/78771709" target="_blank" rel="noopener noreferrer">è§£é‡Š<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>XSS(è·¨ç«™è„šæœ¬) çš„æ”»å‡»æµç¨‹</p></li></ul> <img src="E:\æ‚ä¸ƒæ‚å…«çš„ä¸œè¥¿\typeorm å›¾ç‰‡å­˜å‚¨åŒº\v2-04906c5c0874c9e33a95dde9643ef74f_720w.jpg" style="display:block;margin:auto;"> <p><a href="https://www.jianshu.com/p/190dedd585f2" target="_blank" rel="noopener noreferrer">DOM å‹ XSS æ”»å‡»<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="bigint"><a href="#bigint" class="header-anchor">#</a> ğŸ†— BigInt</h2> <blockquote><p>JS ä¸­çš„ number ç±»å‹æ— æ³•ç²¾ç¡®è¡¨ç¤ºéå¸¸å¤§çš„æ•°ï¼Œä¼šå‡ºç°å¸¸è¯´çš„ä¸¢å¤±ç²¾åº¦</p> <p><a href="https://juejin.cn/post/6844903974378668039" target="_blank" rel="noopener noreferrer">å‚è€ƒé“¾æ¥<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">9007199254740992</span> <span class="token operator">===</span> <span class="token number">9007199254740993</span><span class="token punctuation">;</span>    <span class="token comment">// â†’ true å±…ç„¶æ˜¯true!</span>

<span class="token comment">// è¦åˆ›å»ºBigIntï¼Œåªéœ€è¦åœ¨æ•°å­—æœ«å°¾è¿½åŠ nå³å¯</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token number">9007199254740995n</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// â†’ 9007199254740995n</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token number">9007199254740995</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// â†’ 9007199254740996</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><p>BigInt ä¸æ”¯æŒä¸€å…ƒåŠ å·è¿ç®—ç¬¦, è¿™å¯èƒ½æ˜¯æŸäº›ç¨‹åºå¯èƒ½ä¾èµ–äº + å§‹ç»ˆç”Ÿæˆ Number çš„ä¸å˜é‡ï¼Œæˆ–è€…æŠ›å‡ºå¼‚å¸¸ã€‚å¦å¤–ï¼Œæ›´æ”¹ + çš„è¡Œä¸ºä¹Ÿä¼šç ´å asm.js ä»£ç ã€‚</p></li> <li><p>å› ä¸ºéšå¼ç±»å‹è½¬æ¢å¯èƒ½ä¸¢å¤±ä¿¡æ¯ï¼Œæ‰€ä»¥ä¸å…è®¸åœ¨ BigInt å’Œ Number ä¹‹é—´è¿›è¡Œæ··åˆæ“ä½œã€‚å½“æ··åˆä½¿ç”¨å¤§æ•´æ•°å’Œæµ®ç‚¹æ•°æ—¶ï¼Œç»“æœå€¼å¯èƒ½æ— æ³•ç”± BigInt æˆ– Number ç²¾ç¡®è¡¨ç¤ºã€‚</p></li></ul> <h2 id="ç±»å‹è½¬æ¢"><a href="#ç±»å‹è½¬æ¢" class="header-anchor">#</a> â­ï¸ ç±»å‹è½¬æ¢</h2> <blockquote><p>JS çš„ç±»å‹è½¬æ¢ä¸»è¦æœ‰ä¸‰ç§ï¼Œè½¬ä¸ºå¸ƒå°”å€¼ï¼›è½¬ä¸ºå­—ç¬¦ä¸²ï¼›è½¬ä¸ºæ•°å­— <a href="https://zhuanlan.zhihu.com/p/270336824" target="_blank" rel="noopener noreferrer">è½¬æ¢çš„åŸç†è¿‡ç¨‹<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p><img alt="" data-src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/10/20/16de9512eaf1158a~tplv-t2oaga2asx-zoom-in-crop-mark:1304:0:0:0.awebp" loading="lazy" class="lazy"></p> <ul><li>å¯¹è±¡è½¬ä¸ºåŸå§‹ç±»å‹
<ul><li>å¦‚æœ Symbol.toPrimitive()æ–¹æ³•ï¼Œä¼˜å…ˆè°ƒç”¨å†è¿”å›
<ul><li>é»˜è®¤æœ‰ä¸€ä¸ª hint å‚æ•°ä»£è¡¨å½“å‰éœ€è¦è½¬æ¢çš„ç±»å‹
<ul><li>default == é»˜è®¤çš„ç±»å‹</li> <li>number å¼ºåˆ¶è½¬æ¢ä¸º Number ç±»å‹</li> <li>string å¼ºåˆ¶è½¬æ¢ä¸º String ç±»å‹</li></ul></li></ul></li> <li>è°ƒç”¨ valueOf()ï¼Œå¦‚æœè½¬æ¢ä¸ºåŸå§‹ç±»å‹ï¼Œåˆ™è¿”å›</li> <li>è°ƒç”¨ toString()ï¼Œå¦‚æœè½¬æ¢ä¸ºåŸå§‹ç±»å‹ï¼Œåˆ™è¿”å›</li> <li>å¦‚æœéƒ½æ²¡æœ‰è¿”å›åŸå§‹ç±»å‹ï¼Œä¼šæŠ¥é”™</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;wyl&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">hint</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hint <span class="token operator">===</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// å¦‚æœå½“å‰éœ€è¦è½¬åŒ–çš„æ˜¯ number</span>
      <span class="token keyword">return</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>hint <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// å¦‚æœå½“å‰éœ€è¦è½¬åŒ–çš„æ˜¯string</span>
      <span class="token keyword">return</span> <span class="token string">&quot;wyl0&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token string">&quot;wyl1&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">+</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// + å°±æ˜¯å°† a è½¬åŒ–ä¸º number</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// String() å°±æ˜¯å°† a è½¬åŒ–ä¸º string</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// å¦‚ä½•è®©if(a == 1 &amp;&amp; a == 2)æ¡ä»¶æˆç«‹ï¼Ÿ</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token function-variable function">valueOf</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="header-anchor">#</a> ğŸ˜— å‡½æ•°</h2> <p>å‡½æ•°çš„è°ƒç”¨æ–¹å¼</p> <ol><li>æ™®é€šè°ƒç”¨</li> <li>å¯¹è±¡è°ƒç”¨</li> <li>call / apply è°ƒç”¨</li> <li>ä½œä¸º new é—´æ¥è°ƒç”¨</li></ol> <blockquote><p>ç®­å¤´å‡½æ•°ä¸æ™®é€šå‡½æ•°çš„åŒºåˆ«</p></blockquote> <ol><li><p>å¤–å½¢ä¸åŒ</p></li> <li><p>ç®­å¤´å‡½æ•°éƒ½æ˜¯åŒ¿åå‡½æ•°</p></li> <li><p>ç®­å¤´å‡½æ•°ä¸èƒ½ç”¨äºæ„é€ å‡½æ•°</p></li> <li><p>this æŒ‡å‘ä¸åŒ</p> <p>åœ¨æ™®é€šå‡½æ•°ä¸­ï¼Œthis æŒ‡å‘çš„æ˜¯è°ƒç”¨å®ƒçš„å¯¹è±¡ï¼Œå¦‚æœç”¨ä½œæ„é€ å‡½æ•°ï¼Œthis æŒ‡å‘åˆ›å»ºçš„å¯¹è±¡å®ä¾‹</p> <p>ç®­å¤´å‡½æ•°çš„ this åœ¨å£°æ˜çš„æ—¶å€™ç»‘å®šå…¶ä¸Šä¸‹æ–‡çš„ thisï¼ŒæŒ‡å‘çš„æ˜¯æ‰€åœ¨<strong>ä½œç”¨åŸŸ</strong>æŒ‡å‘çš„å¯¹è±¡ã€‚</p></li> <li><p>ç®­å¤´å‡½æ•°æ²¡æœ‰ arguments å¯¹è±¡</p></li> <li><p>ç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ä½œ Generator å‡½æ•°</p></li> <li><p>ç®­å¤´å‡½æ•°ä¸å…è®¸ä½¿ç”¨ call / apply çš„æ–¹æ³•æ”¹å˜ this æŒ‡å‘</p></li></ol> <h2 id="é—­åŒ…"><a href="#é—­åŒ…" class="header-anchor">#</a> ğŸ˜† é—­åŒ…</h2> <blockquote><p>é—­åŒ…æ˜¯æŒ‡æœ‰æƒè®¿é—®å¦å¤–ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡çš„å‡½æ•°</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// å¦‚ä½•è§£å†³ä¸‹é¢è¿™ä¸ªç»å…¸çš„é—®é¢˜</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="this"><a href="#this" class="header-anchor">#</a> ğŸ“„ this</h2> <p>ä¸åŒæƒ…å†µçš„ this è°ƒç”¨ï¼Œthis çš„æŒ‡å‘ä¼šä¸åŒã€‚</p> <ul><li>å¯¹äºç›´æ¥è°ƒç”¨å‡½æ•°ï¼Œä¸ç®¡å‡½æ•°æ”¾åˆ°ä»€ä¹ˆåœ°æ–¹ï¼Œthis ä¸€å®šæ˜¯ window</li> <li>å¯¹äº obj.foo() æ¥è¯´ï¼Œè°è°ƒç”¨äº†å‡½æ•°ï¼Œè°å°±æ˜¯ thisï¼Œæ‰€ä»¥æ­¤æ—¶ foo å†…éƒ¨çš„ this æŒ‡å‘çš„å°±æ˜¯ obj</li> <li>å¯¹äº new çš„æ–¹å¼ï¼Œthis æ°¸è¿œç»‘å®šåœ¨å®ä¾‹å¯¹è±¡ä¸Šï¼Œä¸ä¼šè¢«ä»»ä½•å½¢å¼æ”¹å˜</li> <li>å¯¹äº bind çš„æ–¹å¼ï¼Œthis ä¼šè¢«ç»‘å®šåœ¨ bind è®¾ç½®çš„å¯¹è±¡ä¸Šï¼Œå¦‚æœå¯¹ä¸€ä¸ªå‡½æ•°è¿›è¡Œå¤šæ¬¡ bindï¼Œå‡½æ•°çš„ this æ°¸è¿œç”±ç¬¬ä¸€æ¬¡ bind å†³å®š</li></ul> <p>this å†³å®šçš„ä¼˜å…ˆçº§</p> <ul><li>new çš„ä¼˜å…ˆçº§æœ€é«˜</li> <li>æ¥ä¸‹æ¥æ˜¯ bind å‡½æ•°</li> <li>ç„¶åæ˜¯ obj.foo çš„è°ƒç”¨æ–¹å¼</li> <li>æœ€åæ˜¯ç›´æ¥è°ƒç”¨çš„æ–¹å¼</li></ul> <p><img alt="image.png" data-src="https://s.poetries.work/gitee/2020/07/2.png" loading="lazy" class="lazy"></p> <h2 id="å†…å­˜ç®¡ç†"><a href="#å†…å­˜ç®¡ç†" class="header-anchor">#</a> â“ å†…å­˜ç®¡ç†</h2> <h3 id="å†…å­˜æœºåˆ¶"><a href="#å†…å­˜æœºåˆ¶" class="header-anchor">#</a> å†…å­˜æœºåˆ¶</h3> <ol><li>ä» JS çš„å†…å­˜æœºåˆ¶æ¥è¯´ï¼ŒåŸºç¡€å˜é‡çš„å€¼ä¿å­˜åœ¨æ ˆå†…å­˜ä¸­ï¼Œèµ‹å€¼çš„æ—¶å€™ç›´æ¥æ‹·è´å†…å­˜å€¼ï¼›å¼•ç”¨ç±»å‹çš„å€¼ä¿å­˜åœ¨å †å†…å­˜ä¸­ï¼Œå¹¶åœ¨æ ˆå†…å­˜ä¸­å­˜åœ¨æŒ‡å‘å¯¹åº”å †å†…å­˜åœ°å€çš„æŒ‡é’ˆï¼Œèµ‹å€¼çš„æ—¶å€™æ‹·è´çš„æ˜¯æŒ‡é’ˆã€‚</li> <li>ä¸ºä»€ä¹ˆå¼•ç”¨ç±»å‹ä¸ä¸€èµ·å­˜å‚¨åœ¨æ ˆå†…å­˜ä¸­å‘¢ï¼Ÿæ ˆå†…å­˜ä¸æ­¢å­˜æ”¾å˜é‡ï¼Œè¿˜è´Ÿè´£å‡½æ•°ä¸Šä¸‹æ–‡æ‰§è¡Œçš„åˆ‡æ¢ä»»åŠ¡ã€‚</li></ol> <h3 id="å†…å­˜å›æ”¶"><a href="#å†…å­˜å›æ”¶" class="header-anchor">#</a> å†…å­˜å›æ”¶</h3> <p>æ–°ç”Ÿä»£å†…å­˜ &amp; è€ç”Ÿä»£å†…å­˜</p> <ul><li>æ–°ç”Ÿä»£å†…å­˜çš„å›æ”¶æ–¹å¼ï¼šFrom æ£€æŸ¥å­˜æ´»å¯¹è±¡æŒ‰é¡ºåºæ”¾ç½®åœ¨ To ä¸­(å°½é‡é¿å…å‡ºç°å†…å­˜ç¢ç‰‡)ï¼Œç„¶åå°† From å’Œ To èŒè´£è°ƒæ¢ï¼ŒFrom å˜ä¸ºé—²ç½®åŒºï¼ŒTo å˜ä¸ºä½¿ç”¨åŒºï¼Œåé¢å¾ªç¯è¿™ä¸ªè¿‡ç¨‹ã€‚</li></ul> <img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/11/23/16e96b71923adacb~tplv-t2oaga2asx-zoom-in-crop-mark:1304:0:0:0.awebp" style="display:block;margin:auto;"> <ul><li><p>è€ç”Ÿä»£å†…å­˜å›æ”¶æ–¹å¼</p> <ul><li><p>æ ‡è®°æ¸…é™¤(å¸¸ç”¨)</p> <ol><li><p>æ ‡è®°é˜¶æ®µï¼šéå†å †å†…å­˜ä¸­çš„æ‰€æœ‰å¯¹è±¡å¹¶æ‰“ä¸Šæ ‡è®°ï¼Œå¯¹äºä»£ç ä¸­ä½¿ç”¨çš„ä»¥åŠè¢«å¼ºå¼•ç”¨çš„å–æ¶ˆæ ‡è®°</p></li> <li><p>æ¸…é™¤é˜¶æ®µï¼šå›æ”¶æ‰ä»æœ‰å…·æœ‰æ ‡è®°çš„å˜é‡</p></li> <li><p>å­˜åœ¨å†…å­˜ç¢ç‰‡é—®é¢˜ï¼Œé€šè¿‡æ ‡è®°æ•´ç†è§£å†³ä½†è€—æ—¶</p></li></ol></li> <li><p>å¼•ç”¨è®¡æ•°</p> <p>ğŸ‡ åŒºåˆ†å¼ºå¼•ç”¨ å’Œ å¼±å¼•ç”¨</p></li></ul></li></ul> <h2 id="äº‹ä»¶å¾ªç¯"><a href="#äº‹ä»¶å¾ªç¯" class="header-anchor">#</a> âœ´ï¸ äº‹ä»¶å¾ªç¯</h2> <blockquote><p>æµè§ˆå™¨çš„äº‹ä»¶å¾ªç¯ï¼Œnode çš„äº‹ä»¶å¾ªç¯</p> <p>åŒºåˆ«ï¼šæµè§ˆå™¨çš„å¾®ä»»åŠ¡æ€»æ˜¯åœ¨å®ä»»åŠ¡æ‰§è¡Œå®Œåæ‰§è¡Œï¼ˆä¸€å¼€å§‹æœ‰ä¸ª script ï¼‰</p> <p>node çš„å¾®ä»»åŠ¡åœ¨å„ä¸ªæ—¶æœºéƒ½æœ‰å¯èƒ½è¢«æ‰§è¡Œ</p></blockquote> <p>â­ï¸ æµè§ˆå™¨çš„äº‹ä»¶å¾ªç¯æœºåˆ¶ï¼šåˆå§‹å°†æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆä¸æ–­å‡ºæ ˆå…¥æ ˆåŒæ­¥ä»£ç ï¼Œé‡åˆ°å®ä»»åŠ¡å°±å°†å®ä»»åŠ¡æ”¾åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ï¼Œé‡åˆ°å¾®ä»»åŠ¡å°±æ”¾åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œç­‰åˆ°æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆä¸ºç©ºæ—¶ï¼ŒæŸ¥çœ‹å¾®ä»»åŠ¡é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºï¼Œä¸ä¸ºç©ºå°±ä¸æ–­å‡ºé˜Ÿç›´è‡³ä¸ºç©ºï¼›ç„¶åæŸ¥çœ‹å®ä»»åŠ¡é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºï¼Œä¸ä¸ºç©ºé˜Ÿå‡ºé˜Ÿæ‰§è¡Œå®ä»»åŠ¡ï¼Œå°†ä¸­é—´äº§ç”Ÿçš„å¾®ä»»åŠ¡é˜Ÿåˆ—æ¨å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå½“å‰å‡½æ•°æ‰§è¡Œå®Œåå†å»æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—å†…çš„å‡½æ•°ã€‚</p> <p>(ğŸŒ  ä¸»çº¿ç¨‹ä»â€œä»»åŠ¡é˜Ÿåˆ—â€å¾ªç¯è¯»å–ä»»åŠ¡çš„è¿‡ç¨‹)</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;timeout&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;resolve&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;end&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ol><li>ä¸€å¼€å§‹æ•´æ®µè„šæœ¬ä½œä¸ºç¬¬ä¸€ä¸ª<strong>å®ä»»åŠ¡</strong>æ‰§è¡Œ(æ²¡æœ‰å°±ä»äº‹ä»¶é˜Ÿåˆ—ä¸­è·å–)</li> <li>æ‰§è¡Œè¿‡ç¨‹ä¸­åŒæ­¥ä»£ç ç›´æ¥æ‰§è¡Œï¼Œ<strong>å®ä»»åŠ¡</strong>è¿›å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼Œ<strong>å¾®ä»»åŠ¡</strong>è¿›å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—</li> <li>å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œå‡ºé˜Ÿï¼Œæ£€æŸ¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¦‚æœæœ‰åˆ™ä¾æ¬¡æ‰§è¡Œï¼Œç›´åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸ºç©º</li> <li>æ‰§è¡Œæµè§ˆå™¨ UI çº¿ç¨‹çš„æ¸²æŸ“å·¥ä½œ</li> <li>æ£€æŸ¥æ˜¯å¦æœ‰ Web worker ä»»åŠ¡ï¼Œæœ‰åˆ™æ‰§è¡Œ</li> <li>æ‰§è¡Œé˜Ÿé¦–æ–°çš„å®ä»»åŠ¡ï¼Œå›åˆ° 2ï¼Œä¾æ­¤å¾ªç¯ï¼Œç›´åˆ°å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡é˜Ÿåˆ—éƒ½ä¸ºç©º</li></ol> <img src="https://cos.poetries.work/gitee/2020/07/70.png" alt="img" style="zoom:25%;"> <p>ğŸ‰ äº‹ä»¶é˜Ÿåˆ—ä¸­çš„å›è°ƒå‡½æ•°æ˜¯ç”±å„è‡ªçº¿ç¨‹æ’å…¥åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­çš„</p> <img src="https://cos.poetries.work/gitee/20190928/11.png" alt="img" style="zoom:33%;"> <p>ğŸ‰ <strong>tips</strong>: å…³äº async å’Œ await å†…éƒ¨å¾®ä»»åŠ¡çš„ç†è§£. å½“ await åé¢è·Ÿçš„æ˜¯ä¸€ä¸ªå˜é‡ï¼Œä¼šæŠŠ await ä¸‹é¢çš„ä»£ç æ³¨å†Œä¸ºå¾®ä»»åŠ¡å‹å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚å½“ await åé¢è·Ÿçš„æ˜¯ä¸€ä¸ª Promiseï¼Œä¼šç­‰åˆ°æ‰§è¡Œæ—¶æœºå›æ¥åå†æ³¨å†Œã€‚ä¸¤è€…çš„åŒºåˆ«ä¸»è¦æ˜¯æ³¨å†Œå¾®ä»»åŠ¡çš„æ—¶æœº =&gt; åæœå°±æ˜¯æ‰§è¡Œçš„é¡ºåºä¼šä¸ä¸€æ ·</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;script start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;async1 end&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/******å¯ä»¥å°è¯•ä¸‹è¿™ä¸¤ä¸ªä¸åŒçš„å‡½æ•°å¯¹æ¯”æ‰§è¡Œæ•ˆæœ******/</span>
<span class="token keyword">function</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;async2 end&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;async2 end1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;async2 end&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;async2 end1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/********************************************/</span>
<span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;setTimeout&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Promise&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;promise1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;promise2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;script end&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// script start =&gt; async2 end =&gt; Promise =&gt; script end =&gt; async2 end1 =&gt; promise1 =&gt; promise2 =&gt; async1 end =&gt; setTimeout</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><p>ğŸŒŸ node äº‹ä»¶å¾ªç¯æœºåˆ¶ï¼šæœ‰äº”ä¸ªé‡è¦çš„é˜¶æ®µï¼›poll è½®è¯¢ check æ£€æŸ¥ event close äº‹ä»¶æ¸…é™¤ timer å®šæ—¶å™¨ callback å›è°ƒå‡½æ•°ï¼ˆä¸€èˆ¬æ˜¯ I/O å›è°ƒï¼‰</p> <p>ä¸‰ä¸ªæ¯”è¾ƒé‡è¦çš„é˜¶æ®µï¼š</p> <ul><li><p>timer</p> <p>æ‰§è¡Œ setTimeout å’Œ setInterval çš„å›è°ƒ</p></li> <li><p>check</p> <p>ç›´æ¥æ‰§è¡Œ setImmdiate å›è°ƒ</p></li> <li><p>poll</p> <p>poll ä½œä¸ºä¸€ä¸ªè‡³å…³é‡è¦çš„é˜¶æ®µ</p></li></ul> <img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/2/1709951e65ffe00e~tplv-t2oaga2asx-zoom-in-crop-mark:1304:0:0:0.awebp" style="display:block;margin:auto;"> <ul><li>process.nextTick æ˜¯ä¸€ä¸ªç‹¬ç«‹äº eventLoop çš„ä»»åŠ¡é˜Ÿåˆ—ã€‚</li></ul> <blockquote><p>åœ¨æ¯ä¸€ä¸ª eventLoop é˜¶æ®µå®Œæˆåä¼šå»æ£€æŸ¥ nextTick é˜Ÿåˆ—ï¼Œå¦‚æœé‡Œé¢æœ‰ä»»åŠ¡ï¼Œä¼šè®©è¿™éƒ¨åˆ†ä»»åŠ¡ä¼˜å…ˆäºå¾®ä»»åŠ¡æ‰§è¡Œã€‚è¿™ä¸ªä¹Ÿæ˜¯ node åŒºåˆ«äºæµè§ˆå™¨ç‰¹æœ‰çš„ã€‚</p></blockquote> <p>ğŸ“£ tips: å¯ä»¥å»è¯´çš„ä¸€ä¸ªç‚¹æ˜¯ node10 ç‰ˆæœ¬ä¹‹å‰å¾®ä»»åŠ¡æ‰§è¡Œæ—¶æœºå’Œ node11 ç‰ˆæœ¬åçš„å¾®ä»»åŠ¡æ—¶æœºçš„åŒºåˆ«</p> <h2 id="ç”Ÿæˆå™¨-åç¨‹"><a href="#ç”Ÿæˆå™¨-åç¨‹" class="header-anchor">#</a> â—ï¸ ç”Ÿæˆå™¨ &amp; åç¨‹</h2> <ul><li>ç”Ÿæˆå™¨æ˜¯ ES6 çš„æ–°è¯­æ³•</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><p>ç”Ÿæˆå™¨å…¶å®æ˜¯åŸºäºåç¨‹æ¥å®ç°çš„ã€‚ä¸€ä¸ªçº¿ç¨‹ä¸­å¯ä»¥æœ‰å¤šä¸ªåç¨‹ï¼Œä½†æ˜¯åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªåç¨‹åœ¨æ‰§è¡Œï¼Œè¿™å°±æ¶‰åŠåˆ°äº†åç¨‹åˆ‡æ¢çš„é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ª next ä¹‹åæ‰§è¡Œè‹¥å¹²ä»£ç ï¼Œå† nextï¼Œæ—¶æœºå°±å›åˆ°ä¸Šä¸€æ¬¡æ‰§è¡Œæœ«å°¾ã€‚åç¨‹å¹¶ä¸å—æ“ä½œç³»ç»Ÿçš„æ§åˆ¶ï¼Œå®Œå…¨ç”±ç”¨æˆ·è‡ªå®šä¹‰åˆ‡æ¢</p></li> <li><p>thunk (åå‡½æ•°)ï¼šæ¥å—ä¸€å®šçš„å‚æ•°å®šåˆ¶åŒ–å‡½æ•°</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ä½¿ç”¨ thunk ä½¿å¾— generator å¯ä»¥é¡ºåºæ‰§è¡Œå®Œ</span>
<span class="token keyword">const</span> <span class="token function-variable function">readFileThunk</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">filename</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">gen</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> data1 <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">readFileThunk</span><span class="token punctuation">(</span><span class="token string">&quot;001.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data1<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> data2 <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">readFileThunk</span><span class="token punctuation">(</span><span class="token string">&quot;002.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data2<span class="token punctuation">.</span>toString<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> g <span class="token operator">=</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ç¬¬ä¸€æ­¥: ç”±äºè¿›åœºæ˜¯æš‚åœçš„ï¼Œæˆ‘ä»¬è°ƒç”¨nextï¼Œè®©å®ƒå¼€å§‹æ‰§è¡Œã€‚</span>
<span class="token comment">// nextè¿”å›å€¼ä¸­æœ‰ä¸€ä¸ªvalueå€¼ï¼Œè¿™ä¸ªvalueæ˜¯yieldåé¢çš„ç»“æœï¼Œæ”¾åœ¨è¿™é‡Œä¹Ÿå°±æ˜¯æ˜¯thunkå‡½æ•°ç”Ÿæˆçš„å®šåˆ¶åŒ–å‡½æ•°ï¼Œé‡Œé¢éœ€è¦ä¼ ä¸€ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°</span>
g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data1</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ç¬¬äºŒæ­¥: æ‹¿åˆ°ä¸Šä¸€æ¬¡å¾—åˆ°çš„ç»“æœï¼Œè°ƒç”¨next, å°†ç»“æœä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œç¨‹åºç»§ç»­æ‰§è¡Œã€‚</span>
  <span class="token comment">// åŒç†ï¼Œvalueä¼ å…¥å›è°ƒ</span>
  g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>data1<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>data2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><ul><li>ä½¿ç”¨ promise è§£å†³ä¸Šé¢çš„é—®é¢˜</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 *  Promise å®ç°åç¨‹é¡ºåºè°ƒç”¨
 */</span>

<span class="token comment">// æœ‰è¿™ä¹ˆä¸€ä¸ªè¯»å–æ–‡ä»¶çš„å‡½æ•°</span>
<span class="token keyword">function</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token parameter">filename<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// ä½¿ç”¨ setTimeout å»æ¨¡æ‹Ÿæ–‡ä»¶å¼‚æ­¥è¯»å–</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// å®ç°çš„ç›®çš„å°±æ˜¯ gen å†…éƒ¨æŒ‰é¡ºåºæ‰§è¡Œ</span>
<span class="token keyword">const</span> <span class="token function-variable function">gen</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> res1 <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&quot;file1&quot;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> res2 <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&quot;file2&quot;</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> g <span class="token operator">=</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">getGenPromise</span><span class="token punctuation">(</span><span class="token parameter">gen<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// generator ä¸­çš„ nextä¼ é€’çš„å‚æ•°ä¼šèµ‹å€¼ç»™ä¸Šä¸€ä¸ª yieldçš„å˜é‡</span>
<span class="token comment">// å›åˆ°è¿™é‡Œçš„æ‰§è¡Œé¡ºåºæ˜¯</span>
<span class="token comment">// 1. æ‰§è¡Œ g.next() å¾—åˆ° generator 1</span>
<span class="token comment">// 2. å°† generator 1 ä½œä¸ºnextå‚æ•°ä¼ å›ç”Ÿæˆå™¨å‡½æ•°ä¸­èµ‹å€¼ç»™ res1</span>
<span class="token comment">// 3. è¾“å‡º res1</span>
<span class="token function">getGenPromise</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data1</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">getGenPromise</span><span class="token punctuation">(</span>g<span class="token punctuation">,</span> data1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">getGenPromise</span><span class="token punctuation">(</span>g<span class="token punctuation">,</span> data2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h2 id="åŸå‹é“¾"><a href="#åŸå‹é“¾" class="header-anchor">#</a> â­ï¸ åŸå‹é“¾</h2> <blockquote><p>åŸå‹é“¾æ˜¯å®ç°ç»§æ‰¿çš„æ–¹å¼ä¹‹ä¸€ï¼Œæ¯ä¸ªå®ä¾‹å¯¹è±¡éƒ½æœ‰ä¸€ä¸ª proto å±æ€§æŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹ï¼Œå½“è¿™ä¸ªåŸå‹çš„ proto å±æ€§åˆæŒ‡å‘å¦ä¸€ä¸ªå®ä¾‹æˆ–è€…åŸå‹æ—¶å°±æ„æˆäº†åŸå‹é“¾ã€‚</p></blockquote> <img src="E:\æ‚ä¸ƒæ‚å…«çš„ä¸œè¥¿\typeorm å›¾ç‰‡å­˜å‚¨åŒº\1ed77e1f65372daaaca3552f86ebdd71_sm_xform_imageauth_key=1650629181-QB8bKLSg3goWZqna-0-7f3bb63e446b927e35eb4cfd4879817b&amp;response-content-disposition=inline%3B+filename%3Dimage.png%3B+filename%3DUTF-8''image.png" style="display:block;margin:auto;"> <p>ğŸ”‘ è°¨è®°ä¸€ç‚¹ï¼šå¯¹è±¡å…¶å®æ˜¯ç”±å‡½æ•°æ„é€ å‡ºæ¥çš„ï¼ŒåŒæ—¶å‡½æ•°åŸå‹ä¹Ÿæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

<span class="token comment">// å‡½æ•°åŸå‹ä¹Ÿæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡(ç”± new Object() ç”Ÿæˆ)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

<span class="token comment">// å¯¹è±¡ä¹Ÿæ˜¯ç”± Function ç”Ÿæˆçš„ (å‡½æ•°çš„ constructor ä¸€èˆ¬éƒ½æŒ‡å‘ Function [Function Function])</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype <span class="token operator">===</span> Object<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

<span class="token comment">// Function ç”± Functionå®ä¾‹ç”Ÿæˆ</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Function</span><span class="token punctuation">.</span>constructor <span class="token operator">===</span> Function<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>å¯¹è±¡çš„ hasOwnProperty() æ¥æ£€æŸ¥<strong>å¯¹è±¡è‡ªèº«</strong>ä¸­æ˜¯å¦å«æœ‰è¯¥å±æ€§ï¼ˆéœ€è¦æ³¨æ„ï¼‰</li> <li>ä½¿ç”¨ in æ£€æŸ¥å¯¹è±¡ä¸­æ˜¯å¦å«æœ‰æŸä¸ªå±æ€§æ—¶ï¼Œå¦‚æœå¯¹è±¡ä¸­æ²¡æœ‰ä½†æ˜¯åŸå‹é“¾ä¸­æœ‰ï¼Œä¹Ÿä¼šè¿”å› true</li></ul> <p>JS å®ç°ç»§æ‰¿æœ‰ 6 ç§æ–¹å¼ <a href="https://github.com/mqyqingfeng/Blog/issues/16" target="_blank" rel="noopener noreferrer">github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li>åŸå‹é“¾ç»§æ‰¿</li> <li>ç¼ºç‚¹
<ul><li>å¼•ç”¨ç±»å‹çš„å±æ€§ä¼šè¢«æ‰€æœ‰å®ä¾‹å…±äº«</li> <li>åˆ›å»º Student å®ä¾‹æ—¶ä¸èƒ½å‘ Parent ä¼ å‚</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;kevin&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;daisy&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token class-name">Child</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> child1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
child1<span class="token punctuation">.</span>names<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;yayu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child1<span class="token punctuation">.</span>names<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;kevin&quot;, &quot;daisy&quot;, &quot;yayu&quot;]</span>

<span class="token keyword">var</span> child2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child2<span class="token punctuation">.</span>names<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;kevin&quot;, &quot;daisy&quot;, &quot;yayu&quot;]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>æ„é€ å‡½æ•°ç»§æ‰¿</li> <li>ç¼ºç‚¹
<ul><li>æ–¹æ³•åœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰ï¼Œæ¯æ¬¡åˆ›å»ºå®ä¾‹éƒ½ä¼šåˆ›å»ºä¸€æ¬¡æ–¹æ³•</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// ç¼ºç‚¹å°±æ˜¯æ²¡åŠæ³•ç»§æ‰¿åŸå‹ä¸Šçš„å±æ€§å’Œæ–¹æ³•</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>ç»„åˆç»§æ‰¿</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ç¼ºç‚¹æ˜¯è°ƒç”¨äº†ä¸¤æ¬¡ Person æ–¹æ³•</span>

<span class="token comment">// ä¼˜åŒ–æ‰‹æ®µ</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Student<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>åŸå‹å¼ç»§æ‰¿
<ul><li>Object.create çš„å®ç°æ–¹å¼</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createObj</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token class-name">F</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> o<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>å¯„ç”Ÿå¼ç»§æ‰¿</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Clone</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> clone <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// é¢å¤–é™„åŠ ä¸€äº›å±æ€§</span>
  clone<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> clone<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿
<ul><li>ä¸ç»„åˆå¼ç»§æ‰¿ç›¸æ¯”ï¼Œåªæ‰§è¡Œäº†ä¸€æ¬¡çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œé¿å…åœ¨åŸå‹ä¸Šåˆ›å»ºå¤šä½™çš„å±æ€§</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// å½“å‰ç”¨å¾—æœ€å¹¿æ³›</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Clone</span><span class="token punctuation">(</span><span class="token parameter">source<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  target<span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span>
  target<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> target<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><p>ä»è®¾è®¡æ¨¡å¼çš„æ€æƒ³ä¸Šè°ˆè°ˆç»§æ‰¿æœ¬èº«çš„é—®é¢˜</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">drive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;wuwuwu!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">music</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;lalala!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">addOil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;å“¦å“Ÿï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">otherCar</span> <span class="token keyword">extends</span> <span class="token class-name">Car</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>çˆ¶ç±»æœ‰ä¸‰ä¸ªæ–¹æ³•ï¼Œæ¯ä¸ªå­ç±»éƒ½å¯ä»¥é€šè¿‡ç»§æ‰¿å¾—åˆ°è¿™ä¸‰ä¸ªæ–¹æ³•ï¼Œä½†æ˜¯å…¶å®è¿™ä¸‰ä¸ªæ–¹æ³•åœ¨æŸäº›å­ç±»æ˜¯ä¸éœ€è¦çš„ï¼Œæ‰€ä»¥è¯´**ç»§æ‰¿çš„æœ€å¤§é—®é¢˜å°±æ˜¯æ— æ³•å†³å®šç»§æ‰¿å“ªäº›å±æ€§ï¼Œæ‰€æœ‰çš„å±æ€§éƒ½å¾—ç»§æ‰¿ã€‚**è§£å†³çš„æ–¹æ³•æ˜¯é€šè¿‡ç»„åˆçš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯å°†è¿™äº›æ–¹æ³•ä¸€ä¸ªä¸ªæŠ½ç¦»å‡ºæ¥ï¼Œåé¢é€šè¿‡ç»„åˆçš„æ–¹å¼æ¥ä¸€ä¸ªä¸ªå †å ä¸Šå»</p> <h2 id="js-å¸¸è§é—®é¢˜"><a href="#js-å¸¸è§é—®é¢˜" class="header-anchor">#</a> â„¹ï¸ JS å¸¸è§é—®é¢˜</h2> <blockquote><p>å‚è€ƒé“¾æ¥ï¼šhttps://juejin.cn/post/6844903986479251464</p> <p>å‚è€ƒé“¾æ¥ï¼šhttps://juejin.cn/post/6844904004007247880</p></blockquote> <ol><li><p>å‡½æ•°çš„ arguments ä¸ºä»€ä¹ˆä¸æ˜¯æ•°ç»„ï¼Ÿå¦‚ä½•è½¬åŒ–æˆæ•°ç»„ï¼Ÿ</p></li> <li><p>forEach ä¸­ return æœ‰æ•ˆæœå—ï¼Ÿå¦‚ä½•ä¸­æ–­ forEach å¾ªç¯ï¼Ÿ</p></li> <li><p>å¦‚ä½•åˆ¤æ–­ JS åˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦åŒ…å«æŸä¸ªå€¼ï¼Ÿ</p></li> <li><p>å¦‚ä½•å®ç°æ•°ç»„æ‰å¹³åŒ–ï¼Ÿ</p> <ol><li>ES6 flat æ–¹æ³•</li> <li>toString() è½¬åŒ–ååˆ‡å‰²å­—ç¬¦ä¸²ï¼ˆæ³¨æ„æœ€åè¦è¿›è¡Œç±»å‹è½¬æ¢ï¼‰</li> <li>ä½¿ç”¨ some å‡½æ•°é€’å½’</li> <li>ä½¿ç”¨ reduce å‡½æ•°é€’å½’</li></ol></li> <li><p>æ‰‹åŠ¨å®ç°æ•°ç»„çš„ä¸€äº›æ–¹æ³•</p> <blockquote><p>ä¸‹é¢çš„ä»£ç æ²¡æœ‰åšå¾ˆå¤šçš„é”™è¯¯å¤„ç†ï¼Œæ¯”å¦‚æ˜¯ä¸æ˜¯æ•°ç»„ä½†æ˜¯è°ƒç”¨äº†è¿™äº›æ–¹æ³•æˆ–è€…ä¼ å…¥çš„ callback ä¸æ˜¯å‡½æ•°ç­‰ç­‰</p> <p>å‚è€ƒé“¾æ¥ï¼šhttps://juejin.cn/post/6844903986479251464#heading-0ï¼ˆé‡Œé¢çš„12ç« -17ç« å†™å¾—å¾ˆå…¨ï¼‰</p></blockquote></li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// å®ç°æ•°ç»„ map æ–¹æ³•</span>
<span class="token comment">// Array.prototype.map çš„å‡½æ•°ç­¾å (callback, thisArg)</span>
<span class="token comment">// thisArg è¡¨ç¤ºçš„æ˜¯ä¼ å…¥ä½œä¸º callback çš„ this å¯¹è±¡</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_map</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">callback<span class="token punctuation">,</span> thisArg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> newArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    o <span class="token operator">=</span> <span class="token function">Object</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> len <span class="token operator">=</span> o<span class="token punctuation">.</span>length <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// å³ç§»è¿ç®— ä¿è¯lenä¸ºæ•°å­—ä¸”ä¸ºæ•´æ•°</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> key <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> key<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token keyword">in</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> val <span class="token operator">=</span> o<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span> val<span class="token punctuation">,</span> key<span class="token punctuation">,</span> o<span class="token punctuation">)</span><span class="token punctuation">;</span>
      newArray<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> res<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> newArray<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// å®ç°æ•°ç»„ reduce æ–¹æ³•</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_reduce</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">callback<span class="token punctuation">,</span> initValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token function">Object</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    len <span class="token operator">=</span> o<span class="token punctuation">.</span>length <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> accumulator <span class="token operator">=</span> initValue<span class="token punctuation">;</span>
  accumulator <span class="token operator">=</span> accumulator <span class="token operator">?</span> accumulator <span class="token operator">:</span> o<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    accumulator <span class="token operator">=</span> <span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> accumulator<span class="token punctuation">,</span> o<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> j<span class="token punctuation">,</span> o<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> accumulator<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// å®ç°æ•°ç»„ push / pop æ–¹æ³•</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_push</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token function">Object</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    len <span class="token operator">=</span> o<span class="token punctuation">.</span>length <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">0</span><span class="token punctuation">,</span>
    argsLen <span class="token operator">=</span> item<span class="token punctuation">.</span>length <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> argsLen<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    o<span class="token punctuation">[</span>len <span class="token operator">+</span> i<span class="token punctuation">]</span> <span class="token operator">=</span> item<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  o<span class="token punctuation">.</span>length <span class="token operator">=</span> len <span class="token operator">+</span> argsLen<span class="token punctuation">;</span>
  <span class="token keyword">return</span> o<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// å®ç°æ•°ç»„ filter æ–¹æ³•</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_filter</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">callback<span class="token punctuation">,</span> thisArg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token function">Object</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    len <span class="token operator">=</span> o<span class="token punctuation">.</span>length <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token keyword">in</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> o<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> k<span class="token punctuation">,</span> o<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>o<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// å®ç°æ•°ç»„ splice æ–¹æ³•(å›°éš¾) - æ¶‰åŠåˆ°éå¸¸å¤šçš„è€ƒè™‘æƒ…å†µ</span>

<span class="token comment">// å®ç°æ•°ç»„ sort æ–¹æ³•(å›°éš¾) - æ¶‰åŠåˆ°æ’å…¥æ’åºå’Œå¿«é€Ÿæ’åº</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br></div></div><ul><li>Array.from åˆ›å»ºäºŒç»´æ•°ç»„</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// åˆ›å»ºä¸€ä¸ªæœ‰ 9 è¡Œ 10 åˆ—ä¸”åˆå§‹å€¼å…¨ä¸º false çš„äºŒç»´æ•°ç»„</span>
Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Array.from çš„å‚æ•°</span>
<span class="token comment">// arrayLike æƒ³è¦è½¬æ¢æˆæ•°ç»„çš„ä¼ªæ•°ç»„å¯¹è±¡æˆ–å¯è¿­ä»£å¯¹è±¡ã€‚</span>
<span class="token comment">// mapFn å¯é€‰ å¦‚æœæŒ‡å®šäº†è¯¥å‚æ•°ï¼Œæ–°æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä¼šæ‰§è¡Œè¯¥å›è°ƒå‡½æ•°ã€‚</span>
<span class="token comment">// thisArg å¯é€‰ å¯é€‰å‚æ•°ï¼Œæ‰§è¡Œå›è°ƒå‡½æ•° mapFn æ—¶ this å¯¹è±¡ã€‚</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="js-è¿ç®—ç¬¦"><a href="#js-è¿ç®—ç¬¦" class="header-anchor">#</a> JS è¿ç®—ç¬¦</h3> <p><a href="https://www.cainiaojc.com/javascript/operator_precedence.html" target="_blank" rel="noopener noreferrer">ä¼˜å…ˆçº§è§„åˆ™<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">n</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> a<span class="token punctuation">;</span>
a<span class="token punctuation">.</span>x <span class="token operator">=</span> a <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">n</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {n: 2}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><img src="https://img-blog.csdn.net/20181017162857161?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L214MTg1MTkxNDI4NjQ=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" style="display:block;margin:auto;"> <p>å›¾é‡Œé¢ç”»çš„å¾ˆæ¸…æ™°ï¼Œ. è¿ç®—çš„ä¼˜å…ˆçº§é«˜äº = ï¼Œæ‰€ä»¥ä¼šä¼˜å…ˆæ‰§è¡Œå¯¹ x çš„èµ‹å€¼ï¼Œæ­¤æ—¶ a b å¯¹åº”çš„å †æ ˆç©ºé—´å°±ä¼šè¢«ä¿®æ”¹ï¼Œç„¶åå†å¯¹ a è¿›è¡Œèµ‹å€¼ï¼Œæ­¤æ—¶ a ä¼šå¦å¤–å¼€è¾Ÿä¸€ä¸ªå†…å­˜ç©ºé—´ã€‚</p> <h3 id="js-ç²¾åº¦ä¸¢å¤±"><a href="#js-ç²¾åº¦ä¸¢å¤±" class="header-anchor">#</a> JS ç²¾åº¦ä¸¢å¤±</h3> <p><a href="https://juejin.cn/post/6844903630185693192" target="_blank" rel="noopener noreferrer">answer<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="å‰ç«¯æ€§èƒ½ä¼˜åŒ–"><a href="#å‰ç«¯æ€§èƒ½ä¼˜åŒ–" class="header-anchor">#</a> ğŸ™… å‰ç«¯æ€§èƒ½ä¼˜åŒ–</h2> <blockquote><p><a href="https://blog.51cto.com/u_15098009/2612150" target="_blank" rel="noopener noreferrer">å‚è€ƒé“¾æ¥<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å¯ä»¥ä»å››ä¸ªæ–¹å‘è¿›è¡Œé˜è¿°è¯´æ˜</p></blockquote> <ul><li>ç½‘ç»œè¯·æ±‚
<ul><li>å°½é‡é¿å…é‡å®šå‘ï¼ˆè®¿é—®ä¸€ä¸ªç½‘é¡µé‡å®šå‘åˆ°å¦ä¸€ä¸ªç½‘é¡µï¼‰</li> <li>DNS / èµ„æºé¢„è§£æï¼ˆdns-prefetchï¼‰</li> <li>åˆ©ç”¨ HTTP ç¼“å­˜ã€æœ¬åœ°ç¼“å­˜</li> <li>é™æ€èµ„æºåˆå¹¶ï¼ŒåŒ–ç®€å¤šä¸ªç½‘ç»œè¯·æ±‚ï¼Œæˆ–è€…ä½¿ç”¨æ‡’åŠ è½½çš„æ‰‹æ®µå»¶æ—¶è¯·æ±‚</li> <li>å¯¹ JSã€CSS ç­‰èµ„æºè¿›è¡Œå‹ç¼©ï¼›æŒ‰éœ€å¼•å…¥</li> <li>ä½¿ç”¨ CDN ï¼Œå‡å°‘æœåŠ¡å™¨è¿‡è½½èƒ½åŠ›</li></ul></li> <li>é¡µé¢è§£æä¸å¤„ç†
<ul><li>æ³¨æ„ link å’Œ script çš„å¼•å…¥ä½ç½®ï¼Œå°½é‡å°† link æ”¾åœ¨ head ä¸­å¼•å…¥ï¼Œå°† script æ”¾åœ¨ body åå¼•å…¥</li> <li>æ…ç”¨ @import</li></ul></li> <li>è¿è¡Œæ—¶
<ul><li>ä½¿ç”¨è™šæ‹Ÿåˆ—è¡¨é˜²æ­¢é¡µé¢åˆ›å»ºå¤šä¸ª DOM èŠ‚ç‚¹ï¼ˆè™šæ‹Ÿåˆ—è¡¨çš„å®ç°ï¼‰</li> <li>ä½¿ç”¨é˜²æŠ– / èŠ‚æµæ§åˆ¶äº‹ä»¶è§¦å‘çš„é¢‘ç‡ï¼ˆé˜²æŠ–&amp;èŠ‚æµçš„å®ç°ï¼‰</li> <li>å¯¹äºä¸€äº›é«˜è€—æ—¶çš„ä»»åŠ¡ä½¿ç”¨å¼‚æ­¥å›è°ƒæˆ–è€… ä½¿ç”¨ Web Worker æ¨¡æ‹Ÿå¤šçº¿ç¨‹å¤„ç†</li></ul></li></ul> <h2 id="js-ä½è¿ç®—"><a href="#js-ä½è¿ç®—" class="header-anchor">#</a> â“ JS ä½è¿ç®—</h2> <table><thead><tr><th style="text-align:left;">è¿ç®—ç¬¦</th> <th style="text-align:left;">åç§°</th> <th style="text-align:left;">æè¿°</th></tr></thead> <tbody><tr><td style="text-align:left;">&amp;</td> <td style="text-align:left;">AND</td> <td style="text-align:left;">å¦‚æœä¸¤ä½éƒ½æ˜¯ 1 åˆ™è®¾ç½®æ¯ä½ä¸º 1</td></tr> <tr><td style="text-align:left;">|</td> <td style="text-align:left;">OR</td> <td style="text-align:left;">å¦‚æœä¸¤ä½ä¹‹ä¸€ä¸º 1 åˆ™è®¾ç½®æ¯ä½ä¸º 1</td></tr> <tr><td style="text-align:left;">^</td> <td style="text-align:left;">XOR</td> <td style="text-align:left;">å¦‚æœä¸¤ä½åªæœ‰ä¸€ä½ä¸º 1 åˆ™è®¾ç½®æ¯ä½ä¸º 1</td></tr> <tr><td style="text-align:left;">~</td> <td style="text-align:left;">NOT</td> <td style="text-align:left;">åè½¬æ‰€æœ‰ä½</td></tr> <tr><td style="text-align:left;">&lt;&lt;</td> <td style="text-align:left;">é›¶å¡«å……å·¦ä½ç§»</td> <td style="text-align:left;">é€šè¿‡ä»å³æ¨å…¥é›¶å‘å·¦ä½ç§»ï¼Œå¹¶ä½¿æœ€å·¦è¾¹çš„ä½è„±è½ã€‚</td></tr> <tr><td style="text-align:left;">&gt;&gt;</td> <td style="text-align:left;">æœ‰ç¬¦å·å³ä½ç§»</td> <td style="text-align:left;">é€šè¿‡ä»å·¦æ¨å…¥æœ€å·¦ä½çš„æ‹·è´æ¥å‘å³ä½ç§»ï¼Œå¹¶ä½¿æœ€å³è¾¹çš„ä½è„±è½ã€‚</td></tr> <tr><td style="text-align:left;">&gt;&gt;&gt;</td> <td style="text-align:left;">é›¶å¡«å……å³ä½ç§»</td> <td style="text-align:left;">é€šè¿‡ä»å·¦æ¨å…¥é›¶æ¥å‘å³ä½ç§»ï¼Œå¹¶ä½¿æœ€å³è¾¹çš„ä½è„±è½ã€‚</td></tr></tbody></table> <ul><li><p>å·¦ä½ç§» - ç›¸å½“äºæ˜¯ä¹‹å‰é™¤æœ€å·¦è¾¹å¤–çš„æ‰€æœ‰äºŒè¿›åˆ¶ä½ * 2</p></li> <li><p>å³ä½ç§» - ç›¸å½“äºæ˜¯ä¹‹å‰é™¤æœ€å³è¾¹å¤–æ‰€æœ‰äºŒè¿›åˆ¶ä½ / 2</p></li> <li><p><em>number</em>. toStringï¼ˆradixï¼‰- éœ€è¦æ³¨æ„æ˜¯ number.toString</p> <ul><li>radix - è§„å®šè¡¨ç¤ºæ•°å­—çš„åŸºæ•°
<ul><li>2 - æ•°å­—ä»¥äºŒè¿›åˆ¶æ˜¾ç¤º</li> <li>8 - æ•°å­—ä»¥å…«è¿›åˆ¶æ˜¾ç¤º</li> <li>10 - æ•°å­—ä»¥åè¿›åˆ¶æ˜¾ç¤ºï¼ˆé»˜è®¤ï¼‰</li></ul></li></ul></li> <li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/parseInt" target="_blank" rel="noopener noreferrer">parseInt<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼ˆstring, radixï¼‰</p> <ul><li>è§£æä¸€ä¸ªå­—ç¬¦ä¸²å¹¶è¿”å›æŒ‡å®šåŸºæ•°çš„åè¿›åˆ¶æ•´æ•°</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// äºŒè¿›åˆ¶è½¬åè¿›åˆ¶</span>
<span class="token keyword">function</span> <span class="token function">binToDec</span><span class="token punctuation">(</span><span class="token parameter">bin</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>bin<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">binToDec</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>

<span class="token comment">// åè¿›åˆ¶è½¬äºŒè¿›åˆ¶</span>
<span class="token keyword">function</span> <span class="token function">decToBin</span><span class="token punctuation">(</span><span class="token parameter">dec</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// &gt;&gt;&gt; 0 å¯ä»¥å°†éåŸºç¡€ç±»å‹è½¬å˜æˆ 0</span>
  <span class="token comment">// &gt;&gt;&gt; 0 å¯ä»¥å°†æµ®ç‚¹æ•°è½¬æ¢æˆæ•´æ•°</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>dec <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">decToBin</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="symbol"><a href="#symbol" class="header-anchor">#</a> â“‚ï¸ Symbol</h2> <ol><li>ç”¨æ¥è§£å†³å±æ€§åå†²çªçš„é—®é¢˜ï¼Œ æ„é€ å”¯ä¸€çš„å±æ€§åæˆ–è€…å˜é‡</li> <li>ç§æœ‰å±æ€§</li> <li><a href="https://es6.ruanyifeng.com/#docs/symbol" target="_blank" rel="noopener noreferrer">ES6 Symbol<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ol> <ul><li>å°è£…ç§æœ‰å±æ€§</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>functon <span class="token function">getObj</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> symbol <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    obj<span class="token punctuation">[</span>symbol<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'test'</span>
    <span class="token keyword">return</span> obj

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>éå†</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ä½¿ç”¨ Object.keys() / for...in æ˜¯æ‹¿ä¸åˆ° symbol å±æ€§çš„</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;jzy&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">&quot;jzyismylover&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‹¿ä¸åˆ° Symbol</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‹¿ä¸åˆ° Symbol</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>â—ï¸ è™½ç„¶ç»è¿‡æµ‹è¯• enumerable ä¸º trueï¼Œä½†æ˜¯è¿˜æ˜¯ä¸èƒ½è¢« for...in æˆ–è€… Object.keys() éå†ï¼ŒçŒœæµ‹å¯èƒ½æ˜¯å†…éƒ¨ API å®ç°çš„åŸå› ã€‚</p> <p>Symbol å‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œè¡¨ç¤ºå¯¹ Symbol å®ä¾‹çš„æè¿°.(ä½†ä¹Ÿæ˜¯ä»…ä»…ä¸ºäº†ç”¨äºåŒºåˆ†ä¸åŒçš„ symbolï¼Œå¹¶ä¸å…·æœ‰å®é™…çš„æ„ä¹‰)</p> <ul><li><p>Symbol.prototype.description - è¿”å› Symbol çš„æè¿°ä¿¡æ¯</p></li> <li><p>Symbol ä½œä¸ºé”®å€¼ä¸èƒ½ä½¿ç”¨ç‚¹è¿ç®—ç¬¦ï¼ˆä¼šå½“æˆå­—ç¬¦ä¸²å¤„ç†ï¼‰</p></li> <li><p>å¯¹è±¡å†…éƒ¨å®šä¹‰ Symbol é”®å€¼ï¼Œéœ€è¦æ”¾åœ¨ [] å†…</p></li> <li><p>Symbol.hasInstance - ç”¨äºåˆ¤æ–­æŸå¯¹è±¡æ˜¯å¦ä¸ºæŸæ„é€ å™¨çš„å®ä¾‹. æœ¬è´¨ä¸Šè‡ªå®šä¹‰ instanceof è¡Œä¸ºçš„ä¸€ç§æ–¹å¼</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Array1</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>hasInstance<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Array1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

<span class="token keyword">class</span> <span class="token class-name">Numebr1</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>hasInstance<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">typeof</span> instance <span class="token operator">===</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token keyword">instanceof</span> <span class="token class-name">Numebr1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token comment">// ä¹‹å‰åŸºæœ¬ç±»å‹æ˜¯ä¸èƒ½ä½¿ç”¨ instanceof åˆ¤æ–­ç±»å‹çš„</span>
<span class="token comment">// è¿™ç§åšæ³•ç›¸å½“äºå¯¹è¿™ä¸ªæ–¹æ³•è¿›è¡Œæ‰©å……</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol/iterator" target="_blank" rel="noopener noreferrer">[Symbol.interator] å®ç°å¯¹è±¡å¯è¿­ä»£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>ç”Ÿæˆå™¨å…¶å®æ˜¯è¿­ä»£å™¨çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µ</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> obj4 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ä»£è¡¨å½“å‰å¯¹è±¡å¯è¿­ä»£</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">yield</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> obj4<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// é‡åˆ° done ä¸º true å°±åœæ­¢</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token comment">// 0, 1, 2, 3, 4, 5, 6, .... 9, 10</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li> <li><p>Symbol.for</p></li></ul> <p>å’Œ Symbol ä¸ä¸€æ ·çš„æ˜¯ï¼ŒSymbol.for é¢å¯¹åŒæ ·çš„å­—ç¬¦ä¸²çš„æ—¶å€™ä¼šè¿”å›ç›¸åŒçš„å¼•ç”¨</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> s <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> t <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="json-stringify"><a href="#json-stringify" class="header-anchor">#</a> â­•ï¸ JSON.stringify</h2> <p>âš ï¸ åºåˆ—åŒ–è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‡ºç°çš„é—®é¢˜</p> <ol><li><p>å¿½ç•¥ undefined, function, symbol,</p></li> <li><p>å‡ºç°å¾ªç¯å¼•ç”¨ä¼šæŠ¥é”™(stringify åºåˆ—åŒ–å¯¹è±¡çš„è¿‡ç¨‹ä¸­å¯¼è‡´ä¸æ–­å¼•ç”¨ï¼Œå †æ ˆä¸æ–­å †å å½¢æˆæ— é™å¾ªç¯)</p></li></ol> <p>ï¼ˆè¿™æ—¶å€™é¢è¯•å®˜å¾ˆå¯èƒ½å°±ä¼šé—®æ·±æ‹·è´çš„é—®é¢˜äº†ï¼‰</p> <h2 id="web-worker"><a href="#web-worker" class="header-anchor">#</a> ğŸŒŸ Web Worker</h2> <p>âš ï¸ åŸç†æ˜¯ä»€ä¹ˆï¼ŸçœŸçš„æœ‰å¤šçº¿ç¨‹å—ï¼Ÿå®é™…è¿ä½œçš„æ—¶å€™æœ‰ä»€ä¹ˆé™åˆ¶ï¼Ÿç½‘æ˜“é¢è¯•çš„æ—¶å€™è¢«è¿™ä¸€è¿ä¸²é—®é¢˜é—®æ‡µäº†ï¼Œç¡®å®åªæ˜¯çŸ¥é“ Web Worker æ˜¯ä¸ºäº†è§£å†³ JS å•çº¿ç¨‹è€Œå¼•å‡ºçš„ï¼Œä»–ä»¬é€šè¿‡äº‹ä»¶ç›‘å¬è¿›è¡Œé€šä¿¡ï¼Œä½†æ˜¯å¯¹å…¶ä¸­çš„ä¸€äº›åŸç†ä¸€æ— æ‰€çŸ¥ã€‚</p> <p><a href="https://jishuin.proginn.com/p/763bfbd38a14" target="_blank" rel="noopener noreferrer">å­¦ä¹ ç½‘å€ 1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://juejin.cn/post/6844903566281457678#heading-6" target="_blank" rel="noopener noreferrer">éå¸¸æœ‰ç”¨çš„è¯‘ä½œ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>å…³é”®å­—ï¼šç‹¬ç«‹å†…å­˜ç©ºé—´/ç‹¬ç«‹ JS ç¯å¢ƒï¼›å¹¶è¡Œæ‰§è¡Œï¼›åŠ è½½åŒæºé™åˆ¶ï¼›Worker å¯¹è±¡ï¼›æ— æ³•æ“ä½œ UIï¼›æ•°æ®é€šä¿¡ï¼›workerGlobalScoped; DelicatedGlobalScoped;</p> <ul><li>Web Worker ä¼šåˆ›å»ºæ“ä½œç³»ç»Ÿçº§åˆ«çš„çº¿ç¨‹ï¼Œæœ‰ç‹¬ç«‹äºä¸»çº¿ç¨‹çš„å†…å­˜ç©ºé—´ï¼Œçº¿ç¨‹ä¹‹é—´é€šè¿‡ postMessage é€šä¿¡ã€‚</li> <li>Web Worker å—ä¸»çº¿ç¨‹çš„æ§åˆ¶ï¼Œä¸»çº¿ç¨‹å¯ä»¥é”€æ¯ä»¥åŠåˆ›å»º worker çº¿ç¨‹ã€‚</li> <li>Web Worker æ•°æ®ä¼ è¾“é—®é¢˜å¯èƒ½æ˜¯é™åˆ¶æ•ˆç‡æ¯”è¾ƒå¤§çš„é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¼ è¾“æ¯”è¾ƒå¤§æ•°æ®é‡çš„æ—¶å€™ï¼Œæ•´ä½“ä¼šå½±å“ä¸»çº¿ç¨‹åŒæ­¥ä»£ç çš„æ‰§è¡Œå¯¼è‡´é¡µé¢é˜»å¡ã€‚ä¼ é€’æ•°æ®çš„æ–¹å¼æœ‰ä¸‰ç§ï¼šstructure data(ç»“æ„åŒ–å…‹éš†)ã€transfer memory (è½¬äº¤å†…å­˜æ§åˆ¶æƒ)ã€shared array buffer(å…±äº«å†…å­˜)ã€‚é¡¹ç›®ä¸­ç”¨åˆ°çš„æ˜¯ç»“æ„åŒ–å…‹éš†çš„æ–¹å¼ï¼Œç¬¬äºŒç§è½¬äº¤å†…å­˜æ§åˆ¶æƒæ›´å¤šç”¨äºäºŒè¿›åˆ¶æ•°æ®ï¼Œä¸”å…¶ä¸­å­˜åœ¨å°†æ•°æ®è½¬æ¢ä¸ºäºŒè¿›åˆ¶çŸ©é˜µçš„æŸè€—ã€‚ç¬¬ä¸‰ç§é—®é¢˜åœ¨äºå¤šä¸ªçº¿ç¨‹å…±äº«ä¸€ä¸ªå†…å­˜å—æ—¶çš„ç«äº‰é—®é¢˜ã€‚</li></ul> <p>â­ï¸ Web Worker æ˜¯è¿è¡Œåœ¨æµè§ˆå™¨å†…éƒ¨çš„ä¸€æ¡ç‹¬ç«‹çº¿ç¨‹ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨ Web Worker è¿è¡Œçš„ä»£ç å—ä¹Ÿå¿…é¡»å­˜æ”¾åœ¨ä¸€ä¸ª <strong>ç‹¬ç«‹æ–‡ä»¶</strong> ä¸­ï¼Œè¿™ç‚¹éœ€è¦éå¸¸æ³¨æ„ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">&quot;task.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å¦‚æœæ­¤å¤„çš„ â€œtask.jsâ€ å­˜åœ¨ä¸”èƒ½è¢«è®¿é—®ï¼Œé‚£ä¹ˆæµè§ˆå™¨ï¼ˆæ³¨æ„æ˜¯æµè§ˆå™¨ï¼‰ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹å»å¼‚æ­¥ä¸‹è½½æºä»£ç æ–‡ä»¶ã€‚ä¸€æ—¦ä¸‹è½½å®Œæˆï¼Œä»£ç å°†ç«‹åˆ»æ‰§è¡Œï¼Œæ­¤æ—¶ Worker ä¹Ÿå°±å¼€å§‹äº†å®ƒçš„å·¥ä½œã€‚ å¦‚æœæä¾›çš„ä»£ç æ–‡ä»¶ä¸å­˜åœ¨è¿”å› 404ï¼Œé‚£ä¹ˆ Worker ä¼šé™é»˜å¤±è´¥å¹¶ä¸æŠ›å‡ºå¼‚å¸¸</p> <h2 id="è·¨åŸŸ"><a href="#è·¨åŸŸ" class="header-anchor">#</a> ğŸ’ƒ è·¨åŸŸ</h2> <p>è·¨åŸŸæŒ‡çš„æ˜¯æ‰“ç ´æµè§ˆå™¨çš„åŒæºç­–ç•¥é™åˆ¶ï¼ŒåŒæºç­–ç•¥é™åˆ¶æŒ‡çš„æ˜¯ åè®®ï¼›åŸŸåï¼›ç«¯å£ç›¸åŒæ‰èƒ½è¿›è¡Œç›¸äº’é€šä¿¡ï¼Œå†…éƒ¨çš„ä¸€äº›ç¼“å­˜æ‰èƒ½å…±äº«ã€‚è¿™æ˜¯æµè§ˆå™¨ä¸ºäº†ä¿è¯ä¸åŒç½‘é¡µä¿¡æ¯ä¸æ±¡æŸ“çš„ä¸€ç§ç­–ç•¥ã€‚</p> <h2 id="js-å¯é€‰é“¾"><a href="#js-å¯é€‰é“¾" class="header-anchor">#</a> ğŸ”‘ JS å¯é€‰é“¾ ?</h2> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Optional_chaining" target="_blank" rel="noopener noreferrer">å­¦ä¹ é“¾æ¥<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>å¯é€‰é“¾çš„ç”¨é€”å…¶å®éå¸¸å¹¿æ³›ï¼Œä¹‹å‰è§‰å¾—è¿™ä¸ªå¥½åƒæ˜¯ TS é‡Œé¢çš„æ¦‚å¿µï¼Œä½†å…¶å®è¿™æ˜¯ JS é‡Œé¢çš„æ¦‚å¿µï¼Œè€Œä¸”æ˜¯éå¸¸é‡è¦çš„æ¦‚å¿µã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>obj<span class="token operator">?.</span>prop<span class="token punctuation">;</span> <span class="token comment">// å¯¹è±¡å±æ€§å¯é€‰</span>
obj<span class="token operator">?.</span><span class="token punctuation">[</span>expr<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// å¯¹è±¡å±æ€§è¡¨è¾¾å¼å¯é€‰</span>
arr<span class="token operator">?.</span><span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// æ•°ç»„ç´¢å¼•å¯é€‰</span>
func<span class="token operator">?.</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å‡½æ•°è°ƒç”¨å¯é€‰</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>â—ï¸ ä»¥ obj?.prop ä¸¾ä¾‹æ¥è¯´ï¼Œå¯é€‰çš„æ„æ€å°±æ˜¯å½“ obj ä¸ä¸º <code>null</code> / <code>undefined</code>æ‰å»æ‰§è¡Œ obj.prop è·å¾— prop å±æ€§çš„å€¼ã€‚å¦‚æœä¸ä½¿ç”¨å¯é€‰é“¾çš„è¯ä¼šå‡ºç°ä»€ä¹ˆç»“æœï¼Œå¦‚æœ obj ä¸º undfined / null ï¼Œæ ¹æœ¬å°±æ²¡æœ‰è®¿é—®çš„è¯­æ³•ï¼Œæ­¤æ—¶å°±ä¼šæŠ¥é”™äº†ã€‚</p> <h3 id="å¯¹è±¡å¯é€‰é“¾"><a href="#å¯¹è±¡å¯é€‰é“¾" class="header-anchor">#</a> å¯¹è±¡å¯é€‰é“¾</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> nestedProp <span class="token operator">=</span> obj<span class="token punctuation">.</span>first <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span>first<span class="token punctuation">.</span>second<span class="token punctuation">;</span>
<span class="token comment">// ç­‰ä»·äº</span>
<span class="token keyword">let</span> nestedProp <span class="token operator">=</span> obj<span class="token operator">?.</span>first<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>æ‰€ä»¥å¯ä»¥ç†è§£ä¸ºå¯é€‰é“¾å°±æ˜¯å…ˆè¿›è¡Œé null/undefined çš„åˆ¤æ–­ç„¶åå†æ‰§è¡Œå¯¹åº”çš„å±æ€§æŸ¥å€¼æ“ä½œ</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// å¯é€‰é“¾å’Œè¡¨è¾¾å¼</span>
<span class="token keyword">let</span> nesteProp <span class="token operator">=</span> obj<span class="token operator">?.</span><span class="token punctuation">[</span><span class="token string">&quot;prop&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;Name&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// æ•°ç»„ç´¢å¼•</span>
<span class="token keyword">let</span> arrItem <span class="token operator">=</span> array<span class="token operator">?.</span><span class="token punctuation">[</span><span class="token number">42</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>â—ï¸ éœ€è¦æ³¨æ„ä¸€ä¸ªç‚¹ï¼Œå¯é€‰é“¾ä¸å¯ä»¥ç”¨äºèµ‹å€¼ï¼Œå› ä¸ºå®ƒæ˜¯åˆ¤æ–­ä¸€ä¸ªå±æ€§æ˜¯å¦å­˜åœ¨çš„æ“ä½œï¼Œä¸å­˜åœ¨è¿˜èµ‹å€¼é‚£è‚¯å®šæ˜¯æœ‰é—®é¢˜çš„</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> object <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
object<span class="token operator">?.</span>name <span class="token operator">=</span> <span class="token string">'hello world'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="å‡½æ•°å¯é€‰é“¾"><a href="#å‡½æ•°å¯é€‰é“¾" class="header-anchor">#</a> å‡½æ•°å¯é€‰é“¾</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> result <span class="token operator">=</span> someInterface<span class="token punctuation">.</span>customMethod<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><p>å¦‚æœ someInstance å­˜åœ¨ customMethod ä¸”å€¼æ˜¯å‡½æ•°çš„è¯æ­£å¸¸å·¥ä½œ</p></li> <li><p>å¦‚æœ someInstance å­˜åœ¨ customMethod ä¸”å€¼ä¸æ˜¯å‡½æ•°çš„è¯ä¼šæŠ¥ TypeError çš„é”™è¯¯</p></li> <li><p>å¦‚æœ someInstance ä¸å­˜åœ¨ customMethod åˆ™è¿”å› undefinedï¼Œä¸è¿›è¡Œåé¢å‡½æ•°æ‰§è¡Œæ“ä½œ</p></li> <li><p>å¦‚æœ someInstance ä¸º null / undefined æŠ¥ TypeError çš„é”™è¯¯</p></li></ul> <p>â­ï¸ å¤„ç†å¯é€‰çš„å›è°ƒå‡½æ•°æˆ–è€…äº‹ä»¶å¤„ç†å™¨</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token parameter">onContent<span class="token punctuation">,</span> onError</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>onError<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// æ ¡éªŒonErroræ˜¯å¦çœŸçš„å­˜åœ¨</span>
      <span class="token function">onError</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// å¯é€‰é“¾çš„å†™æ³•</span>
<span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token parameter">onContent<span class="token punctuation">,</span> onError</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    onError<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å³ä½¿onErrorä¸ºundefinedä¹Ÿä¸ä¼šæŠ¥é”™</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="ç©ºå€¼åˆå¹¶æ“ä½œç¬¦"><a href="#ç©ºå€¼åˆå¹¶æ“ä½œç¬¦" class="header-anchor">#</a> ğŸ˜‰ ç©ºå€¼åˆå¹¶æ“ä½œç¬¦ ??</h2> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing_operator" target="_blank" rel="noopener noreferrer">å­¦ä¹ é“¾æ¥<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> num <span class="token operator">=</span> age <span class="token operator">??</span> <span class="token number">30</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>å¦‚æœ age ä¸ä¸º undefined æˆ–è€… nullï¼Œå°±å°† age çš„å€¼è¿”å›ç»™ numï¼Œå¦åˆ™å°±è¿”å› 30ã€‚åˆå¹¶çš„æ„æ€å…¶å®å°±æ˜¯ç»™å˜é‡ä¸€ä¸ªé»˜è®¤å€¼çš„æ„æ€ï¼Œé€šå¸¸é…åˆå¯é€‰é“¾ä¸€èµ·ä½¿ç”¨</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> name <span class="token operator">=</span> obj<span class="token operator">?.</span>name <span class="token operator">??</span> <span class="token string">&quot;jzy&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>â—ï¸ åŒºåˆ«äº ||ï¼Œ|| é’ˆå¯¹çš„å‡å€¼æ˜¯æœ‰å…­ä¸ªï¼Œè€Œ ?? é’ˆå¯¹çš„åªæ˜¯ undefined &amp; null</p> <h2 id="æ‰‹å†™é¢˜ç›®"><a href="#æ‰‹å†™é¢˜ç›®" class="header-anchor">#</a> æ‰‹å†™é¢˜ç›®</h2> <blockquote><p>æ‰‹å†™é¢˜ç›®ä¸»è¦æ˜¯å¯¹ä¸€äº›åŸç”Ÿçš„ API ç”¨è‡ªå·±çš„æ–¹æ³•å®ç°çš„è¿‡ç¨‹ï¼Œå¸¸è§çš„æœ‰ apply, call, bind, instanceof, promise çš„å®ç°ï¼Œå†åˆ°åé¢å¯èƒ½å°±æ˜¯æ·±æ‹·è´ï¼ˆæ•°ç»„æ·±æ‹·è´ã€å¯¹è±¡çš„æ·±æ‹·è´ï¼‰ã€æ•°ç»„æ‰å¹³åŒ–ã€å¤§æ•°ç›¸åŠ ç­‰ç­‰ï¼Œä¸‹é¢å°±å°†ä¸€äº›å¸¸è§çš„æ‰‹å†™é¢˜æ€»ç»“æ±‡æ€»ä¸€ä¸‹ã€‚</p> <p>å‚è€ƒé“¾æ¥ï¼šhttps://juejin.cn/post/6946022649768181774</p> <p>å‚è€ƒé“¾æ¥ï¼šhttps://juejin.cn/post/6968713283884974088</p></blockquote> <h3 id="jsonp-å®ç°è·¨åŸŸèµ„æºè¯·æ±‚"><a href="#jsonp-å®ç°è·¨åŸŸèµ„æºè¯·æ±‚" class="header-anchor">#</a> JSONP å®ç°è·¨åŸŸèµ„æºè¯·æ±‚</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">JSONP</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> params<span class="token punctuation">,</span> cbName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;script&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    window<span class="token punctuation">[</span>cbName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    params <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token comment">//</span>
      <span class="token operator">...</span>params<span class="token punctuation">,</span>
      <span class="token literal-property property">callback</span><span class="token operator">:</span> cbName<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> arr <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=params[key]</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è½¬æ¢å‚æ•°æ ¼å¼</span>
    script<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">?</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>arr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;&amp;&quot;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span> <span class="token comment">// æ‹¼æ¥ url å‚æ•°</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="object-is-å†…éƒ¨å®ç°"><a href="#object-is-å†…éƒ¨å®ç°" class="header-anchor">#</a> Object.is å†…éƒ¨å®ç°</h3> <p>âš ï¸ Object.is æ˜¯åˆ¤æ–­ä¸¤ä¸ªå˜é‡æ˜¯å¦ç›¸ç­‰çš„ APIï¼Œä¸å¸¸ç”¨çš„ == / === æ˜¯æœ‰åŒºåˆ«çš„ï¼Œ==ä¼šå°†ç±»å‹è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ä½†æ˜¯ Object.is ä¸ä¼šã€‚=== è®¤ä¸º +0 å’Œ -0 æ˜¯ç›¸ç­‰çš„ï¼Œä¸” NaN !== NaNï¼Œä½†æ˜¯ Object.is æ°å¥½ç›¸å</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">is</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">===</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//å½“ x, yéƒ½æ˜¯0æ—¶, 1/+0 = +Infinity, 1/-0 = -Infinity, æ˜¯ä¸ä¸€æ ·</span>
    <span class="token keyword">return</span> x <span class="token operator">!=</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token number">1</span> <span class="token operator">/</span> x <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">/</span> y<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">//  xå’ŒyåŒæ—¶ä¸ºNaNæ—¶ï¼Œè¿”å›true</span>
    <span class="token keyword">return</span> x <span class="token operator">!==</span> x <span class="token operator">&amp;&amp;</span> y <span class="token operator">!==</span> y<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="æ•°ç»„æ‰å¹³åŒ–"><a href="#æ•°ç»„æ‰å¹³åŒ–" class="header-anchor">#</a> æ•°ç»„æ‰å¹³åŒ–</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// è®¾ç½®æ‰å¹³åŒ–çš„å±‚çº§</span>
<span class="token keyword">function</span> <span class="token function">flat</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> depth <span class="token operator">=</span> <span class="token number">Infinity</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> curr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// å› ä¸ºæœ‰å¯èƒ½å­˜åœ¨å°šæœªå®Œå…¨æ‰å¹³çš„å­é¡¹ï¼Œæ‰€ä»¥è¿™é‡Œç”¨çš„æ˜¯[curr]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>depth <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> prev<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span>curr<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>curr<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      depth<span class="token operator">--</span><span class="token punctuation">;</span>
      <span class="token comment">// è¿™é‡Œå®¹æ˜“å‡ºç°å¿˜è®°åŠ ä¸Š depth</span>
      <span class="token keyword">return</span> prev<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token function">flat</span><span class="token punctuation">(</span>curr<span class="token punctuation">,</span> depth<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> prev<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>curr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">flat</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> depth <span class="token operator">=</span> <span class="token number">Infinity</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Array.prototype.some(callback) é‡åˆ° true å°±è¿”å›</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> depth <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è°¨è®°è¿™é‡Œæ¯æ¬¡ä½¿ç”¨çš„éƒ½æ˜¯ç©ºæ•°ç»„</span>
    arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token operator">...</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    depth<span class="token operator">--</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="å¯¹è±¡çš„æ‰å¹³åŒ–"><a href="#å¯¹è±¡çš„æ‰å¹³åŒ–" class="header-anchor">#</a> å¯¹è±¡çš„æ‰å¹³åŒ–</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/*
const obj = {
 a: {
        b: 1,
        c: 2,
        d: {e: 5}
    },
 b: [1, 3, {a: 2, b: 3}],
 c: 3
}

flatten(obj) ç»“æœè¿”å›å¦‚ä¸‹
// {
//  'a.b': 1,
//  'a.c': 2,
//  'a.d.e': 5,
//  'b[0]': 1,
//  'b[1]': 3,
//  'b[2].a': 2,
//  'b[2].b': 3
//   c: 3
// }
*/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * @function å¯¹è±¡çš„æ·±æ‹·è´
 * @param {*} obj
 */</span>
<span class="token keyword">function</span> <span class="token function">flattenObj</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// obj åœ¨é€’å½’ç»“æŸçš„æ—¶å€™æŒ‡çš„æ˜¯æŸä¸€ä¸ªåŸºæœ¬ç±»å‹çš„å€¼</span>
  <span class="token keyword">const</span> <span class="token function-variable function">flat</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> path</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      res<span class="token punctuation">[</span>path<span class="token punctuation">]</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// æ•°ç»„</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// é˜²æ­¢æ‹·è´æ•°ç»„ä¸Šçš„ä¸€äº›åŸå‹æ–¹æ³•</span>
          <span class="token function">flat</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">[</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// å¯¹è±¡</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// åˆ¤æ–­æ˜¯å¦æ˜¯åˆå§‹è¿›å…¥çš„æ—¶å€™</span>
        <span class="token comment">// å¦‚æœä¸æ˜¯å°±å¾—åŠ  xxx.xxx å»è®¿é—®äº†</span>
        <span class="token keyword">let</span> subfix <span class="token operator">=</span> <span class="token operator">!</span>path <span class="token operator">?</span> item <span class="token operator">:</span> path <span class="token operator">+</span> <span class="token string">&quot;.&quot;</span> <span class="token operator">+</span> item<span class="token punctuation">;</span>
        <span class="token function">flat</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>subfix<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">flat</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="æ·±æ‹·è´"><a href="#æ·±æ‹·è´" class="header-anchor">#</a> æ·±æ‹·è´</h3> <blockquote><p>æ·±æ‹·è´æ˜¯åœ¨æµ…æ‹·è´çš„åŸºç¡€ä¸Šå¯¹å†…éƒ¨æ‰€æœ‰çš„å¼•ç”¨å˜é‡éƒ½è¿›è¡Œæ‹·è´çš„è¿‡ç¨‹ã€‚æµ…æ‹·è´æ˜¯ç›´æ¥æ‹·è´å¼•ç”¨çš„è¿‡ç¨‹ï¼Œæ·±æ‹·è´æ˜¯ç›´æ¥å°†å†…å­˜ç©ºé—´å†…çš„å†…å®¹è¿›è¡Œæ‹·è´</p></blockquote> <ul><li>æµ…æ‹·è´çš„å®ç°æ–¹å¼
<ul><li>æ‰‹åŠ¨æ‹·è´</li> <li>Object.assign</li> <li>concat</li> <li>slice</li> <li>... æ‰©å±•è¿ç®—ç¬¦</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">toRawType</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// é€’å½’çš„ç»ˆæ­¢æ¡ä»¶</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>
    <span class="token punctuation">[</span>
      <span class="token string">&quot;String&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;Number&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;Boolean&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;Null&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;Undefined&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;Symbol&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;Function&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token function">toRawType</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">obj<span class="token punctuation">.</span>constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// æ‹·è´ Date</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">toRawType</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;D&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">valueof</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä¿è¯å€¼æ˜¯ä¸€æ ·çš„æƒ…å†µä¸‹æŒ‡å‘ä¸åŒçš„å†…å­˜åœ°å€</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// æ‹·è´ Regxap</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">toRawType</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;Regxap&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> newReg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\w+$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
    <span class="token comment">// å…ˆæ‹¿åˆ°æ­£åˆ™çš„æ–‡æœ¬ï¼Œå†æ‹¿åˆ°å¯¹åº”çš„æ ‡å¿—ä½</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">obj<span class="token punctuation">.</span>constructor</span><span class="token punctuation">(</span>newReg<span class="token punctuation">.</span>source<span class="token punctuation">,</span> newReg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    result<span class="token punctuation">.</span>lastIndex <span class="token operator">=</span> obj<span class="token punctuation">.</span>lastIndex<span class="token punctuation">;</span> <span class="token comment">// æ›´æ–°ä¸‹ä¸€æ¬¡åŒ¹é…çš„å¼€å§‹ç´¢å¼•</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// æ‹·è´ Set</span>
  <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">toRawType</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;Set&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> obj<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">deepClone</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// æ‹·è´ map</span>
  <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">toRawType</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;Map&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> obj<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      res<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// æ‹·è´æ•°ç»„å’Œå¯¹è±¡</span>
  <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      res<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br></div></div><p>å¹³æ—¶å¦‚ä½•åˆ¤æ–­å¯¹è±¡ç±»å‹</p> <ul><li>typeof</li> <li>instanceof</li> <li>Array.isArray</li> <li>Object.prototype.toString,call(8, -1)</li> <li>Object.is</li></ul> <p>...etc</p> <h3 id="å‘å¸ƒè®¢é˜…æ¨¡å¼-è§‚å¯Ÿè€…æ¨¡å¼"><a href="#å‘å¸ƒè®¢é˜…æ¨¡å¼-è§‚å¯Ÿè€…æ¨¡å¼" class="header-anchor">#</a> å‘å¸ƒè®¢é˜…æ¨¡å¼ &amp; è§‚å¯Ÿè€…æ¨¡å¼</h3> <blockquote><p>å®ƒä»¬ä¹‹é—´å¾ˆå®¹æ˜“æ··æ·†ï¼Œæœ¬è´¨çš„åŒºåˆ«æ˜¯å‘å¸ƒè®¢é˜…è€…æ¨¡å¼å…¶å®æ˜¯æœ‰ä¸ªä¸­ä»‹è§’è‰²æ¥è§£è€¦å‘å¸ƒè€…å’Œè®¢é˜…è€…</p> <p>å‚è€ƒé“¾æ¥ï¼šhttps://zhuanlan.zhihu.com/p/51357583</p></blockquote> <ul><li>è§‚å¯Ÿè€…æ¨¡å¼</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * @class è§‚å¯Ÿè€…
 */</span>
<span class="token keyword">class</span> <span class="token class-name">Notify</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>observerList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// æ·»åŠ è®¢é˜…è€…</span>
  <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>observerList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ç§»é™¤è®¢é˜…è€…</span>
  <span class="token function">remove</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> idx <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>observerList<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> v <span class="token operator">==</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>idx <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>observerList<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>idx<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// é€šçŸ¥è®¢é˜…è€…</span>
  <span class="token function">nofify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>observerList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      item<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰€æœ‰çš„è®¢é˜…è€…éƒ½éƒ¨ç½²äº†ç›¸åŒçš„æ¥å£</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @class è®¢é˜…è€…
 */</span>
<span class="token keyword">class</span> <span class="token class-name">Watch</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><ul><li>å‘å¸ƒè®¢é˜…æ¨¡å¼</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">EventEmitter</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cache <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// æ·»åŠ è®¢é˜…è€…</span>
  <span class="token function">on</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// å–æ¶ˆè®¢é˜…</span>
  <span class="token function">off</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item <span class="token operator">!=</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// æ›´æ–°è®¢é˜…è€…</span>
  <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token operator">==</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> cb<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> item<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// è§¦å‘è®¢é˜…</span>
  <span class="token function">emit</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">cb</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// åªæ‰§è¡Œä¸€æ¬¡çš„è®¢é˜…</span>
  <span class="token function">once</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><h3 id="æ•°ç»„è½¬æ ‘"><a href="#æ•°ç»„è½¬æ ‘" class="header-anchor">#</a> æ•°ç»„è½¬æ ‘</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// å¤§æ¦‚çš„æ„æ€å°±æ˜¯ä¼ å…¥ä¸€ä¸ª pidï¼Œä»¥ id ä¸º pid çš„èŠ‚ç‚¹ä½œä¸ºæ ¹èŠ‚ç‚¹</span>
<span class="token comment">// é€’å½’åœ°å»æ„å»ºæ•´ä¸€æ£µæ ‘</span>
<span class="token keyword">function</span> <span class="token function">convertToTreeData</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> pid</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> temp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> data<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>parentId <span class="token operator">===</span> pid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>title<span class="token punctuation">,</span> <span class="token literal-property property">id</span><span class="token operator">:</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>id <span class="token punctuation">}</span><span class="token punctuation">;</span>
      temp <span class="token operator">=</span> <span class="token function">convertToTreeData</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>temp<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        obj<span class="token punctuation">.</span>children <span class="token operator">=</span> temp<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> nodes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;ç¬¬ä¸€çº§1&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">parentId</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;ç¬¬äºŒçº§1&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">parentId</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;ç¬¬äºŒçº§2&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">parentId</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;ç¬¬ä¸‰çº§1&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">parentId</span><span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;ç¬¬ä¸‰çº§2&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">parentId</span><span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="é©¼å³°è½¬çŸ­æ¨ªçº¿-çŸ­æ¨ªçº¿è½¬é©¼å³°"><a href="#é©¼å³°è½¬çŸ­æ¨ªçº¿-çŸ­æ¨ªçº¿è½¬é©¼å³°" class="header-anchor">#</a> é©¼å³°è½¬çŸ­æ¨ªçº¿ &amp; çŸ­æ¨ªçº¿è½¬é©¼å³°</h3> <blockquote><p>Vue çš„å·¥å…·å‡½æ•°å†…éƒ¨å°±æœ‰è¿™ä¹ˆä¸ªæ–¹æ³•ï¼ŒabCde -&gt; ab-cde, ab-cde -&gt; abCde</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * @function çŸ­æ¨ªçº¿è½¬é©¼å³°
 * @description é©¼å³°ä¸€èˆ¬æŒ‡çš„æ˜¯å°é©¼å³°
 * @param {*} str
 */</span>
<span class="token keyword">function</span> <span class="token function">toCamel</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">-(\w)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
  str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res<span class="token punctuation">,</span> item1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> item1<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> str<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @function é©¼å³°è½¬çŸ­æ¨ªçº¿
 * @description é©¼å³°ä¸€èˆ¬æŒ‡çš„æ˜¯å°é©¼å³°
 * @param {*} str
 */</span>
<span class="token keyword">function</span> <span class="token function">toLine</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">([A-Z])</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
  str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res<span class="token punctuation">,</span> item1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;-&quot;</span> <span class="token operator">+</span> item1<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> str<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="settimeout-æ¨¡æ‹Ÿ-setinterval"><a href="#settimeout-æ¨¡æ‹Ÿ-setinterval" class="header-anchor">#</a> setTimeout æ¨¡æ‹Ÿ setInterval</h3> <blockquote><p>setInterval çš„ç¼ºç‚¹åœ¨äºå‡å¦‚å†…éƒ¨å›è°ƒçš„æ‰§è¡Œæ—¶é—´è¿‡é•¿çš„è¯ï¼Œä¼šå‡ºç°ä¸‹ä¸€æ¬¡å›è°ƒåœ¨ä¸Šä¸€æ¬¡å›è°ƒæ‰§è¡Œå®Œæˆåé©¬ä¸Šæ‰§è¡Œçš„æƒ…å†µï¼ŒsetTimeout å¯ä»¥ä¿è¯ä¸Šä¸€æ¬¡ä»£ç æ‰§è¡Œå®Œæˆåå†è¿›å…¥ä¸‹ä¸€ä¸ªå®šæ—¶å™¨ä»»åŠ¡ã€‚</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">_setInterval</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> fn <span class="token operator">!==</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token string">&quot;TypeError: fn is not a function&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> <span class="token function-variable function">cb</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="å¹¶è¡Œçš„-promise-è°ƒåº¦å™¨"><a href="#å¹¶è¡Œçš„-promise-è°ƒåº¦å™¨" class="header-anchor">#</a> å¹¶è¡Œçš„ Promise è°ƒåº¦å™¨</h3> <p>ğŸ”‘æœ¬è´¨ä¸Šæ˜¯é€šè¿‡ä¸€ä¸ª runCount æ¥äº’æ–¥å½“å‰å›è°ƒå‡½æ•°çš„è®¿é—®ï¼Œåœ¨ request å‡½æ•°å†…éƒ¨é€šè¿‡å†…éƒ¨é€’å½’çš„æ–¹å¼</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//todo javascript çš„å¹¶å‘æ§åˆ¶</span>
<span class="token comment">/* 
  å…·ä½“çš„åœºæ™¯æ˜¯ï¼šå½“å‰æœ‰è‹¥å¹²çš„ä»»åŠ¡éœ€è¦æ‰§è¡Œï¼Œä½†æ˜¯å½“å‰å¤„ç†å™¨å¤„ç†çš„ä»»åŠ¡æ˜¯æœ‰é™åˆ¶çš„
  æ¯”å¦‚å½“å‰æ€»å…±æœ‰ 6 ä¸ªä»»åŠ¡ï¼Œä½†æ˜¯å½“å‰æœ€å¤šåªèƒ½å¤„ç† 2 ä¸ªä»»åŠ¡ï¼Œéœ€è¦æˆ‘ä»¬ç¼–å†™ç¨‹åºè¿›è¡Œ
  è°ƒåº¦å¤„ç†ï¼ŒæŒ‡å®šä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ï¼Œä¸€ä¸ªè¿è¡Œé˜Ÿåˆ—ï¼Œè¿è¡Œé˜Ÿåˆ—æ»¡äº†ä»¥åä»»åŠ¡éœ€è¦åœ¨ä»»åŠ¡é˜Ÿåˆ—
  è¿›è¡Œç­‰å¾…ï¼Œè¿è¡Œé˜Ÿåˆ—æœ‰ç©ºä½ï¼Œé‚£ä¹ˆæŒ‰ä¼˜å…ˆçº§å»é™¤ä»»åŠ¡é˜Ÿåˆ—ä¼˜å…ˆçº§é«˜çš„ä»»åŠ¡è¿è¡Œ
 */</span>

<span class="token keyword">class</span> <span class="token class-name">Scheduler</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">max</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// å½“å‰æ­£åœ¨è¿è¡Œçš„ä»»åŠ¡æ•°</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>max <span class="token operator">=</span> max<span class="token punctuation">;</span> <span class="token comment">// æœ€å¤šå¯è¿è¡Œçš„ä»»åŠ¡æ•°</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>callback <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// å½“å‰å­˜å‚¨çš„ä»»åŠ¡é˜Ÿåˆ—</span>
  <span class="token punctuation">}</span>

  <span class="token function">addTask</span><span class="token punctuation">(</span><span class="token parameter">task<span class="token punctuation">,</span> time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">cb</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token function">task</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>callback<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>callback<span class="token punctuation">.</span>length <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>max<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>callback
      <span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">--</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span>callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><h3 id="instanceof"><a href="#instanceof" class="header-anchor">#</a> instanceof</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>fucntion <span class="token function">_instanceof</span><span class="token punctuation">(</span><span class="token parameter">left<span class="token punctuation">,</span> right</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å·¦ä¾§çš„å˜é‡å¦‚æœæ˜¯åŸºæœ¬å€¼ç›´æ¥è¿”å› false</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> left <span class="token operator">!==</span> <span class="token string">'object'</span> <span class="token operator">||</span> left <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>
    <span class="token comment">// å³ä¾§çš„å˜é‡å¦‚æœä¸æ˜¯å¯¹è±¡æŠ¥é”™ TypeError</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> right <span class="token operator">!==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>right<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is not an object</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> prototype <span class="token operator">=</span> right<span class="token punctuation">.</span>prototype
    <span class="token keyword">while</span><span class="token punctuation">(</span>left<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>left<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> prototype<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
        left <span class="token operator">=</span> left<span class="token punctuation">.</span>__proto__
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="new"><a href="#new" class="header-anchor">#</a> new</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * @function new æ¨¡æ‹Ÿå®ç°
 * @param {*} constructor æ„é€ å‡½æ•°
 * @param {*} args æ„é€ å‡½æ•°ä¼ é€’çš„å‚æ•°
 */</span>
<span class="token keyword">function</span> <span class="token function">_new</span><span class="token punctuation">(</span><span class="token parameter">constructor<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> constructor <span class="token operator">!==</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token string">&quot;TypeError: constrctor is not a function&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">Object</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> constructor<span class="token punctuation">.</span>prototype<span class="token punctuation">;</span> <span class="token comment">// è®¾ç½®éšå¼åŸå‹é“¾</span>
  <span class="token keyword">const</span> re <span class="token operator">=</span> <span class="token function">constructor</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ„é€ å‡½æ•°å†…éƒ¨ this æŒ‡å‘ obj</span>
  <span class="token keyword">return</span> re <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> re <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> re <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token operator">?</span> re <span class="token operator">:</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="call"><a href="#call" class="header-anchor">#</a> call</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_call</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  context <span class="token operator">=</span> context <span class="token operator">?</span> context <span class="token operator">:</span> window<span class="token punctuation">;</span> <span class="token comment">// å¤„ç†æ²¡æœ‰ä¼ å…¥æŒ‡å®š this å¯¹è±¡çš„æƒ…å†µ</span>

  <span class="token keyword">const</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è·å¾—ä¼ é€’è¿›æ¥å‚æ•°</span>
  <span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä¿è¯é”®å€¼ä¸ä¸åŸå¯¹è±¡å†…çš„å‘ç”Ÿå†²çª</span>
  context<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> context<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="apply"><a href="#apply" class="header-anchor">#</a> apply</h3> <blockquote><p>åŸç†ä¸Šå’Œ call æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯å¯¹ä¼ å…¥å‚æ•°çš„å¤„ç†æ–¹å¼ä¸ä¸€æ ·</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_apply</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  context <span class="token operator">=</span> context <span class="token operator">?</span> context <span class="token operator">:</span> window<span class="token punctuation">;</span>

  <span class="token keyword">const</span> args <span class="token operator">=</span> arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> context<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="bind"><a href="#bind" class="header-anchor">#</a> bind</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_bind</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>context <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    context <span class="token operator">=</span> window<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> _this <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">cb</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ç‰¹åˆ«éœ€è¦æ³¨æ„çš„æ˜¯è¿™é‡Œä¸èƒ½ä½¿ç”¨ç®­å¤´å‡½æ•°</span>
    <span class="token keyword">const</span> _args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>args<span class="token punctuation">,</span> arguments<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> real_this <span class="token operator">=</span> <span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">_this</span> <span class="token operator">?</span> <span class="token keyword">this</span> <span class="token operator">:</span> context<span class="token punctuation">;</span>
    <span class="token function">_this</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>real_this<span class="token punctuation">,</span> _args<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// å°† cb æ„é€ å‡½æ•°çš„åŸå‹æŒ‡å‘ _this å®ä¾‹ä½¿å¾—åŸå‹é“¾ä¸Šçš„æ•°æ®å¯ä»¥ç»§æ‰¿</span>
  cb<span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>_this<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> cb<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>â—ï¸ ä¸Šé¢çš„ä»£ç æ˜¯å¯ä»¥ç»‘å®šä½†æ˜¯å¥½åƒä¸ç¬¦åˆçœŸå® bind çš„æœºåˆ¶</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_bind</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>context <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    context <span class="token operator">=</span> window<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>arg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>constructor <span class="token operator">===</span> <span class="token constant">F</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ä½œä¸ºæ„é€ å‡½æ•°</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">self</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">,</span> <span class="token operator">...</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token function">self</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span>args<span class="token punctuation">,</span> <span class="token operator">...</span>arg<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="æ’åºç®—æ³•"><a href="#æ’åºç®—æ³•" class="header-anchor">#</a> æ’åºç®—æ³•</h2> <blockquote><p>æ’åºç®—æ³•ç¨³å®šæ€§åˆ†ææ˜¯æ¯”è¾ƒé‡è¦çš„é—®é¢˜ï¼ŒæŒ‡çš„æ˜¯åœ¨æ’åºçš„å‰åï¼Œç›¸ç­‰å…ƒç´ çš„ç›¸å¯¹æ¬¡åºä¿æŒä¸å˜ï¼Œç¨³å®šçš„æ’åºç®—æ³•èƒ½å¤Ÿå¯¹å¤šæ¬¡æ’åºçš„ç»“æœåˆè®°å¿†åŠŸèƒ½ã€‚ç¨³å®šæ€§çš„åˆ¤æ–­åœ¨äºæ¯”è¾ƒçš„è¿‡ç¨‹ä¸­æ˜¯å¦ä¼šå‘ç”Ÿè·¨å…ƒç´ çš„æƒ…å†µ</p></blockquote> <h3 id="å†’æ³¡æ’åº"><a href="#å†’æ³¡æ’åº" class="header-anchor">#</a> å†’æ³¡æ’åº</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * @function å†’æ³¡æ’åº
 * @param {*} arr
 */</span>
<span class="token keyword">function</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> isSwap<span class="token punctuation">;</span>
  <span class="token keyword">const</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    isSwap <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// å†’æ³¡æ’åºç®—æ³•å¹¶ä¸æ˜¯ä¸€å®šæ˜¯ç¨³å®šçš„ï¼Œç¨³å®šçš„åŸå› æ˜¯å› ä¸ºæˆ‘ä»¬è¿™é‡Œé‡‡ç”¨çš„æ˜¯ &gt; çš„ç­–ç•¥ï¼Œå¦‚æœæ›´æ¢æˆ &gt;= å°±å˜æˆä¸ç¨³å®šæ’åºäº†</span>
        <span class="token keyword">let</span> tmp <span class="token operator">=</span> arr<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        arr<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
        arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
        isSwap <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// ä¼˜åŒ–ç­–ç•¥1</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isSwap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="é€‰æ‹©æ’åº"><a href="#é€‰æ‹©æ’åº" class="header-anchor">#</a> é€‰æ‹©æ’åº</h3> <blockquote><p>ä¸ç¨³å®šçš„æ’åºç®—æ³•</p> <p>ã€1,3[1],7,4,6,3[2],5,2ã€‘</p> <p>æ’åºè¿‡ç¨‹ä¸­å¯èƒ½å‡ºç° 3[1] åœ¨ 3[2] åé¢çš„æƒ…å†µ</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * @function é€‰æ‹©æ’åº
 * @param {*} arr
 */</span>
<span class="token keyword">function</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// é€‰æ‹©çš„ç­–ç•¥çš„é—®é¢˜ï¼ˆæ¯æ¬¡é€‰çš„æ˜¯æœ€å¤§å€¼è¿˜æ˜¯æœ€å°å€¼ï¼‰</span>
  <span class="token keyword">let</span> min_index<span class="token punctuation">,</span>
    len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    min_index <span class="token operator">=</span> i<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>min_index<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        min_index <span class="token operator">=</span> j<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>min_index <span class="token operator">!==</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// åˆ¤æ–­æ˜¯å¦æœ‰æ¯” arr[i] æ›´å°çš„å…ƒç´ </span>
      <span class="token keyword">let</span> tmp <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>min_index<span class="token punctuation">]</span><span class="token punctuation">;</span>
      arr<span class="token punctuation">[</span>min_index<span class="token punctuation">]</span> <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="æ’å…¥æ’åº"><a href="#æ’å…¥æ’åº" class="header-anchor">#</a> æ’å…¥æ’åº</h3> <blockquote><p>æ’å…¥æ’åºå’Œå†’æ³¡æ’åºä¸€æ ·æ˜¯å¯ä»¥è¢«è®¾è®¡æˆç¨³å®šçš„æ’åºç®—æ³• arr[j] &lt; arr[j-1] æ˜¯å…³é”®</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * @function æ’å…¥æ’åº
 * @param {*} arr
 */</span>
<span class="token keyword">function</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">let</span> isSwap<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    isSwap <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> i<span class="token punctuation">;</span> j <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// è¿­ä»£æ¯”è¾ƒçš„è¿‡ç¨‹</span>
        <span class="token keyword">let</span> tmp <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
        arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        arr<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="header-anchor">#</a> å¿«é€Ÿæ’åº</h3> <blockquote><p>å¯æ‰©å±•æ€§å¾ˆå¼ºï¼ŒåŸºæœ¬çš„ç­–ç•¥å°±æ˜¯é€‰å®šä¸€ä¸ªä¸­é—´å€¼ï¼Œå°†æ‰€æœ‰å°äºå®ƒçš„å…ƒç´ ç§»åŠ¨åˆ°ä¸­é—´å€¼å·¦è¾¹ï¼Œå°†æ‰€æœ‰å¤§äºå®ƒçš„å…ƒç´ ç§»åŠ¨åˆ°ä¸­é—´å€¼å³è¾¹ã€‚</p> <p>ç¨³å®šæ€§åˆ†æçš„å‚è€ƒé“¾æ¥ï¼šhttps://blog.csdn.net/gaoxueyi551/article/details/89413936</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * @function å¿«é€Ÿæ’åº
 * @param {*} arr
 * @example å‡è®¾æœ‰è¿™ä¹ˆä¸€ç§æç«¯æƒ…å†µ [1, 1, 1, 1, 1]
 * å¿«æ’ä¸ç¨³å®šçš„æ ¹æºåœ¨äºåŸºå‡†å…ƒç´ çš„é€‰å–
 */</span>
<span class="token keyword">function</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>left <span class="token operator">&gt;=</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> t <span class="token operator">=</span> arr<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">,</span>
    i <span class="token operator">=</span> left<span class="token punctuation">,</span>
    j <span class="token operator">=</span> right<span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> j <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      j<span class="token operator">--</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> j <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      i<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> t<span class="token punctuation">;</span>
  <span class="token function">sort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> left<span class="token punctuation">,</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">sort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// è°ƒç”¨çš„æ—¶å€™æ³¨æ„ä¼ å‚é—®é¢˜</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="å½’å¹¶æ’åº"><a href="#å½’å¹¶æ’åº" class="header-anchor">#</a> å½’å¹¶æ’åº</h3> <blockquote><p>ç¨³å®šçš„æ’åºç®—æ³•ï¼Œæ¯ä¸ªæ•°ç»„çš„ç›¸å¯¹é¡ºåºæ€»æ˜¯ä¼šä¿æŒçš„</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * @function å½’å¹¶æ’åº
 * @param {*} arr
 */</span>
<span class="token keyword">function</span> <span class="token function">mergeSort</span><span class="token punctuation">(</span><span class="token parameter">arr1<span class="token punctuation">,</span> arr2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>arr1<span class="token punctuation">.</span>length <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> arr2<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>arr2<span class="token punctuation">.</span>length <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> arr1<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> arr3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> arr1<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> j <span class="token operator">&lt;</span> arr2<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr2<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      arr3<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr1<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      arr3<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr2<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// æ³¨æ„æœ€åéœ€è¦å¯¹ slice åç»“æœè¿›è¡Œè§£æ„èµ‹å€¼</span>
  i <span class="token operator">&lt;</span> arr1<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> arr3<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>arr1<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  j <span class="token operator">&lt;</span> arr2<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> arr3<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>arr2<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> arr3<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å½“å·¦å³çš„å…ƒç´ éƒ½åªå‰©ä¸‹ä¸€ä¸ªçš„æ—¶å€™å¯ä»¥è¿›è¡Œåˆå¹¶æ“ä½œ</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> mid <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">mergeSort</span><span class="token punctuation">(</span><span class="token function">sort</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> mid<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">sort</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>mid<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h3 id="lazyman"><a href="#lazyman" class="header-anchor">#</a> LazyMan</h3> <blockquote><p>éš¾ç‚¹æœ‰</p> <ol><li>å®ç°é“¾å¼è°ƒç”¨ï¼Œæ¯ä¸ªå‡½æ•°éƒ½å¿…é¡»è¿”å› this å®ç°é“¾å¼è°ƒç”¨</li> <li>é˜Ÿåˆ—å­˜å‚¨ï¼Œå°†æ‰€æœ‰çš„ä»»åŠ¡éƒ½å­˜å‚¨åˆ°ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—å½“ä¸­</li> <li>å¼‚æ­¥è°ƒç”¨ï¼Œconstructor å†…éƒ¨ä½¿ç”¨å¼‚æ­¥è°ƒç”¨ä¿è¯åé¢çš„æ­¥éª¤å…¨éƒ¨æ‰§è¡Œå®Œ</li> <li>sleep çŠ¶æ€åŒºåˆ†ï¼Œæ˜¯é¦–ä¼‘çœ è¿˜æ˜¯è¯´æ™®é€šä¼‘çœ ï¼Œé¦–ä¼‘çœ çš„è¯éœ€è¦æŠŠé¦–ä¼‘çœ çš„ä»»åŠ¡æ”¾åˆ°ä»»åŠ¡é˜Ÿåˆ—çš„é˜Ÿå¤´</li></ol></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * @class å®ç° LazyMan
 * @description ä¸€ä¸ªå–å’Œæ‰§è¡Œçš„è¿‡ç¨‹
 */</span>

<span class="token comment">/*å®ç°ä¸€ä¸ªLazyManï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ–¹å¼è°ƒç”¨:
LazyMan(â€œHankâ€)è¾“å‡º:
Hi! This is Hank!

LazyMan(â€œHankâ€).sleep(10).eat(â€œdinnerâ€)è¾“å‡º
Hi! This is Hank!
//ç­‰å¾…10ç§’..
Wake up after 10
Eat dinner~

LazyMan(â€œHankâ€).eat(â€œdinnerâ€).eat(â€œsupperâ€)è¾“å‡º
Hi This is Hank!
Eat dinner~
Eat supper~

LazyMan(â€œHankâ€).eat(â€œsupperâ€).sleepFirst(5)è¾“å‡º
//ç­‰å¾…5ç§’
Wake up after 5
Hi This is Hank!
Eat supper*/</span>

<span class="token keyword">class</span> <span class="token class-name">LazyMan</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>tasks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">task</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hi! This is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>tasks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// ä½¿ç”¨å¼‚æ­¥çš„åŸå› æ˜¯å› ä¸ºå¯èƒ½åé¢æœ‰ sleep æˆ–è€… sleepFirst</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> task <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>task<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    task <span class="token operator">&amp;&amp;</span> <span class="token function">task</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_sleepWrapper</span><span class="token punctuation">(</span>time<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment">// å®ç°é“¾å¼è°ƒç”¨</span>
  <span class="token punctuation">}</span>
  <span class="token function">sleepFirst</span><span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_sleepWrapper</span><span class="token punctuation">(</span>time<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">_sleepWrapper</span><span class="token punctuation">(</span><span class="token parameter">time<span class="token punctuation">,</span> isFirst</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">task</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Wake up after </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>time<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ¯æ¬¡æ‰§è¡Œå®Œå°±è¯·æ±‚ä¸‹ä¸€æ¬¡çš„æ‰§è¡Œ</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> time <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isFirst<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>tasks<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>task<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">eat</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">task</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Eat </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>tasks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br></div></div><h3 id="é˜²æŠ–"><a href="#é˜²æŠ–" class="header-anchor">#</a> é˜²æŠ–</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">debounce</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay <span class="token operator">=</span> <span class="token number">3000</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// æ¯æ¬¡éƒ½é‡æ–°è®¡æ—¶</span>
    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// ç®­å¤´å‡½æ•°è§£å†³ this æŒ‡å‘é—®é¢˜ï¼Œä¸ç„¶æŒ‡å‘çš„æ˜¯ window</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// æˆ‘ä»¬å¯ä»¥è¿™æ ·å»ç†è§£ç«‹å³æ‰§è¡Œè¿™ä¸ªæ¦‚å¿µï¼Œç«‹å³æ‰§è¡Œå°±æ˜¯ç¬¬ä¸€æ¬¡è§¦å‘å°±ä¼šæ‰§è¡Œ</span>
<span class="token comment">// é‚£åé¢æ€ä¹ˆäº’æ–¥è¿™ä¸ªç«‹å³æ‰§è¡Œå‘¢ï¼Œæˆ‘ä»¬ä¼šåœ¨ setTimeout é‡Œé¢é‡ç½®ç«‹å³æ‰§è¡Œ</span>
<span class="token comment">// åªæœ‰å½“æ‰§è¡Œå®Œä¸€æ¬¡å®Œæ•´çš„ setTimeout ä»¥åæ‰èƒ½å¤Ÿé‡æ–°ç«‹å³æ‰§è¡Œ</span>
<span class="token comment">// ç”±å§‹è‡³ç»ˆå…¶å®éƒ½æ˜¯ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼Œç„¶å ns åå†è¿›è¡Œä¸‹ä¸€æ¬¡çš„å¤´è°ƒç”¨</span>
<span class="token keyword">var</span> <span class="token function-variable function">debounce</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay <span class="token operator">=</span> <span class="token number">3000</span><span class="token punctuation">,</span> immediate <span class="token operator">=</span> <span class="token boolean">false</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> args <span class="token operator">=</span> arguments<span class="token punctuation">,</span>
      context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// å› æ­¤è¿™é‡Œä¸èƒ½è¿›è¡Œç½® null çš„æ“ä½œ</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ä¸‹é¢å°±æ˜¯åˆ¤æ–­ immediate ä¸º true / false çš„æ“ä½œ</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>immediate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// è¦ä¹ˆæ˜¯è¿™ä¸ª</span>
      <span class="token comment">// æ¸…é™¤å®šæ—¶å™¨åå¯¹åº”çš„ timer æ˜¯å®šæ—¶å™¨çš„ id</span>
      <span class="token keyword">let</span> isCall <span class="token operator">=</span> <span class="token operator">!</span>timer<span class="token punctuation">;</span> <span class="token comment">// åˆ¤æ–­æ˜¯å¦èƒ½æ‰§è¡Œçš„å…³é”®</span>
      timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
      isCall <span class="token operator">&amp;&amp;</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// è¦ä¹ˆæ˜¯è¿™ä¸ª</span>
      timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h3 id="èŠ‚æµ"><a href="#èŠ‚æµ" class="header-anchor">#</a> èŠ‚æµ</h3> <h3 id="ç‰ˆæœ¬å·æ¯”è¾ƒ"><a href="#ç‰ˆæœ¬å·æ¯”è¾ƒ" class="header-anchor">#</a> ç‰ˆæœ¬å·æ¯”è¾ƒ</h3> <blockquote><p>é¢˜ç›®æè¿°:æœ‰ä¸€ç»„ç‰ˆæœ¬å·å¦‚ä¸‹['0.1.1', '2.3.3', '0.302.1', '4.2', '4.3.5', '4.3.4.5']ã€‚ç°åœ¨éœ€è¦å¯¹å…¶è¿›è¡Œæ’åºï¼Œæ’åºçš„ç»“æœä¸º ['4.3.5','4.3.4.5','2.3.3','0.302.1','0.1.1']</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> arr_1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;0.1.1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2.3.3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;0.302.1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;4.2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;4.3.5&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;4.3.4.5&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> res <span class="token operator">=</span> arr_1<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> item1 <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> item2 <span class="token operator">=</span> b<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> item1<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>item1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> item2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>item1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> item2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> item2<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><blockquote><p>é¡ºä¾¿å›é¡¾äº†ä¸‹ Array.prototype.sort çš„å†…å®¹ï¼Œsort æ”¯æŒæˆ‘ä»¬ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯ a ä¸€ä¸ªæ˜¯ bï¼Œå¦‚æœ a - b &lt; 0 çš„è¯é‚£ä¹ˆæœ€å a ä¼šåœ¨ b å‰é¢ï¼Œå¦‚æœ a - b = 0 é‚£ä¹ˆç›¸å¯¹çš„ä½ç½®ä¸å‘ç”Ÿæ”¹å˜ï¼Œå¦‚æœ a - b &gt; 0 ï¼Œé‚£ä¹ˆ a ä¼šæ’åœ¨ b çš„åé¢</p></blockquote> <h3 id="lru-ç®—æ³•"><a href="#lru-ç®—æ³•" class="header-anchor">#</a> LRU ç®—æ³•</h3> <blockquote><p>LRU æ˜¯é€šè¿‡åŒå‘é“¾è¡¨å’Œå“ˆå¸Œè¡¨æ¥å®ç°å…ƒç´ çš„å‡ºå…¥çš„</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * @class åŸºäº Map ç»“æ„å®ç° LRU ç®—æ³•
 * @description åŸºäºå“ˆå¸Œè¡¨çš„æŸ¥æ‰¾å’Œåˆ é™¤çš„çº¿æ€§æ—¶é—´å¤æ‚åº¦
 */</span>

<span class="token keyword">class</span> <span class="token class-name">LRUCache</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">capacity</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>secretKey <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>capacity <span class="token operator">=</span> capacity<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>secretKey<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> tempValue <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>secretKey<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>secretKey<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>secretKey<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> tempValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;get keys:&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>secretKey<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> tempValue<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">put</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// keyå­˜åœ¨ï¼Œä»…ä¿®æ”¹å€¼</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>secretKey<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>secretKey<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>secretKey<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// keyä¸å­˜åœ¨ï¼Œcacheæœªæ»¡</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>secretKey<span class="token punctuation">.</span>size <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>capacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>secretKey<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// æ·»åŠ æ–°keyï¼Œåˆ é™¤æ—§key</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>secretKey<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// åˆ é™¤mapçš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå³ä¸ºæœ€é•¿æœªä½¿ç”¨çš„</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;put keys:&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>secretKey<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>secretKey<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>secretKey<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><h3 id="ç¡¬å¸æ‰¾é›¶"><a href="#ç¡¬å¸æ‰¾é›¶" class="header-anchor">#</a> ç¡¬å¸æ‰¾é›¶</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * @function ç¡¬å¸æ‰¾é›¶
 * @param {*} coins
 * @param {*} account
 * @description dpæ•°ç»„çš„å®šä¹‰ dp[i] æ€»å€¼ä¸º içš„æ¬¾é¡¹éœ€è¦çš„æœ€å°å‡‘æ¬¡æ•°
 */</span>
<span class="token keyword">function</span> <span class="token function">caluCoin</span><span class="token punctuation">(</span><span class="token parameter">coins<span class="token punctuation">,</span> account</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å…¸å‹çš„èƒŒåŒ…é—®é¢˜</span>
  <span class="token keyword">const</span> dp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> account<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">Infinity</span><span class="token punctuation">;</span> <span class="token comment">// ç½®ä¸ºæ— ç©·æ–¹ä¾¿æ¯”è¾ƒ</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> coins<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> coins<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> coins<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isFinite</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>account<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> dp<span class="token punctuation">[</span>account<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="ç±»æ•°ç»„è½¬æ•°ç»„çš„æ–¹æ³•"><a href="#ç±»æ•°ç»„è½¬æ•°ç»„çš„æ–¹æ³•" class="header-anchor">#</a> ç±»æ•°ç»„è½¬æ•°ç»„çš„æ–¹æ³•</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// æ‰©å±•è¿ç®—</span>
<span class="token punctuation">[</span><span class="token operator">...</span>arraylike<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// Array.from</span>
Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>arraylike<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// åŸå‹</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arraylike<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> arraylike<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="ä½¿ç”¨-xmlhttprequest-å®ç°-ajax"><a href="#ä½¿ç”¨-xmlhttprequest-å®ç°-ajax" class="header-anchor">#</a> ä½¿ç”¨ XMLHttpRequest å®ç° AJAX</h3> <blockquote><p>MDN ä»‹ç»ï¼šhttps://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/open</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">ajax</span><span class="token punctuation">(</span><span class="token parameter">method<span class="token punctuation">,</span> params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// true ä»£è¡¨çš„æ˜¯å¼‚æ­¥</span>
    xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è®¾ç½®è¯·æ±‚å¤´</span>
    xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Type&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;application/json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readystate <span class="token operator">!=</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span> <span class="token operator">||</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">304</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// get æˆ–è€… head è¯·æ±‚åº”è¯¥ç½®ä¸º null</span>
    xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="å®ç°æ¨¡æ¿å­—ç¬¦ä¸²è§£æåŠŸèƒ½"><a href="#å®ç°æ¨¡æ¿å­—ç¬¦ä¸²è§£æåŠŸèƒ½" class="header-anchor">#</a> å®ç°æ¨¡æ¿å­—ç¬¦ä¸²è§£æåŠŸèƒ½</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/*
let template = 'æˆ‘æ˜¯{{name}}ï¼Œå¹´é¾„{{age}}ï¼Œæ€§åˆ«{{sex}}';
let data = {
  name: 'å§“å',
  age: 18
}
render(template, data); æˆ‘æ˜¯å§“åï¼Œå¹´é¾„18ï¼Œæ€§åˆ«undefined
*/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">template<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\{\{([a-z]+)\}\}</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> str <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// - ä»£è¡¨çš„æ˜¯åŒ¹é…å®Œæ•´çš„å­—ç¬¦ä¸² {{name}} {{age}}</span>
    <span class="token comment">// args ä»£è¡¨çš„æ˜¯å†…éƒ¨çš„å˜é‡ name, age</span>
    <span class="token keyword">return</span> data<span class="token punctuation">[</span>args<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> str<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="åˆ—è¡¨è½¬æ ‘å½¢ç»“æ„"><a href="#åˆ—è¡¨è½¬æ ‘å½¢ç»“æ„" class="header-anchor">#</a> åˆ—è¡¨è½¬æ ‘å½¢ç»“æ„</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/*
[
    {
        id: 1,
        text: 'èŠ‚ç‚¹1',
        parentId: 0 //è¿™é‡Œç”¨0è¡¨ç¤ºä¸ºé¡¶çº§èŠ‚ç‚¹
    },
    {
        id: 2,
        text: 'èŠ‚ç‚¹1_1',
        parentId: 1 //é€šè¿‡è¿™ä¸ªå­—æ®µæ¥ç¡®å®šå­çˆ¶çº§
    }
    ...
]

è½¬æˆ
[
    {
        id: 1,
        text: 'èŠ‚ç‚¹1',
        parentId: 0,
        children: [
            {
                id:2,
                text: 'èŠ‚ç‚¹1_1',
                parentId:1
            }
        ]
    }
]
*/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h3 id="åˆ¤æ–­å¾ªç¯å¼•ç”¨"><a href="#åˆ¤æ–­å¾ªç¯å¼•ç”¨" class="header-anchor">#</a> åˆ¤æ–­å¾ªç¯å¼•ç”¨</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token keyword">function</span> <span class="token function">isCycle</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> hasCycle <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">function</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
      keys<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> val <span class="token operator">=</span> obj<span class="token punctuation">[</span>item<span class="token punctuation">]</span>
          <span class="token keyword">if</span><span class="token punctuation">(</span>val <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> val <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// æ˜¯å¯¹è±¡æ‰å¯èƒ½å­˜åœ¨å¾ªç¯å¼•ç”¨çš„æƒ…å†µ</span>
              <span class="token keyword">if</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  hasCycle <span class="token operator">=</span> <span class="token boolean">true</span>
                  <span class="token keyword">return</span>
              <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                  map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> val<span class="token punctuation">)</span>
                  <span class="token function">loop</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token comment">// å› ä¸ºå¯èƒ½å­˜åœ¨å¤šä¸ªå¯¹è±¡åµŒå¥—çš„æƒ…å†µ -- éœ€è¦é€’å½’è°ƒç”¨</span>
              <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">loop</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>

  <span class="token keyword">return</span> hasCycle
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="å¯¹è±¡-æ•°ç»„å®½æ¾æ¯”è¾ƒ"><a href="#å¯¹è±¡-æ•°ç»„å®½æ¾æ¯”è¾ƒ" class="header-anchor">#</a> å¯¹è±¡ / æ•°ç»„å®½æ¾æ¯”è¾ƒ</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/* vue2 å†…éƒ¨çš„åˆ¤æ–­å‡½æ•° */</span>
<span class="token comment">/* åœ¨åŸç†çš„åŸºç¡€ä¸Šå¢åŠ äº† set ã€mapã€date çš„ loose equal */</span>
<span class="token keyword">function</span> <span class="token function">looseEqualUpper</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">===</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
  <span class="token keyword">var</span> isObjectA <span class="token operator">=</span> <span class="token function">isObject</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> isObjectB <span class="token operator">=</span> <span class="token function">isObject</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>isObjectA <span class="token operator">&amp;&amp;</span> isObjectB<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> typeA <span class="token operator">=</span> <span class="token function">toRawType</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span> typeB <span class="token operator">=</span> <span class="token function">toRawType</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token comment">// å€Ÿç”¨ä¸Šè¿°å¾—åˆ°æºç±»å‹çš„æ–¹æ³•</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>typeA <span class="token operator">==</span> <span class="token string">'Array'</span> <span class="token operator">&amp;&amp;</span> typeB <span class="token operator">==</span> <span class="token string">'Array'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// Array</span>
          <span class="token comment">// Array.prototype.every() - é‡åˆ°false è¿”å›false,å¦åˆ™è¿”å›tru</span>
        <span class="token keyword">return</span> a<span class="token punctuation">.</span>length <span class="token operator">===</span> b<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token function">looseEqual</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> b<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token keyword">instanceof</span> <span class="token class-name">Date</span> <span class="token operator">&amp;&amp;</span> b <span class="token keyword">instanceof</span> <span class="token class-name">Date</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// Date</span>
        <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> b<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>typeA <span class="token operator">==</span> <span class="token string">'Set'</span> <span class="token operator">&amp;&amp;</span> typeB <span class="token operator">==</span> <span class="token string">'Set'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// Set</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'===Set==='</span><span class="token punctuation">)</span>
          <span class="token keyword">const</span> keysA <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> keysB <span class="token operator">=</span> b<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

          <span class="token keyword">if</span><span class="token punctuation">(</span>keysA<span class="token punctuation">.</span>length <span class="token operator">===</span> keysB<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> itemA <span class="token keyword">of</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// å¦‚æœæ˜¯åŸºäºæ— é¡ºåºéƒ½è¦éªŒè¯ç›¸ç­‰æ€§çš„è¯</span>
                <span class="token keyword">let</span> tmp <span class="token operator">=</span> <span class="token number">0</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> itemB <span class="token keyword">of</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">looseEqualUpper</span><span class="token punctuation">(</span>itemA<span class="token punctuation">,</span> itemB<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">break</span> <span class="token punctuation">}</span>
                  <span class="token keyword">else</span> tmp<span class="token operator">++</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>tmp <span class="token operator">===</span> keysA<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>
              <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">return</span> <span class="token boolean">true</span>


      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>typeA <span class="token operator">==</span> <span class="token string">'Map'</span> <span class="token operator">&amp;&amp;</span> typeB <span class="token operator">==</span> <span class="token string">'Map'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// Map</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'===Map==='</span><span class="token punctuation">)</span>
          <span class="token keyword">const</span> keysA <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> keysB <span class="token operator">=</span> b<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

          <span class="token keyword">if</span><span class="token punctuation">(</span>keysA<span class="token punctuation">.</span>length <span class="token operator">===</span> keysB<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> keysA<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span> <span class="token function">looseEqualUpper</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">,</span> b<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>

        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isArrayA <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>isArrayB<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// Object</span>
          <span class="token keyword">var</span> keysA <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">var</span> keysB <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>

          <span class="token comment">// é”®å€¼åˆ—è¡¨é•¿åº¦ &amp; æ¯ä¸ªé”®å€¼</span>
          <span class="token keyword">return</span> keysA<span class="token punctuation">.</span>length <span class="token operator">===</span> keysB<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> keysA<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">looseEqual</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> b<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// åŒæ ·å­˜åœ¨é”®å€¼æ˜¯å¯¹è±¡éœ€è¦é€’å½’åˆ¤æ–­</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isObjectA <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>isObjectB<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// åŸºæœ¬å€¼çš„åˆ¤æ–­</span>
    <span class="token keyword">return</span> <span class="token function">String</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token function">String</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>xxxxxxxxxx <span class="token keyword">function</span> <span class="token function">isLooseEqual</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">/* vue2 å†…éƒ¨çš„åˆ¤æ–­å‡½æ•° */</span><span class="token keyword">function</span> <span class="token function">looseEqualUpper</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">===</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>  <span class="token keyword">var</span> isObjectA <span class="token operator">=</span> <span class="token function">isObject</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">var</span> isObjectB <span class="token operator">=</span> <span class="token function">isObject</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>isObjectA <span class="token operator">&amp;&amp;</span> isObjectB<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>      <span class="token keyword">let</span> typeA <span class="token operator">=</span> <span class="token function">toRawType</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span> typeB <span class="token operator">=</span> <span class="token function">toRawType</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token comment">// å€Ÿç”¨ä¸Šè¿°å¾—åˆ°æºç±»å‹çš„æ–¹æ³•      if (typeA == 'Array' &amp;&amp; typeB == 'Array') { // Array        return a.length === b.length &amp;&amp; a.every(function (e, i) {          return looseEqual(e, b[i])        })      } else if (a instanceof Date &amp;&amp; b instanceof Date) { // Date        return a.getTime() === b.getTime()      } else if(typeA == 'Set' &amp;&amp; typeB == 'Set') { // Set          console.log('===Set===')          const keysA = a.keys(), keysB = b.keys()          if(keysA.length === keysB.length) {               for(let itemA of a) { // å¦‚æœæ˜¯åŸºäºæ— é¡ºåºéƒ½è¦éªŒè¯ç›¸ç­‰æ€§çš„è¯                let tmp = 0                for(let itemB of b) {                  if(looseEqualUpper(itemA, itemB)) { break }                  else tmp++                }                if(tmp === keysA.length) { return false }              }          }           return true       } else if(typeA == 'Map' &amp;&amp; typeB == 'Map') { // Map          console.log('===Map===')          const keysA = a.keys(), keysB = b.keys()                    if(keysA.length === keysB.length) {            for(let item of keysA) {              return looseEqualUpper(a.get(item), b.get(item))            }          } else { return false }        } else if (!isArrayA &amp;&amp; !isArrayB) { // Object          var keysA = Object.keys(a);          var keysB = Object.keys(b);                    // é”®å€¼åˆ—è¡¨é•¿åº¦ &amp; æ¯ä¸ªé”®å€¼          return keysA.length === keysB.length &amp;&amp; keysA.every(function (key) {            return looseEqual(a[key], b[key]) // åŒæ ·å­˜åœ¨é”®å€¼æ˜¯å¯¹è±¡éœ€è¦é€’å½’åˆ¤æ–­          })      }             else {        return false      }    } catch (e) {      return false    }  } else if (!isObjectA &amp;&amp; !isObjectB) {// åŸºæœ¬å€¼çš„åˆ¤æ–­    return String(a) === String(b)  } else {    return false  }}}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br></div></div><h2 id="vue-åŸç†å®ç°"><a href="#vue-åŸç†å®ç°" class="header-anchor">#</a> Vue åŸç†å®ç°</h2> <blockquote><p>å“åº”æ€§åŸç†</p></blockquote> <p>Vue åŒå‘ç»‘å®šåŸç†</p> <p>åŒå‘ç»‘å®šå»ºç«‹åœ¨ MVVM çš„æ¨¡å‹åŸºç¡€ä¸Šã€‚</p> <ul><li>æ¨¡å‹å±‚åº”ç”¨çš„æ•°æ®åŠä¸šåŠ¡é€»è¾‘</li> <li>è§†å›¾å±‚åº”ç”¨çš„å±•ç¤ºæ•ˆæœï¼Œå„ç±» UI ç»„ä»¶</li> <li>ä¸šåŠ¡é€»è¾‘å±‚ï¼Œè´Ÿè´£å°†æ•°æ®å’Œè§†å›¾å…³è”èµ·æ¥</li></ul> <p>åŒå‘ç»‘å®šæŒ‡çš„æ˜¯</p> <ol><li>æ•°æ®å˜åŒ–åæ›´æ–°è§†å›¾</li> <li>è§†å›¾å˜åŒ–åæ›´æ–°æ•°æ®</li></ol> <p>Vue å®ç°ä¸­ä¸¤ä¸ªä¸»è¦ç»„æˆéƒ¨åˆ†</p> <ul><li>ç›‘å¬å™¨ Observerï¼šå¯¹æ‰€æœ‰å±æ€§è¿›è¡Œç›‘å¬</li> <li>è§£æå™¨ Compilerï¼Œå¯¹æ¯ä¸ªå…ƒç´ èŠ‚ç‚¹çš„æŒ‡ä»¤è¿›è¡Œæ‰«æå’Œè§£æï¼Œæ ¹æ®æŒ‡ä»¤æ›¿æ¢æ•°æ®ï¼Œç»‘å®šå¯¹åº”çš„æ›´æ–°å‡½æ•°</li></ul> <p>å…·ä½“çš„å®ç°åŸç†</p> <ol><li>new Vue æ‰§è¡Œåˆå§‹åŒ–ï¼Œå°† data ä¸­æ•°æ®é€šè¿‡ Object.defineProperty è¿›è¡Œå“åº”åŒ–å¤„ç†ï¼Œè¿‡ç¨‹å‘ç”Ÿåœ¨ Observer é‡Œé¢ï¼Œæ¯ä¸ª key éƒ½ä¼šä¸€ä¸ª dep å®ä¾‹æ¥å­˜å‚¨ watcher å®ä¾‹æ•°ç»„</li> <li>å¯¹æ¨¡ç‰ˆè¿›è¡Œç¼–è¯‘æ—¶ï¼Œæ‰¾åˆ°åŠ¨æ€ç»‘å®šæ•°æ®ï¼Œä» data ä¸­è·å–æ•°æ®å¹¶åˆå§‹åŒ–è§†å›¾ï¼Œè¿™ä¸ªè¿‡ç¨‹å‘ç”Ÿåœ¨ Complierï¼Œå¦‚æœé‡åˆ°äº† v-modelï¼Œ å°±ç›‘å¬ input äº‹ä»¶ï¼Œæ›´æ–° data å¯¹åº”çš„æ•°å€¼</li> <li>åœ¨è§£ææŒ‡ä»¤çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå®šä¹‰å¯¹åº”çš„æ›´æ–°å‡½æ•°å’Œ watcherï¼Œä¹‹åå¯¹åº”çš„æ•°æ®å˜åŒ–æ—¶ï¼Œwatcher ä¼šè°ƒç”¨æ›´æ–°å‡½æ•°ï¼Œwatcher è¯»å– data çš„ keyï¼Œè§¦å‘ getter çš„ä¾èµ–æœºåˆ¶ï¼Œå°†å¯¹åº”çš„ watcher æ·»åŠ åˆ° dep é‡Œ</li> <li>data æ•°æ®ä¸€æ—¦å‘ç”Ÿå˜åŒ–ï¼Œä¼šæ‰¾åˆ°å¯¹åº”çš„ depï¼Œé€šçŸ¥æ‰€æœ‰çš„ watcher æ‰§è¡Œæ›´æ–°å‡½æ•°</li></ol> <h3 id="parsepath"><a href="#parsepath" class="header-anchor">#</a> parsePath</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * @function è§£æå½¢å¦‚b.a.cè¿”å›å€¼
 */</span>
<span class="token keyword">const</span> bailRE <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;/[^\\w.$]/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">parsePath</span><span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ä¿è¯ä¸å‡ºç°å‡º a-zA-Z0-9_$å¤–çš„å…¶ä»–å­—ç¬¦</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>bailRE<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> segments <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è§£æ</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> segments<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>obj<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
      obj <span class="token operator">=</span> obj<span class="token punctuation">[</span>segments<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="reactive-åŸºäºå¯¹è±¡"><a href="#reactive-åŸºäºå¯¹è±¡" class="header-anchor">#</a> reactive - åŸºäºå¯¹è±¡</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * @function å“åº”å¼
 * @param {*} obj
 */</span>

<span class="token keyword">const</span> <span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">SET key=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> val=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>val<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">defineReactive</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// é€’å½’çš„æ“ä½œ</span>
  <span class="token function">reactive</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Object.definePropert ç›‘å¬</span>
  Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> val<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">set</span><span class="token punctuation">(</span>newVal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>val <span class="token operator">===</span> newVal<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
      val <span class="token operator">=</span> newVal<span class="token punctuation">;</span>
      <span class="token function">render</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> newVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">reactive</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">defineReactive</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// å®ç°çš„ç›®çš„æ˜¯è°ƒç”¨ reactive(data) ä»è€Œå®ç°å¯¹æ•´ä¸ª data å¯¹è±¡çš„ä¸€ä¸ªç›‘å¬</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">c1</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">af</span><span class="token operator">:</span> <span class="token number">900</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">c2</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><h3 id="reactive-åŸºäºæ•°ç»„"><a href="#reactive-åŸºäºæ•°ç»„" class="header-anchor">#</a> reactive - åŸºäºæ•°ç»„</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * @function æ¨¡ä»¿Vueé‡å†™æ•°ç»„åŸå‹ä¸Šçš„æ–¹æ³•
 */</span>

<span class="token keyword">const</span> <span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">methods<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Action </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>methods<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> arg=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>args<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> arrPrototype <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span> <span class="token comment">// ä¿å­˜åŸæ¥æ•°ç»„åŸå‹</span>
<span class="token keyword">const</span> newArrayPrototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>arrPrototype<span class="token punctuation">)</span><span class="token punctuation">[</span>
  <span class="token punctuation">(</span><span class="token string">&quot;push&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pop&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;shift&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;unshift&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sort&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;splice&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;reverse&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">methodname</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  newArrayPrototype<span class="token punctuation">[</span>methodname<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ‰§è¡ŒåŸæœ‰çš„æ•°ç»„æ–¹æ³•</span>
    arrPrototype<span class="token punctuation">[</span>methodname<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è§¦å‘æ¸²æŸ“</span>
    <span class="token function">render</span><span class="token punctuation">(</span>methodname<span class="token punctuation">,</span> <span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">reactive</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    obj__proto__ <span class="token operator">=</span> newArrayPrototype<span class="token punctuation">;</span> <span class="token comment">// æ›´æ”¹åŸå‹é“¾</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="proxy"><a href="#proxy" class="header-anchor">#</a> proxy</h3> <blockquote><p>QU proxy èƒ½å¤Ÿå¯¹æ·±å±‚å¯¹è±¡è¿›è¡Œç›‘å¬å—ï¼Ÿä¸ä¸‹é¢çš„é€’å½’åˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * ç®€å•å®ç° proxy å“åº”å¼
 */</span>

<span class="token keyword">let</span> observeStore <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">makeObservable</span><span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> handlername <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;handler&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  observeStore<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>handlername<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ³¨å†Œå¤šä¸ªå›è°ƒå‡½æ•°</span>

  <span class="token comment">// åŠ å…¥å›è°ƒå‡½æ•°</span>
  target<span class="token punctuation">.</span><span class="token function-variable function">observe</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    observeStore<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>handlername<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// è®¾ç½®æ‹¦æˆªé…ç½®</span>
  <span class="token keyword">const</span> proxyHandler <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// å¦‚æœå½“å‰å­˜åœ¨åµŒå¥—å±‚çº§çš„å¯¹è±¡</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">&amp;&amp;</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> proxyHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">let</span> success <span class="token operator">=</span> Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
      success <span class="token operator">&amp;&amp;</span>
        observeStore
          <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>handlername<span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">handler</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">handler</span><span class="token punctuation">(</span><span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> success<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> newVal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> success <span class="token operator">=</span> Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
      success <span class="token operator">&amp;&amp;</span>
        observeStore
          <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>handlername<span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">handler</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">handler</span><span class="token punctuation">(</span><span class="token string">&quot;set&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> success<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">deleteProperty</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> success <span class="token operator">=</span> Reflect<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
      success <span class="token operator">&amp;&amp;</span>
        observeStore
          <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>handlername<span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">handler</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">handler</span><span class="token punctuation">(</span><span class="token string">&quot;delete&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> success<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> proxyHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
user <span class="token operator">=</span> <span class="token function">makeObservable</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å°† user å˜ä¸ºå“åº”å¼å¯¹è±¡</span>

<span class="token comment">// observe å›è°ƒåœ¨æ•°æ®å‘ç”Ÿæ”¹å˜çš„æ—¶å€™æ‰§è¡Œå›è°ƒå‡½æ•° - æ³¨æ„å¯èƒ½æ³¨å†Œäº†å¾ˆå¤šå›è°ƒå‡½æ•°</span>
user<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">action<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// æ‰§è¡Œå“åº”</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div><hr> <p>è™šæ‹Ÿ DOM æ˜¯ å¯¹äºçœŸå® DOM çš„æŠ½è±¡ï¼Œæœ¬è´¨ä¸Šæ˜¯ JS å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡æ¸²æŸ“å™¨è§£ææ˜ å°„åˆ°çœŸå® DOM ä¸Š</p> <p>ä»ä¼˜ç‚¹æ¥è¯´</p> <ol><li>ç›¸å¯¹äºçœŸå® DOM æ¥è¯´ï¼Œæ“ä½œçš„å±æ€§æ¯”è¾ƒå°‘</li> <li>ä¸éœ€è¦æ‰‹åŠ¨æ“ä½œ DOM</li> <li>å¯ä»¥è·¨å¹³å°(åŸºäºæœ¬è´¨æ˜¯ JS å¯¹è±¡)</li></ol> <p>ä»ç¼ºç‚¹æ¥è¯´</p> <ol><li>é¦–æ¬¡æ¸²æŸ“å¤§é‡ DOM çš„æ—¶å€™ï¼Œç”±äºå¤šäº†ä¸€å±‚è™šæ‹Ÿ DOM çš„è®¡ç®—ï¼Œä¼šæ¯” innerHTML æ’å…¥é€Ÿåº¦æ…¢</li> <li>åšä¸€äº›é’ˆå¯¹æ€§çš„ä¼˜åŒ–çš„æ—¶å€™ï¼ŒçœŸçš„ DOM çš„æ“ä½œè¿˜æ˜¯æ›´å¿«ä¸€ç‚¹</li></ol> <h3 id="è™šæ‹Ÿ-dom-è½¬-çœŸå®-dom"><a href="#è™šæ‹Ÿ-dom-è½¬-çœŸå®-dom" class="header-anchor">#</a> è™šæ‹Ÿ DOM è½¬ çœŸå® DOM</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">'DIV'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">attrs</span><span class="token operator">:</span><span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span><span class="token string">'app'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">'SPAN'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">'SPAN'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token comment">// æŠŠä¸Šè¯‰è™šæ‹ŸDomè½¬åŒ–æˆä¸‹æ–¹çœŸå®Dom</span>
<span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>a<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>a<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>a<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">vnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// é˜²æ­¢é€’å½’è¿‡ç¨‹ä¸­å‡ºç° number ç±»å‹çš„æ•°æ®</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> vnode <span class="token operator">===</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    vnode <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>vnode<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> vnode <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// åˆ›å»ºå†…å®¹/æ–‡æœ¬èŠ‚ç‚¹</span>
    <span class="token keyword">return</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>vnode<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// åˆ›å»ºèŠ‚ç‚¹</span>
  <span class="token keyword">const</span> realDom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>tag<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// å±æ€§èµ‹å€¼</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>attrs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> attrs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      realDom<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> vnode<span class="token punctuation">.</span>attrs<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// éå†åˆ¤æ–­æ˜¯å¦å­˜åœ¨å­ç»“ç‚¹</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    vnode<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">childNode</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      realDom<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token function">render</span><span class="token punctuation">(</span>childNode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> realDom<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="nexttick"><a href="#nexttick" class="header-anchor">#</a> nextTick</h3> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ number }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleClick<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>click<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">number</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>number<span class="token operator">++</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>âš ï¸ åƒä¸Šé¢è¿™ç§æƒ…å†µä¸€æ ·ï¼Œå¦‚æœ Vue ä¸åšå¤„ç†çš„è¯è§†å›¾ä¼šåœ¨æ¯æ¬¡ this.number ++ åæ›´æ–°ï¼Œå¯¼è‡´æ›´æ–°çš„æ¬¡æ•°ä¸º 1000 æ¬¡ï¼Œè¿™å¯¹æ€§èƒ½æ¥è¯´æ˜¯éå¸¸ä¸å¥½çš„ã€‚æ‰€ä»¥ Vue çš„å¤„ç†æ–¹å¼æ˜¯å°†å¯¹åº”çš„ Watcher push è¿›å…¥ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œåœ¨ä¸€å®šçš„æ—¶æœºåå†ç»Ÿä¸€è¿›è¡Œæ›´æ–°ã€‚è¿™é‡Œçš„æ—¶æœºæŒ‡çš„æ˜¯ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯ï¼Œä¹Ÿå°±æ˜¯åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆä¸ºç©ºçš„æ—¶å€™æ‰è¿›è¡Œæ›´æ–°æ“ä½œã€‚å¯¹äºä¸Šé¢çš„ä»£ç æ¥è¯´ï¼Œæ‰§è¡Œçš„æ—¶æœºæ˜¯ for å¾ªç¯ 1000 æ¬¡ä»¥åï¼Œå› ä¸ºè¿™ä¸ªé˜Ÿåˆ—ä¼šå»é‡ï¼Œæ‰€ä»¥æœ€ååªæœ‰ä¸€ä¸ª Watcherï¼Œç„¶åå†è°ƒç”¨ update æ–¹æ³•å»æ›´æ–°è§†å›¾ã€‚</p> <p>ğŸŒŸ nextTick çš„å®ç°å…¶å®å°±æ˜¯ç”¨åˆ°äº†äº‹ä»¶å¾ªç¯ï¼Œä½¿ç”¨å½¢å¦‚ Promise / setTimeout / MutationObserve ç­‰æ–¹å¼å»åŒ…è£…ã€‚æºç é‡Œé¢å°±é’ˆå¯¹æµè§ˆå™¨æ”¯æŒå„ç§ API çš„ç¨‹åº¦å†™äº†ä¸€ä¸ªç­–ç•¥å‡½æ•°ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ç®€å•æ¨¡æ‹Ÿä¸€ä¸‹</span>
<span class="token keyword">const</span> queue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// å­˜æ”¾å›è°ƒå‡½æ•°åˆ—è¡¨</span>
<span class="token keyword">let</span> pending <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// äº’æ–¥å˜é‡ åŒä¸€æ—¶é—´åªèƒ½æ‰§è¡Œä¸€æ¬¡</span>

<span class="token keyword">function</span> <span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>pending<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    pending <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span>flushCallbacks<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// æ‰§è¡Œæ‰€æœ‰çš„ callbacks å‡½æ•°</span>
<span class="token keyword">function</span> <span class="token function">flushCallbacks</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  pending <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> copies <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  queue<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> copies<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    copies<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>âš ï¸ ä¸Šé¢åªæ˜¯æŠŠ callback åŠ è¿›å» queue é‡Œé¢äº†å¯¹å§æˆ‘ä»¬è¿˜æ²¡æœ‰è¿›è¡Œå»é‡çš„æ“ä½œï¼Œæ‰€ä»¥è¿˜éœ€è¦å¯¹ç›¸åŒçš„ watch è¿›è¡Œå»é‡ï¼Œä¸€ä¸ªå®ç°çš„æ€è·¯å°±æ˜¯é€šè¿‡ä¸€ä¸ª uid æ ‡è¯†ä¸åŒçš„ watcherï¼Œå¦‚æœæ˜¯ç›¸åŒ uid çš„ watcher é‚£ä¹ˆå°±ä¸å†åŠ å…¥åˆ°é‡Œé¢å»äº†ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> uid <span class="token operator">=</span> <span class="token number">0</span>

<span class="token keyword">class</span> <span class="token class-name">Watcher</span> <span class="token punctuation">{</span>
	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token operator">++</span>uid
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></div> <footer class="page-edit page-editor"><div class="edit-link"><a href="https://github.com/jzyismylover/ubuntu-markdown/edit/docs/fronted/javascript/javascript.md" target="_blank" rel="noopener noreferrer">å®Œå–„é¡µé¢</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">æœ€è¿‘æ›´æ–°:</span> <span class="time">3/17/2024, 9:24:20 AM</span></div></footer> <div class="page-nav page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/markdown/es6/" class="prev">
        ES6
      </a></span> <span class="next"><a href="/markdown/typescript/">
        Typescript
      </a>
      â†’
    </span></p></div></div> <div class="toc-container-sidebar"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="max-height:86vh"><div style="font-weight:bold;">JS åŸºç¡€</div> <hr> <div class="toc-box"><ul class="toc-sidebar-links"><li><a href="/markdown/javascript/#js-ä½œç”¨åŸŸ" class="toc-sidebar-link">ğŸ˜‰ JS ä½œç”¨åŸŸ</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#é™æ€ä½œç”¨åŸŸ" class="toc-sidebar-link">é™æ€ä½œç”¨åŸŸ</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#åŠ¨æ€ä½œç”¨åŸŸ" class="toc-sidebar-link">åŠ¨æ€ä½œç”¨åŸŸ</a></li></ul></li><li><a href="/markdown/javascript/#ä»£ç†" class="toc-sidebar-link">ğŸ˜‰ ä»£ç†</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/markdown/javascript/#object-å¯¹è±¡" class="toc-sidebar-link">ğŸ’› Object å¯¹è±¡</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#object-assign" class="toc-sidebar-link">Object.assign</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/markdown/javascript/#æµ…æ‹·è´ç‰¹æ€§" class="toc-sidebar-link">æµ…æ‹·è´ç‰¹æ€§</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#å¯¹è±¡çš„æšä¸¾" class="toc-sidebar-link">å¯¹è±¡çš„æšä¸¾</a></li></ul></li><li><a href="/markdown/javascript/#localstorage-å®‰å…¨åˆ†æ" class="toc-sidebar-link">ğŸ‘¹ LocalStorage å®‰å…¨åˆ†æ</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/markdown/javascript/#web-å¸¸è§æ”»å‡»" class="toc-sidebar-link">ğŸ˜‰ web å¸¸è§æ”»å‡»</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/markdown/javascript/#bigint" class="toc-sidebar-link">ğŸ†— BigInt</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/markdown/javascript/#ç±»å‹è½¬æ¢" class="toc-sidebar-link">â­ï¸ ç±»å‹è½¬æ¢</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/markdown/javascript/#å‡½æ•°" class="toc-sidebar-link">ğŸ˜— å‡½æ•°</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/markdown/javascript/#é—­åŒ…" class="toc-sidebar-link">ğŸ˜† é—­åŒ…</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/markdown/javascript/#this" class="toc-sidebar-link">ğŸ“„ this</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/markdown/javascript/#å†…å­˜ç®¡ç†" class="toc-sidebar-link">â“ å†…å­˜ç®¡ç†</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#å†…å­˜æœºåˆ¶" class="toc-sidebar-link">å†…å­˜æœºåˆ¶</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#å†…å­˜å›æ”¶" class="toc-sidebar-link">å†…å­˜å›æ”¶</a></li></ul></li><li><a href="/markdown/javascript/#äº‹ä»¶å¾ªç¯" class="toc-sidebar-link">âœ´ï¸ äº‹ä»¶å¾ªç¯</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/markdown/javascript/#ç”Ÿæˆå™¨-åç¨‹" class="toc-sidebar-link">â—ï¸ ç”Ÿæˆå™¨ &amp; åç¨‹</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/markdown/javascript/#åŸå‹é“¾" class="toc-sidebar-link">â­ï¸ åŸå‹é“¾</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/markdown/javascript/#js-å¸¸è§é—®é¢˜" class="toc-sidebar-link">â„¹ï¸ JS å¸¸è§é—®é¢˜</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#js-è¿ç®—ç¬¦" class="toc-sidebar-link">JS è¿ç®—ç¬¦</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#js-ç²¾åº¦ä¸¢å¤±" class="toc-sidebar-link">JS ç²¾åº¦ä¸¢å¤±</a></li></ul></li><li><a href="/markdown/javascript/#å‰ç«¯æ€§èƒ½ä¼˜åŒ–" class="toc-sidebar-link">ğŸ™… å‰ç«¯æ€§èƒ½ä¼˜åŒ–</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/markdown/javascript/#js-ä½è¿ç®—" class="toc-sidebar-link">â“ JS ä½è¿ç®—</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/markdown/javascript/#symbol" class="toc-sidebar-link">â“‚ï¸ Symbol</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/markdown/javascript/#json-stringify" class="toc-sidebar-link">â­•ï¸ JSON.stringify</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/markdown/javascript/#web-worker" class="toc-sidebar-link">ğŸŒŸ Web Worker</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/markdown/javascript/#è·¨åŸŸ" class="toc-sidebar-link">ğŸ’ƒ è·¨åŸŸ</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/markdown/javascript/#js-å¯é€‰é“¾" class="toc-sidebar-link">ğŸ”‘ JS å¯é€‰é“¾ ?</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#å¯¹è±¡å¯é€‰é“¾" class="toc-sidebar-link">å¯¹è±¡å¯é€‰é“¾</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#å‡½æ•°å¯é€‰é“¾" class="toc-sidebar-link">å‡½æ•°å¯é€‰é“¾</a></li></ul></li><li><a href="/markdown/javascript/#ç©ºå€¼åˆå¹¶æ“ä½œç¬¦" class="toc-sidebar-link">ğŸ˜‰ ç©ºå€¼åˆå¹¶æ“ä½œç¬¦ ??</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/markdown/javascript/#æ‰‹å†™é¢˜ç›®" class="toc-sidebar-link">æ‰‹å†™é¢˜ç›®</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#jsonp-å®ç°è·¨åŸŸèµ„æºè¯·æ±‚" class="toc-sidebar-link">JSONP å®ç°è·¨åŸŸèµ„æºè¯·æ±‚</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#object-is-å†…éƒ¨å®ç°" class="toc-sidebar-link">Object.is å†…éƒ¨å®ç°</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#æ•°ç»„æ‰å¹³åŒ–" class="toc-sidebar-link">æ•°ç»„æ‰å¹³åŒ–</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#å¯¹è±¡çš„æ‰å¹³åŒ–" class="toc-sidebar-link">å¯¹è±¡çš„æ‰å¹³åŒ–</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#æ·±æ‹·è´" class="toc-sidebar-link">æ·±æ‹·è´</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#å‘å¸ƒè®¢é˜…æ¨¡å¼-è§‚å¯Ÿè€…æ¨¡å¼" class="toc-sidebar-link">å‘å¸ƒè®¢é˜…æ¨¡å¼ &amp; è§‚å¯Ÿè€…æ¨¡å¼</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#æ•°ç»„è½¬æ ‘" class="toc-sidebar-link">æ•°ç»„è½¬æ ‘</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#é©¼å³°è½¬çŸ­æ¨ªçº¿-çŸ­æ¨ªçº¿è½¬é©¼å³°" class="toc-sidebar-link">é©¼å³°è½¬çŸ­æ¨ªçº¿ &amp; çŸ­æ¨ªçº¿è½¬é©¼å³°</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#settimeout-æ¨¡æ‹Ÿ-setinterval" class="toc-sidebar-link">setTimeout æ¨¡æ‹Ÿ setInterval</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#å¹¶è¡Œçš„-promise-è°ƒåº¦å™¨" class="toc-sidebar-link">å¹¶è¡Œçš„ Promise è°ƒåº¦å™¨</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#instanceof" class="toc-sidebar-link">instanceof</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#new" class="toc-sidebar-link">new</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#call" class="toc-sidebar-link">call</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#apply" class="toc-sidebar-link">apply</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#bind" class="toc-sidebar-link">bind</a></li></ul></li><li><a href="/markdown/javascript/#æ’åºç®—æ³•" class="toc-sidebar-link">æ’åºç®—æ³•</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#å†’æ³¡æ’åº" class="toc-sidebar-link">å†’æ³¡æ’åº</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#é€‰æ‹©æ’åº" class="toc-sidebar-link">é€‰æ‹©æ’åº</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#æ’å…¥æ’åº" class="toc-sidebar-link">æ’å…¥æ’åº</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#å¿«é€Ÿæ’åº" class="toc-sidebar-link">å¿«é€Ÿæ’åº</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#å½’å¹¶æ’åº" class="toc-sidebar-link">å½’å¹¶æ’åº</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#lazyman" class="toc-sidebar-link">LazyMan</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#é˜²æŠ–" class="toc-sidebar-link">é˜²æŠ–</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#èŠ‚æµ" class="toc-sidebar-link">èŠ‚æµ</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#ç‰ˆæœ¬å·æ¯”è¾ƒ" class="toc-sidebar-link">ç‰ˆæœ¬å·æ¯”è¾ƒ</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#lru-ç®—æ³•" class="toc-sidebar-link">LRU ç®—æ³•</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#ç¡¬å¸æ‰¾é›¶" class="toc-sidebar-link">ç¡¬å¸æ‰¾é›¶</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#ç±»æ•°ç»„è½¬æ•°ç»„çš„æ–¹æ³•" class="toc-sidebar-link">ç±»æ•°ç»„è½¬æ•°ç»„çš„æ–¹æ³•</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#ä½¿ç”¨-xmlhttprequest-å®ç°-ajax" class="toc-sidebar-link">ä½¿ç”¨ XMLHttpRequest å®ç° AJAX</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#å®ç°æ¨¡æ¿å­—ç¬¦ä¸²è§£æåŠŸèƒ½" class="toc-sidebar-link">å®ç°æ¨¡æ¿å­—ç¬¦ä¸²è§£æåŠŸèƒ½</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#åˆ—è¡¨è½¬æ ‘å½¢ç»“æ„" class="toc-sidebar-link">åˆ—è¡¨è½¬æ ‘å½¢ç»“æ„</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#åˆ¤æ–­å¾ªç¯å¼•ç”¨" class="toc-sidebar-link">åˆ¤æ–­å¾ªç¯å¼•ç”¨</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#å¯¹è±¡-æ•°ç»„å®½æ¾æ¯”è¾ƒ" class="toc-sidebar-link">å¯¹è±¡ / æ•°ç»„å®½æ¾æ¯”è¾ƒ</a></li></ul></li><li><a href="/markdown/javascript/#vue-åŸç†å®ç°" class="toc-sidebar-link">Vue åŸç†å®ç°</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#parsepath" class="toc-sidebar-link">parsePath</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#reactive-åŸºäºå¯¹è±¡" class="toc-sidebar-link">reactive - åŸºäºå¯¹è±¡</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#reactive-åŸºäºæ•°ç»„" class="toc-sidebar-link">reactive - åŸºäºæ•°ç»„</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#proxy" class="toc-sidebar-link">proxy</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#è™šæ‹Ÿ-dom-è½¬-çœŸå®-dom" class="toc-sidebar-link">è™šæ‹Ÿ DOM è½¬ çœŸå® DOM</a></li><li class="toc-sidebar-sub-header"><a href="/markdown/javascript/#nexttick" class="toc-sidebar-link">nextTick</a></li></ul></li></ul></div></div></div></div></div>  <div></div></main> <aside class="page-sidebar"> <div class="page-side-toolbar"></div>  </aside></div><div class="global-ui"><!----></div></div>
    <script src="/markdown/assets/js/app.085aa012.js" defer></script><script src="/markdown/assets/js/2.773263cd.js" defer></script><script src="/markdown/assets/js/57.af66ff8f.js" defer></script>
  </body>
</html>
