å­¦ä¹ èµ„æº

- [The Tao of Rust](https://github.com/ZhangHanDong/tao-of-rust-codes/blob/master/tao_of_rust_english.md)
- [Translation of the official The Rust Programming Language book](https://github.com/KaiserY/rust-book-chinese)
- [Translation of the Rust By Example](https://github.com/rust-lang-cn/rust-by-example-cn)
- [RustPrimer](https://github.com/rustcc/RustPrimer)
- [Chinese Rust Community](https://github.com/RustChina/rust-china.org)
- [The book in Traditional Chinese](http://askeing.github.io/rust-book/)
- [Translation of The Little Book of Rust Macros](https://github.com/DaseinPhaos/tlborm-chinese)
- [The Rust Course](https://github.com/sunface/rust-course)

## å®‰è£…

> ä»¥ä¸‹ä¸ºåœ¨ linuxã€macos å®‰è£… rust é€šç”¨çš„æ–¹æ³• â€”â€” rustup(ä¸€ä¸ªç®¡ç† Rust ç‰ˆæœ¬å’Œç›¸å…³å·¥å…·çš„å‘½ä»¤è¡Œå·¥å…·ã€‚)

```bash
$ sudo curl --proto '=https' --tlsv1.2 https://sh.rustup.rs -sSf | sh
```

ğŸ” å®é™…æ‰§è¡Œåä¼šç»è¿‡ä¸€ç³»åˆ—çš„é€‰é¡¹æ“ä½œå¹¶æœ€ååœ¨ `.bashrc` é‡Œé¢åˆ›å»º `. "$HOME/.cargo/env"`ï¼ˆæš´éœ²åœ¨ç¯å¢ƒå˜é‡ï¼‰ã€‚å¦‚æœä½¿ç”¨çš„ä¸æ˜¯ `bash` ä½œä¸ºé»˜è®¤ç»ˆç«¯çš„è¯å¯ä»¥å°†å½“å‰é…ç½®å¤åˆ¶åˆ°å¯¹åº”ç»ˆç«¯çš„é…ç½®ç¯å¢ƒä¸­ï¼Œæ¯”å¦‚ `.zshrc`

```bash
$ rustc -V # æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ
rustc 1.70.0 (90c541806 2023-05-31)
```

:warning: é™¤æ­¤ä¹‹å¤–è¿˜éœ€è¦å®‰è£…ä¸€ä¸ªé“¾æ¥å™¨( `rustc` ä¾èµ– gccã€glibc )ï¼Œåœ¨ ubuntu ä¸­å¯ä»¥é€šè¿‡å®‰è£… `build-essential`ï¼Œå®‰è£…çš„è¿‡ç¨‹ä¼šé™„å¸¦å®‰è£… `G++, dpkg-dev, GCC and make....`

```bash
$ sudo apt update
$ sudo apt install build-essential
```

- æŸ¥çœ‹æœ¬åœ°æ–‡æ¡£

```bash
$ rustup doc
```

> `cargo` å¯å¸®åŠ©å¿«é€Ÿåˆå§‹åŒ– `rust` é¡¹ç›®ï¼Œæœ‰åˆ«äºå°†æ„å»ºç»“æœæ”¾åœ¨ä¸æºç ç›¸åŒçš„ç›®å½•ï¼ŒCargo ä¼šå°†å…¶æ”¾åˆ° `targetâˆ•debug` ç›®å½•

- cargo new åˆ›å»ºé¡¹ç›®ã€‚
- cargo build æ„å»ºé¡¹ç›®ã€‚
- cargo run ä¸€æ­¥æ„å»ºå¹¶è¿è¡Œé¡¹ç›®ã€‚
- cargo check åœ¨ä¸ç”ŸæˆäºŒè¿›åˆ¶æ–‡ä»¶çš„æƒ…å†µä¸‹æ„å»ºé¡¹ç›®æ¥æ£€æŸ¥é”™è¯¯

ğŸ” å®Œæˆä»¥ä¸Šç¯å¢ƒçš„å®‰è£…åï¼Œå°±è¦é…ç½® IDE (vscode) ç¼–ç¨‹ç¯å¢ƒäº†ï¼Œä¸»è¦æ˜¯å®‰è£…ç›¸å…³æ’ä»¶

- `rust-analyzer`ï¼šrust ä»£ç è¡¥å…¨ä»¥åŠæ ¼å¼åŒ–
- `even better toml`ï¼šæ”¯æŒ `.toml` æ–‡ä»¶å®Œæ•´ç‰¹æ€§

ğŸ” `rustrc`ã€`rustup`ã€`cargo` æ¦‚å¿µåŒºåˆ†

- `rustrc`ï¼šç¼–è¯‘å™¨ï¼Œç¼–è¯‘é¡¹ç›®ä»£ç 
- `rustup`ï¼šå·¥å…·é“¾ç®¡ç†ï¼Œç”¨äºå®‰è£… `rustrc` ç‰ˆæœ¬ä»¥åŠå¸¸ç”¨ç»„ä»¶
- `cargo`ï¼šåŒ…ç®¡ç†å·¥å…·

## ç¼–è¯‘è¿‡ç¨‹

![](./rust.assets/rust-complie-process.png)

## å¸¸è§ç¼–ç¨‹æ¦‚å¿µ

> rust å˜é‡å®šä¹‰ã€åŸºç¡€è¯­æ³•ï¼ŒåŒ…æ‹¬æ•°æ®ç»“æ„.....

### å˜é‡

- å®šä¹‰ä¸€ä¸ªä¸å¯å˜å˜é‡ï¼ˆä¸èƒ½äºŒæ¬¡èµ‹å€¼ï¼‰

```rust
let x = 5
```

- å®šä¹‰å¯å˜å˜é‡

```rust
let mut x = 5
```

> ğŸ” å­˜åœ¨ä¸€ä¸ªéšè—å˜é‡çš„æ¦‚å¿µ â€”â€” å¯åŒæ—¶ä½¿ç”¨ `let` å£°æ˜åŒåå˜é‡ï¼Œåé¢çš„è¦†ç›–å‰é¢çš„å£°æ˜ã€‚å½“å‰å˜é‡ä»ç„¶ä¸å¯äºŒæ¬¡ä¿®æ”¹ã€‚

`éšè—å˜é‡` æ¦‚å¿µå’Œ `mut` çš„åŒºåˆ«

- å‰è€…æ¯æ¬¡éƒ½è¦åŠ ä¸Š `let` å®šä¹‰
- å‰è€…å®šä¹‰åŒåå˜é‡æ—¶ç±»å‹å¯ä¸ä¸€è‡´ï¼ˆå®é™…ä¸Šæ˜¯åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å˜é‡ï¼‰

### å¸¸é‡

> å¸¸é‡ä¸å˜é‡çš„åŒºåˆ«

- ä¸å…è®¸å¯¹å¸¸é‡ä½¿ç”¨ `mut`
- å£°æ˜å¸¸é‡ä½¿ç”¨ `const` å…³é”®å­—
- å¿…é¡»æ³¨æ˜å€¼çš„ç±»å‹
- åªèƒ½è¢«è®¾ç½®ä¸ºå¸¸é‡è¡¨è¾¾å¼ï¼Œè€Œä¸å¯ä»¥æ˜¯å…¶ä»–ä»»ä½•åªèƒ½åœ¨ `è¿è¡Œæ—¶è®¡ç®—å‡ºçš„å€¼`

```rust
const THREE_HOUR_IN_SECONDS: u32 = 60 * 60 * 3
```

ğŸ” Rust å¯¹å¸¸é‡çš„å‘½åçº¦å®šæ˜¯åœ¨å•è¯ä¹‹é—´ä½¿ç”¨å…¨`å¤§å†™åŠ ä¸‹åˆ’çº¿`

### æ•°æ®ç±»å‹

`rust` æ˜¯ **é™æ€ç±»å‹** è¯­è¨€ï¼Œåœ¨ç¼–è¯‘æ—¶å°±éœ€è¦çŸ¥é“æ‰€æœ‰å˜é‡çš„ç±»å‹

#### æ ‡é‡

`æ ‡é‡ç±»å‹`ä»£è¡¨ä¸€ä¸ªå•ç‹¬çš„å€¼ï¼ŒRust æœ‰å››ç§åŸºæœ¬çš„æ ‡é‡ç±»å‹ï¼šæ•´å‹ã€æµ®ç‚¹å‹ã€å¸ƒå°”ç±»å‹å’Œå­—ç¬¦ç±»å‹

##### æ•´å‹

> ä¸€ä¸ªæ²¡æœ‰å°æ•°éƒ¨åˆ†çš„æ•°å­—

ğŸ” è¡¨æ ¼ï¼šrust ä¸­çš„æ•´å‹ç±»å‹

| é•¿åº¦    | æœ‰ç¬¦å·  | æ— ç¬¦å·  |
| ------- | ------- | ------- |
| 8-bit   | `i8`    | `u8`    |
| 16-bit  | `i16`   | `u16`   |
| 32-bit  | `i32`   | `u32`   |
| 64-bit  | `i64`   | `u64`   |
| 128-bit | `i128`  | `u128`  |
| arch    | `isize` | `usize` |

å¯¹åº” `bitä½` çš„å˜ä½“éƒ½å¯ä»¥è®¾ç½®ä¸ºæœ‰ç¬¦å·å’Œæ— ç¬¦å·ã€‚

- å¯¹äº `æœ‰ç¬¦å·`å˜ä½“æ¥è¯´ï¼Œå­˜å‚¨èŒƒå›´

$$
-(2^{n-1}) åˆ° 2^{n - 1} - 1
$$

- å¯¹äº `æ— ç¬¦å·` å˜ä½“æ¥è¯´ï¼Œå­˜å‚¨èŒƒå›´

$$
0 åˆ° 2^{n} - 1
$$

- `isize` & `usize` ç±»å‹ä¾èµ–è¿è¡Œç¨‹åºçš„è®¡ç®—æ¶æ„ï¼š64 ä½ æ¶æ„ä¸Šæ—¶ 64 ä½ï¼Œ32 ä½æ¶æ„ä¸Šä¸º 32 ä½
- rust æ•°å­—ç±»å‹é»˜è®¤æ˜¯ `i32`

ğŸ” è¡¨æ ¼ï¼šrust ä¸­çš„æ•´å‹å­—é¢å€¼

| æ•°å­—å­—é¢å€¼                    | ä¾‹å­          |
| ----------------------------- | ------------- |
| Decimal (åè¿›åˆ¶)              | `98_222`      |
| Hex (åå…­è¿›åˆ¶)                | `0xff`        |
| Octal (å…«è¿›åˆ¶)                | `0o77`        |
| Binary (äºŒè¿›åˆ¶)               | `0b1111_0000` |
| Byte (å•å­—èŠ‚å­—ç¬¦)(ä»…é™äº`u8`) | `b'A'`        |

- `98_222` ç­‰ä»·äº `98222` ï¼Œ`_` ä½œä¸ºåˆ†éš”ç¬¦å·æ–¹ä¾¿è¯»æ•°

##### æµ®ç‚¹å‹

> rust æµ®ç‚¹åˆ†ä¸º å•ç²¾åº¦æµ®ç‚¹(`f32`) å’Œ åŒç²¾åº¦æµ®ç‚¹ (`f64`)

```rust
fn main() {
    let x = 2.0; // f64(é»˜è®¤)
    let y: f32 = 3.0; // f32
}
```

##### å¸ƒå°”ç±»å‹

> rust å¸ƒå°”ç±»å‹æœ‰ä¸¤ä¸ªå¯èƒ½çš„å€¼ `true` & `false`

```rust
fn main() {
    let t = true;
    let f:bool = false;
}
```

##### å­—ç¬¦ç±»å‹

> rust å­—ç¬¦ç±»å‹è¢«å®šä¹‰ä¸º `char`ï¼Œä»£è¡¨åŸç”Ÿå­—æ¯ç±»å‹

ğŸ” éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨`å•å¼•å·`å£°æ˜ `char` å­—é¢é‡ï¼›ä½¿ç”¨ `åŒå¼•å·`å£°æ˜å­—ç¬¦ä¸²çš„å­—é¢é‡

#### å¤åˆ

å¤åˆç±»å‹å°†å¤šä¸ªå€¼ç»„åˆæˆä¸€ä¸ªç±»å‹ï¼ŒåŒ…æ‹¬ `tuple` å’Œ `array`

##### å…ƒç»„

- é•¿åº¦ä¸å¯å˜

- å®šä¹‰ & è®¿é—®

  ```rust
  fn main() {
    let tup:(i32, f64, bool, char) = (10, 0.5, true, 'a');
    println!(
      "tup.0:{}, tup.1:{}, tup.2:{}, tup.3:{}",
      tup.0, tup.1, tup.2, tup.3
    )
  }
  ```

- è§£æ„å–å€¼

  ```rust
  fn main() {
    let tup:(i32, f64, bool, char) = (10, 0.5, true, 'a');
    let (x, y, q, z) = tup;
  }
  ```

##### æ•°ç»„

åŒºåˆ«äº `å…ƒç»„`ï¼Œæ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ ç±»å‹å¿…é¡»ç›¸åŒï¼›ä¸”åœ¨ `rust` ä¸­ï¼Œæ•°ç»„çš„é•¿åº¦æ˜¯å›ºå®šçš„

- åˆå§‹åŒ–æ•°ç»„

  ```rust
  let array: [i32; 5] = [1, 2, 3, 4, 5]; // æ•°ç»„é•¿åº¦ä¸º5,ä¸”æ‰€æœ‰å€¼ç±»å‹å‡ä¸ºi32
  let array = [3; 5] // æ•°ç»„é•¿åº¦ä¸º5,ä¸”æ‰€æœ‰å€¼å‡ä¸º3
  ```

- é€šè¿‡ `array[index]` çš„å½¢å¼è®¿é—®å€¼

#### å‡½æ•°

å‡½æ•°å®šä¹‰ä¸ `js` ç›¸å·®ä¸å¤šï¼ŒåŒæ ·æ˜¯ `()` åŒ…è£¹å‚æ•°ã€`{}` åŒ…è£¹å‡½æ•°ä½“ï¼Œä½†ä»¥ä¸‹å‡ ç‚¹éœ€è¦æ³¨æ„

- å‡½æ•°å‘½åâ€”â€” å…¨éƒ¨é‡‡ç”¨å°å†™ï¼Œå­˜åœ¨å¤šå•è¯æ—¶ä½¿ç”¨` _` åˆ†éš”

- å‡½æ•°å‚æ•°å…¨éƒ¨éœ€è¦æ³¨æ˜ç±»å‹

- å‡½æ•°è¿”å›åŸºäºè¡¨è¾¾å¼ï¼Œè¡¨è¾¾å¼ä¸éœ€è¦åœ¨æœ«å°¾åŠ ä¸Š `;`

  ```rust
  fn main() {
      let x = plus_one(5);
      println!("The value of x is: {x}");
  }

  fn plus_one(x: i32) -> i32 {
      x + 1; // æŠ¥é”™ï¼›å› ä¸ºè¿™æ˜¯ä¸€ä¸ªè¯­å¥ï¼Œè¯­å¥å¹¶æ²¡æœ‰è¿”å›å€¼
      x + 1 // æ­£ç¡®ï¼›ä»£è¡¨è¿™æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè¡¨è¾¾å¼è¿”å›è®¡ç®—å€¼
  }
  ```

#### å¾ªç¯

> `rust` ä¸­æœ‰ä¸‰ç§å¾ªç¯ï¼š`loop`ã€`while`ã€`for`ï¼Œç›¸å¯¹æ¥è¯´æ¯”è¾ƒå¸¸ç”¨çš„æ—¶åä¸¤è€…

##### loop

- å¯ä»¥é€šè¿‡ `break` è¿”å›å¾ªç¯å€¼

- å¯å®šä¹‰æ ‡ç­¾ï¼Œåœ¨å¤šå±‚ `loop` å¾ªç¯åµŒå¥—æƒ…æ™¯ä¸‹ç»ˆæ­¢å¯¹åº”æ ‡ç­¾å¾ªç¯

  ```rust
  fn for_loop() {
      let mut count = 0;
      'counting_up: loop {
          let mut remaining = 10;
  		// åµŒå¥— loop
          loop {
              if remaining == 9 {
                  break;
              }
              if count == 2 {
                  break 'counting_up;
              }
              remaining -= 1;
          }

          count += 1;
      }
  }
  ```

##### while

ä¸ `js ` ç›¸å·®ä¸å¤š

##### for

è¿™é‡Œçš„ `for ` æŒ‡çš„æ˜¯ `for...in` å¾ªç¯ï¼Œä¹Ÿæ˜¯ä½¿ç”¨é¢‘ç‡æœ€é«˜ä¸”ä¸å®¹æ˜“å‡ºé”™çš„å¾ªç¯

## æ‰€æœ‰æƒ

> æ‰€æœ‰æƒæ˜¯ rust çš„æ ¸å¿ƒç†å¿µï¼Œç”¨äº **å†…å­˜å›æ”¶**

å¹¶ä¸æ˜¯æ‰€æœ‰çš„æ•°æ®ç±»å‹éƒ½æœ‰æ‰€æœ‰æƒçš„æ¦‚å¿µï¼Œåƒ `i32` ã€`boo` è¿™äº›åŸºæœ¬æ ‡é‡ä»¥åŠå…ƒç»„å’Œæ•°ç»„è¿™äº›å¤åˆå˜é‡å…¶å®éƒ½ä¸æ¶‰åŠæ‰€æœ‰æƒç›¸å…³ï¼Œè€Œ `String` è¿™æ ·å¤æ‚ç±»å‹æ‰æ¶‰åŠè¿™ä¸ªæ¦‚å¿µã€‚

ğŸ” ç†è§£æ‰€æœ‰æƒå°±è¦ç†è§£ `rust` å˜é‡å†…å­˜åˆ†é…æ¨¡å¼ã€‚

- å¯¹äºç¼–è¯‘é˜¶æ®µå°±èƒ½ç¡®å®šæ‰€éœ€è¦å†…å­˜ç©ºé—´çš„å˜é‡æ¥è¯´ï¼Œä¸»è¦å­˜å‚¨åœ¨`æ ˆå†…å­˜`ä¸­ï¼Œå½“å˜é‡ç¦»å¼€å¯¹åº”çš„ä½œç”¨åŸŸåè‡ªåŠ¨å›æ”¶ï¼ˆå‡ºæ ˆï¼‰
- å¯¹äºåœ¨è¿è¡Œæ—¶æ‰èƒ½ç¡®å®šå†…å­˜ç©ºé—´çš„å˜é‡æ¥è¯´ï¼Œæ•°æ®å­˜å‚¨åœ¨ `å †å†…å­˜` ï¼Œè€Œåœ¨ `æ ˆå†…å­˜`ä¸­åˆ™å¼€è¾Ÿä¸€ä¸ªç©ºé—´å­˜å‚¨ å †å†…å­˜çš„åœ°å€ã€æ•°æ®é•¿åº¦ã€å®¹é‡

æ‰€æœ‰æƒæœºåˆ¶ï¼šå¯¹äºæ•°æ®å­˜å‚¨åœ¨ `å †å†…å­˜`ä¸­çš„å˜é‡ï¼Œä¸€æ—¦è¢«èµ‹å€¼ç»™äº†å…¶ä»–å˜é‡ï¼Œåˆ™å†…å­˜æ‰€æœ‰æƒè½¬äº¤ï¼Œå½“å‰å˜é‡è¢«è®¤ä¸ºä¸å†æœ‰æ•ˆã€‚

```rust
let s1 = String::from("hello");
let s2 = s1; // s1 æŒ‡å‘çš„å †å†…å­˜æ‰€æœ‰æƒè½¬äº¤ç»™äº† s2ï¼Œs1ä¸å†æœ‰æ•ˆ
```

ğŸ” å¯¹äºä¸å¸Œæœ›å‡ºç°ä¸Šè¯‰æ‰€æœ‰æƒè½¬äº¤çš„æƒ…å†µåˆ™éœ€è¦ç†è§£ `å€Ÿç”¨` æœºåˆ¶

```rust
let s1 = String::from("hello");
let s2 = &s1; // s2å…·å¤‡è®¿é—®s1å †å†…å­˜èƒ½åŠ›ä½†æ‰€æœ‰æƒä¸è½¬äº¤
```

`å€Ÿç”¨` æœºåˆ¶å­˜åœ¨é£é™© â€”â€” å€Ÿç”¨çš„ä½œç”¨åŸŸä¸º**å€Ÿç”¨å¼€å§‹åˆ°æœ€åä¸€æ¬¡ä½¿ç”¨ç»“æŸ**ï¼Œåœ¨è¯¥ä½œç”¨åŸŸå†…ï¼š

- å¯ä»¥åŒæ—¶å­˜åœ¨ä¸å¯å˜çš„å€Ÿç”¨
- ä¸èƒ½åŒæ—¶å­˜åœ¨å¯å˜å’Œä¸å¯å˜çš„å€Ÿç”¨

```rust
let s1 = String::from("hello");
let s2 = &s1;
let s3 = mut &s1;
println("{s3}") // no error
println("{}{}", s2, s3) // error
```

ğŸ” **slice** ç±»å‹

`slice` ç±»å‹çš„å¼•å…¥ä¸»è¦æ˜¯ä¿è¯å¯¹ String ç±»å‹çš„å¼•ç”¨æŒç»­æœ‰æ•ˆ

```rust
fn main() {
    let s1 = String::from("hello");
    let i = get_first_index(&s1);
    s1.clear()
    // s1æ¸…ç©ºäº†iä½œä¸ºå…¶å†…éƒ¨çš„ç´¢å¼•è‡ªç„¶ä¹Ÿå°±æ— æ•ˆï¼Œçœ‹ä¸Šå» get_first_index çš„å­˜åœ¨æ¯«æ— æ„ä¹‰ï¼Œä½†åœ¨ç¼–è¯‘é˜¶æ®µæ— æ³•æ£€æŸ¥è¯¥æ— ç”¨è¡Œä¸º
}
```

ä¸ºäº†è§£å†³ä¸Šé¢é—®é¢˜ï¼Œå¯ä»¥åœ¨ `get_first_index` è¿”å›ä¸€ä¸ªå¯¹ `s1` çš„å¼•ç”¨ `&s1[2..]` æ¥ä»£æ›¿ç´¢å¼•ï¼Œè¿™æ ·å°±èƒ½ä¿æŒå¯¹ `s1` çš„æŒä¹…å¼•ç”¨ï¼Œä¸€æ—¦ `clear` ï¼Œå°±åœ¨å°è¯•è·å–å¯å˜çš„å¼•ç”¨ï¼Œä¸ i ä½œä¸ºä¸å¯å˜å¼•ç”¨å¯ç›¸äº’ç‰µåˆ¶

```rust
let s1 = String::from("hello");
let s2 = &s1[..] // å¼•ç”¨ s1 æ•´ä¸ªå­—ç¬¦ä¸²
let s3 = &s1[..2] // å¼•ç”¨ s1 å‰ä¸¤ä¸ªå­—ç¬¦ä¸²
```

###

## ç»“æ„ä½“

> ç»“æ„ä½“ä¸ C é‡Œé¢çš„æ¦‚å¿µç›¸ä¼¼ï¼Œå¯ä»¥è¢«ç†è§£ä¸ºæ˜¯æŸç±»å±æ€§çš„é›†åˆ

```rust
struct User {
    active: bool,
    username: String,
    email: String,
    sign_in_count: u64,


fn main() {
    let user = User {
        active: true,
        username: String::from("jzyismylover"),
        email: String::from("3011543110@qq.com"),
        sign_in_count: 10,
    };
}
```

ğŸ” ä»¥ä¸Šå®šä¹‰çš„æ˜¯ä¸å¯å˜ç»“æ„ä½“ï¼Œå˜é‡æ˜¯å¦å¯å˜å–å†³äºç»“æ„ä½“æœ¬èº«ï¼›ç»“æ„ä½“åŒæ ·å­˜åœ¨æ‰€æœ‰æƒçš„æ¦‚å¿µï¼Œå› æ­¤å¾€å¾€åœ¨ä½¿ç”¨çš„æ—¶å€™éƒ½ä¼šä»¥å€Ÿç”¨æ–¹å¼ä½¿ç”¨

```rust
fn get_username(&user: User) {}
get_username(&user)
```

ğŸ” ç»“æ„ä½“å¯å®šä¹‰å†…éƒ¨æ–¹æ³•ï¼Œé€šå¸¸æˆ‘ä»¬å«ä»–å…³è”å‡½æ•°ï¼›æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸€èˆ¬æ˜¯ `&self:Self` ç®€å†™ä¸º `&Self`

```rust
impl Rectangle {
    fn area(&self) -> u32 { // å…³è”å‡½æ•°
      return self.width * self.height
    }
}
```

ğŸ” å…³è”å‡½æ•°å¯ä»¥ä¸æ˜¯æ–¹æ³•ï¼Œå¯ç”¨ä½œè¿”å›ä¸€ä¸ªç»“æ„ä½“æ–°å®ä¾‹çš„æ„é€ å‡½æ•°

`let sq = Rectangle::square(3);`

```rust
impl Rectangle {
    fn square(size: u32) -> Self {
        Self {
            width: size,
            height: size,
        }
    }
}
```

ğŸ” ç»“æ„ä½“å…ƒç»„

```rust
struct Color(i32, i32, i32);
fn main() {
    let rgb = Color(0, 255, 255);
    let Color(red, blue, green) = rgb; // å…è®¸è§£æ„
}
```

## æšä¸¾

> ç›¸æ¯”äºç»“æ„ä½“ï¼Œæšä¸¾æä¾›äº†é›†åˆèšé›†åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯å…è®¸æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªé›†åˆé‡Œé¢çš„è‹¥å¹²ç±»åˆ«

- å®šä¹‰ `æšä¸¾`

  ```rust
  enum Message {
      Quit,
      Move { x: i32, y: i32 },
      Write(String),
      ChangeColor(i32, i32, i32),
  }
  // ä½¿ç”¨çš„æ—¶å€™éœ€è¦ Message::Quit æŒ‡å®šæˆå‘˜
  ```

- `Options` æšä¸¾

  ```rust
  // åŒºåˆ«äºæ™®é€šæšä¸¾ï¼ŒOption æšä¸¾æŒ‚è½½åœ¨å…¨å±€ä½œç”¨åŸŸ
  // ä½¿ç”¨åˆ°äº†æ³›å‹æ¦‚å¿µ
  enum Option<T> {
      None,
      Some(T)
  }
  // ä½¿ç”¨çš„æ—¶å€™ç›´æ¥ä½¿ç”¨ç±»å‹å³å¯ Some(5)
  ```

- ç±»å‹åˆ¤å®šï¼šæšä¸¾ä¸­å¯¹åº”çš„æ˜¯åŒä¸€ç±»åˆ«ä¸åŒçš„å®ä½“ï¼Œå› æ­¤å¾€å¾€éœ€è¦å»è¿›è¡Œå¯¹åº”å®ä½“ç±»å‹åˆ¤å®šï¼Œå¸¸ç”¨å¯ä»¥ä½¿ç”¨ `match` æˆ–è€… `if let` å»ç•Œå®šç±»å‹

  ```rust
  fn value_in_cents(coin: Coin) -> u8 {
      match coin {
          Coin::Penny => 1,
          Coin::Quarter(state) => {
              // state æŒ‡ä»£æ³›å‹å€¼
          }
      }
  }
  ```

## æ¨¡å—

> æ¨¡å—åœ¨ rust é‡Œé¢æ˜¯ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„æ¦‚å¿µï¼Œè§„å®šäº†æˆ‘ä»¬å¦‚ä½•å»å¯¼åŒ…ä»¥åŠç»„ç»‡é¡¹ç›®ç»“æ„

```text
src
â”œâ”€front_of_house.rs
â”œâ”€lib.rs
â”œâ”€main.rs
â”œâ”€bin
|  â”œâ”€enum.rs
|  â”œâ”€loop.rs
|  â”œâ”€ownership.rs
|  â”œâ”€struct.rs
|  â””variable.rs
```

`rust` ä¸­å…¶å®æ¨¡å—æŒ‡ä»£çš„å°±æ˜¯ä¸€ä¸ªåŒ…(crate)ï¼Œ`crate` å…¶å®æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯ `binary crate`ï¼Œä¸€ç§æ˜¯ `package crate`ã€‚

- `binary crate`ï¼šåŒ…å« `main` å‡½æ•°ï¼Œå¯æ‰§è¡Œ
- `package crate`ï¼šä¸åŒ…å« `main` å‡½æ•°ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªé›†åˆæ–¹æ³•çš„å®šä¹‰æš´éœ²ç»™å…¶ä»–æ¨¡å—ä½¿ç”¨

ğŸ” å®šä¹‰ `package crate`

```rust
// src/lib.rs
mod front_of_house {}
mod user {}
```

ä»¥ä¸Šå‡ ä¹æ‰€æœ‰çš„æ¨¡å—éƒ½å®šä¹‰åœ¨ `crate` æ ¹ç›®å½•ï¼Œå³ `src/lib.rs`ï¼Œä»£ç è¿‡äºå†—ä½™ï¼Œå› æ­¤éœ€è¦å°†æ¨¡å—å†…éƒ¨çš„ä»£ç è¿›è¡Œæ‹†åˆ†ã€‚å› æ­¤æ‰ä¼šå‡ºç°ä¸Šé¢å±•ç¤ºçš„é¡¹ç›®ç›®å½•ï¼Œå³åœ¨ `src` å†…éƒ¨å®šä¹‰ `front_of_house.rs` æ–‡ä»¶

- ç§æœ‰ & å…¬æœ‰

é»˜è®¤æƒ…å†µä¸‹ä¸€ä¸ªæ¨¡å—å†…å®šä¹‰çš„æ–¹æ³•ã€æšä¸¾ã€ç»“æ„ä½“éƒ½æ˜¯ç§æœ‰çš„ï¼Œå¦‚æœéœ€è¦èƒ½å¤Ÿæš´éœ²ç»™å¤–éƒ¨ä½¿ç”¨çš„è¯éœ€è¦åŠ ä¸Š `pub` å­—æ®µ

```rust
mod fronted {
    pub fn add() {}
}

mod fronted {
    pub mod practise {
        pub fn add() {}
    }
}
```

```rust
mod hosting {
    pub struct Mode {
        pub name: String,
        pub age: i32
    }
}
// no error
let mut user = hosting::Mode {
    name: String::from("username"),
    age: 18,
};
```

ğŸ” å®šä¹‰ `binary crate`

ä¸€èˆ¬ `binary crate ` å®šä¹‰åœ¨ `bin` ç›®å½•ä¸‹ï¼Œä½¿ç”¨ `cargo` æ‰§è¡Œçš„æ—¶å€™

```bash
$ cargo run --bin [binary package name]
```

## vetur

> vetur å…è®¸åœ¨å•ç‹¬çš„æ•°æ®ç»“æ„ä¸­å­˜å‚¨å¤šä¸ªç›¸åŒç±»å‹çš„å€¼

- åˆå§‹åŒ–

```rust
let v: Vec<i32> = Vetur::new() // åˆå§‹åŒ–æœªçŸ¥æ•°æ®ç±»å‹
let v = vec![1, 2, 3] // åˆå§‹å€¼å·²çŸ¥æƒ…å†µä¸‹
```

- æ›´æ–° `vetur`

```rust
v.push(item)
```

- è¯»å– `vetur`

```rust
&v[index]

v.get(index)
```

ä¸¤ç§æ–¹å¼çš„åŒºåˆ«ï¼š

- é€šè¿‡å€Ÿç”¨æ–¹å¼è®¿é—®ç´¢å¼•çš„æ–¹å¼ä¸€æ—¦é‡åˆ° `index` è¶Šç•Œä¼šæŠ›é”™ç»™ç¼–è¯‘å™¨ï¼›è¿”å›å€¼ä»¥ä¸€ä¸ªå¯¹è¯¥ç´¢å¼•å¯¹åº”æ•°å€¼çš„å¼•ç”¨
- é€šè¿‡ `get` æ–¹å¼è®¿é—®åœ¨é‡åˆ°ä¸Šè¯‰æƒ…å†µä¼šè¿”å› Noneï¼›è¿”å›å€¼æ˜¯ä¸€ä¸ªå¯ä»¥ç”¨äº `match` çš„ `Option<T>`ï¼Œå› æ­¤å¯é€šè¿‡ `match` å¯¹è¶Šç•Œæƒ…å†µä½œå‡ºç›¸åº”çš„ç”¨æˆ·æç¤º

## æ³›å‹

> ä¸ TS ç±»ä¼¼ï¼Œæ³›å‹ä½¿å¾—ä»£ç æ•´ä½“å¯å¤ç”¨æ€§æ›´å¥½ï¼Œå…¼å®¹æ›´å¤šçš„ç±»å‹

```rust
struct Point<T> {
    x: T,
    y: T,
}

impl<T> Point<T> {
    fn x(&self) -> &T {
        &self.x
    }
}

fn main() {
    let integer = Point { x: 5, y: 10 };
    let float = Point { x: 1.0, y: 4.0 };
}
```

æ¯”è¾ƒæœ‰æ„æ€çš„ç‚¹æ˜¯ä¸€ä¸ªç±»å‹ä¸“ç”¨ï¼Œä»¥ä¸‹å®ä¾‹åŒ–æ³›å‹ï¼Œå¦‚æœ `Point` ç»“æ„ä½“æˆå‘˜çš„ç±»å‹å‡ä¸º `f32` æ‰å…·å¤‡ `distance_from_origin` æ–¹æ³•

```rust
impl Point<f32> {
    fn distance_from_origin(&self) -> f32 {
        (self.x.powi(2) + self.y.powi(2)).sqrt()
    }
}
```

ğŸ” æ³›å‹æ€§èƒ½

å¾—ç›Šäº `rust` åœ¨ç¼–è¯‘æ—¶å¯¹æ³›å‹ä»£çš„å•æ€åŒ–ï¼Œå› æ­¤å®é™…ä¸ä¼šå¯¹è¿è¡Œæ—¶æ•ˆç‡äº§ç”Ÿå½±å“ã€‚å•æ€åŒ–æ˜¯ä¸€ä¸ªé€šè¿‡å¡«å……ç¼–è¯‘æ—¶ä½¿ç”¨çš„å…·ä½“ç±»å‹ï¼Œå°†é€šç”¨ä»£ç è½¬æ¢ä¸ºç‰¹å®šä»£ç çš„è¿‡ç¨‹ã€‚

```rust
let integer = Some(5);
let float = Some(5.0);

// å•æ€åŒ–å
enum Option_i32 {
    Some(i32),
    None,
}

enum Option_f64 {
    Some(f64),
    None,
}

fn main() {
    let integer = Option_i32::Some(5);
    let float = Option_f64::Some(5.0);
}
```
